<div class="d-flex vh-100">

  <div class="bg-dark text-white p-3" style="width: 240px;">
    <h4 class="mb-4">CalTrack</h4>
    <ul class="nav flex-column gap-2">
      <li class="nav-item">
        <a class="nav-link text-black active bg-primary rounded bg-white" routerLink="/nutri-dashboard">Dashboard</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-white" routerLink="/check-goals">Gestión Alimentos</a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-white " routerLink="/check-users">Ver Usuarios</a>
      </li>
      <li class="nav-item mt-auto">
        <button class="btn btn-outline-light w-100" (click)="logout()">
          Sign Out
        </button>
      </li>
    </ul>
  </div>

  <div class="flex-grow-1 p-4 bg-light overflow-auto">
    
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h2>Dashboard</h2>
      <span class="badge bg-info text-white bg-black">Total Pacientes: {{ patients.length }}</span>
    </div>

<div class="card shadow-sm">
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead class="table-dark">
              <tr>
                <th>Paciente</th>
                <th>Edad</th>
                <th class="text-center">Peso (kg)</th>
                <th class="text-center">Estatura (cm)</th>
                <th class="text-center">IMC</th>
                <th class="text-center">Estado</th>
                <th class="text-end">Acciones</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let p of patients">
                <td class="align-middle">
                  <div class="fw-bold">{{ p.firstName }} {{ p.firstLastName }}</div>
                </td>
                <td class="align-middle">{{ p.age }} años</td>
                <td class="text-center align-middle">{{ p.weight }} kg</td>
                <td class="text-center align-middle">{{ p.height}} cm</td>
                <td class="text-center align-middle">
                  <span class="badge bg-light text-dark border">
                    {{ calculateIMC(p.weight, p.height) | number:'1.1-1' }}
                  </span>
                </td>
                <td class="text-center align-middle">
                  <span [ngClass]="getIMCClass(calculateIMC(p.weight, p.height))">
                    {{ getIMCCategory(calculateIMC(p.weight, p.height)) }}
                  </span>
                </td>
                <td class="text-end align-middle">
                  <button class="btn btn-sm btn-outline-primary" (click)="viewDetails(p.id)">
                    Ver Detalles / Metas
                  </button>
                </td>
              </tr>

              <tr *ngIf="patients.length === 0">
                <td colspan="7" class="text-center py-4 text-muted">
                  No tienes pacientes asignados actualmente.
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

  </div>
</div>