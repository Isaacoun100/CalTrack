var h_=Object.defineProperty,p_=Object.defineProperties;var g_=Object.getOwnPropertyDescriptors;var Nh=Object.getOwnPropertySymbols;var m_=Object.prototype.hasOwnProperty,y_=Object.prototype.propertyIsEnumerable;var xh=(e,t,n)=>t in e?h_(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||={})m_.call(t,n)&&xh(e,n,t[n]);if(Nh)for(var n of Nh(t))y_.call(t,n)&&xh(e,n,t[n]);return e},z=(e,t)=>p_(e,g_(t));var Te=null,Ds=!1,Pu=1,v_=null,Re=Symbol("SIGNAL");function L(e){let t=Te;return Te=e,t}function Is(){return Te}var Ci={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ii(e){if(Ds)throw new Error("");if(Te===null)return;Te.consumerOnSignalRead(e);let t=Te.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Te.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Te.producers,n!==void 0&&n.producer===e)){Te.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===Te&&(!r||__(i,Te)))return;let o=Dr(Te),s={producer:e,consumer:Te,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Te.producersTail=s,t!==void 0?t.nextProducer=s:Te.producers=s,o&&Fh(e,s)}function Oh(){Pu++}function Fu(e){if(!(Dr(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Pu)){if(!e.producerMustRecompute(e)&&!Ts(e)){ku(e);return}e.producerRecomputeValue(e),ku(e)}}function Lu(e){if(e.consumers===void 0)return;let t=Ds;Ds=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||w_(r)}}finally{Ds=t}}function ju(){return Te?.consumerAllowSignalWrites!==!1}function w_(e){e.dirty=!0,Lu(e),e.consumerMarkedDirty?.(e)}function ku(e){e.dirty=!1,e.lastCleanEpoch=Pu}function Si(e){return e&&kh(e),L(e)}function kh(e){e.producersTail=void 0,e.recomputing=!0}function Ss(e,t){L(t),e&&Ph(e)}function Ph(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(Dr(e))do n=Vu(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function Ts(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(Fu(n),r!==n.version))return!0}return!1}function Ti(e){if(Dr(e)){let t=e.producers;for(;t!==void 0;)t=Vu(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function Fh(e,t){let n=e.consumersTail,r=Dr(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)Fh(i.producer,i)}function Vu(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!Dr(t)){let o=t.producers;for(;o!==void 0;)o=Vu(o)}return n}function Dr(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Uu(e){v_?.(e)}function __(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Bu(e,t){return Object.is(e,t)}function As(e,t){let n=Object.create(b_);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(Fu(n),Ii(n),n.value===Cs)throw n.error;return n.value};return r[Re]=n,Uu(n),r}var xu=Symbol("UNSET"),Ou=Symbol("COMPUTING"),Cs=Symbol("ERRORED"),b_=z(_({},Ci),{value:xu,dirty:!0,error:null,equal:Bu,kind:"computed",producerMustRecompute(e){return e.value===xu||e.value===Ou},producerRecomputeValue(e){if(e.value===Ou)throw new Error("");let t=e.value;e.value=Ou;let n=Si(e),r,i=!1;try{r=e.computation(),L(null),i=t!==xu&&t!==Cs&&r!==Cs&&e.equal(t,r)}catch(o){r=Cs,e.error=o}finally{Ss(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function E_(){throw new Error}var Lh=E_;function jh(e){Lh(e)}function $u(e){Lh=e}var D_=null;function Hu(e,t){let n=Object.create(Ms);n.value=e,t!==void 0&&(n.equal=t);let r=()=>Vh(n);return r[Re]=n,Uu(n),[r,s=>Ai(n,s),s=>Uh(n,s)]}function Vh(e){return Ii(e),e.value}function Ai(e,t){ju()||jh(e),e.equal(e.value,t)||(e.value=t,C_(e))}function Uh(e,t){ju()||jh(e),Ai(e,t(e.value))}var Ms=z(_({},Ci),{equal:Bu,value:void 0,kind:"signal"});function C_(e){e.version++,Oh(),Lu(e),D_?.(e)}function zu(e){let t=L(null);try{return e()}finally{L(t)}}function O(e){return typeof e=="function"}function Cr(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Rs=Cr(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Mi(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var _e=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(O(r))try{r()}catch(o){t=o instanceof Rs?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Bh(o)}catch(s){t=t??[],s instanceof Rs?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Rs(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Bh(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Mi(n,t)}remove(t){let{_finalizers:n}=this;n&&Mi(n,t),t instanceof e&&t._removeParent(this)}};_e.EMPTY=(()=>{let e=new _e;return e.closed=!0,e})();var Gu=_e.EMPTY;function Ns(e){return e instanceof _e||e&&"closed"in e&&O(e.remove)&&O(e.add)&&O(e.unsubscribe)}function Bh(e){O(e)?e():e.unsubscribe()}var dt={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Ir={setTimeout(e,t,...n){let{delegate:r}=Ir;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=Ir;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function xs(e){Ir.setTimeout(()=>{let{onUnhandledError:t}=dt;if(t)t(e);else throw e})}function Ri(){}var $h=qu("C",void 0,void 0);function Hh(e){return qu("E",void 0,e)}function zh(e){return qu("N",e,void 0)}function qu(e,t,n){return{kind:e,value:t,error:n}}var In=null;function Sr(e){if(dt.useDeprecatedSynchronousErrorHandling){let t=!In;if(t&&(In={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=In;if(In=null,n)throw r}}else e()}function Gh(e){dt.useDeprecatedSynchronousErrorHandling&&In&&(In.errorThrown=!0,In.error=e)}var Sn=class extends _e{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ns(t)&&t.add(this)):this.destination=T_}static create(t,n,r){return new Tr(t,n,r)}next(t){this.isStopped?Ku(zh(t),this):this._next(t)}error(t){this.isStopped?Ku(Hh(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?Ku($h,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},I_=Function.prototype.bind;function Wu(e,t){return I_.call(e,t)}var Yu=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Os(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Os(r)}else Os(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Os(n)}}},Tr=class extends Sn{constructor(t,n,r){super();let i;if(O(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&dt.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Wu(t.next,o),error:t.error&&Wu(t.error,o),complete:t.complete&&Wu(t.complete,o)}):i=t}this.destination=new Yu(i)}};function Os(e){dt.useDeprecatedSynchronousErrorHandling?Gh(e):xs(e)}function S_(e){throw e}function Ku(e,t){let{onStoppedNotification:n}=dt;n&&Ir.setTimeout(()=>n(e,t))}var T_={closed:!0,next:Ri,error:S_,complete:Ri};var Ar=typeof Symbol=="function"&&Symbol.observable||"@@observable";function ft(e){return e}function Ju(...e){return Zu(e)}function Zu(e){return e.length===0?ft:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var B=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=M_(n)?n:new Tr(n,r,i);return Sr(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=qh(r),new r((i,o)=>{let s=new Tr({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Ar](){return this}pipe(...n){return Zu(n)(this)}toPromise(n){return n=qh(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function qh(e){var t;return(t=e??dt.Promise)!==null&&t!==void 0?t:Promise}function A_(e){return e&&O(e.next)&&O(e.error)&&O(e.complete)}function M_(e){return e&&e instanceof Sn||A_(e)&&Ns(e)}function R_(e){return O(e?.lift)}function K(e){return t=>{if(R_(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Y(e,t,n,r,i){return new Qu(e,t,n,r,i)}var Qu=class extends Sn{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Wh=Cr(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var me=(()=>{class e extends B{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ks(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Wh}next(n){Sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Sr(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Gu:(this.currentObservers=null,o.push(n),new _e(()=>{this.currentObservers=null,Mi(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new B;return n.source=this,n}}return e.create=(t,n)=>new ks(t,n),e})(),ks=class extends me{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Gu}};var be=class extends me{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Le=new B(e=>e.complete());function Kh(e){return e&&O(e.schedule)}function Yh(e){return e[e.length-1]}function Ps(e){return O(Yh(e))?e.pop():void 0}function Qt(e){return Kh(Yh(e))?e.pop():void 0}function An(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Fs(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function Jh(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Tn(e){return this instanceof Tn?(this.v=e,this):new Tn(e)}function Zh(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(m){return new Promise(function(y,g){o.push([f,m,y,g])>1||c(f,m)})},p&&(i[f]=p(i[f])))}function c(f,p){try{u(r[f](p))}catch(m){h(o[0][3],m)}}function u(f){f.value instanceof Tn?Promise.resolve(f.value.v).then(l,d):h(o[0][2],f)}function l(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Qh(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Jh=="function"?Jh(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Ls=e=>e&&typeof e.length=="number"&&typeof e!="function";function js(e){return O(e?.then)}function Vs(e){return O(e[Ar])}function Us(e){return Symbol.asyncIterator&&O(e?.[Symbol.asyncIterator])}function Bs(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function N_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $s=N_();function Hs(e){return O(e?.[$s])}function zs(e){return Zh(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Tn(n.read());if(i)return yield Tn(void 0);yield yield Tn(r)}}finally{n.releaseLock()}})}function Gs(e){return O(e?.getReader)}function ce(e){if(e instanceof B)return e;if(e!=null){if(Vs(e))return x_(e);if(Ls(e))return O_(e);if(js(e))return k_(e);if(Us(e))return Xh(e);if(Hs(e))return P_(e);if(Gs(e))return F_(e)}throw Bs(e)}function x_(e){return new B(t=>{let n=e[Ar]();if(O(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function O_(e){return new B(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function k_(e){return new B(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,xs)})}function P_(e){return new B(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Xh(e){return new B(t=>{L_(e,t).catch(n=>t.error(n))})}function F_(e){return Xh(zs(e))}function L_(e,t){var n,r,i,o;return Fs(this,void 0,void 0,function*(){try{for(n=Qh(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function je(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function qs(e,t=0){return K((n,r)=>{n.subscribe(Y(r,i=>je(r,e,()=>r.next(i),t),()=>je(r,e,()=>r.complete(),t),i=>je(r,e,()=>r.error(i),t)))})}function Ws(e,t=0){return K((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function ep(e,t){return ce(e).pipe(Ws(t),qs(t))}function tp(e,t){return ce(e).pipe(Ws(t),qs(t))}function np(e,t){return new B(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function rp(e,t){return new B(n=>{let r;return je(n,t,()=>{r=e[$s](),je(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>O(r?.return)&&r.return()})}function Ks(e,t){if(!e)throw new Error("Iterable cannot be null");return new B(n=>{je(n,t,()=>{let r=e[Symbol.asyncIterator]();je(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function ip(e,t){return Ks(zs(e),t)}function op(e,t){if(e!=null){if(Vs(e))return ep(e,t);if(Ls(e))return np(e,t);if(js(e))return tp(e,t);if(Us(e))return Ks(e,t);if(Hs(e))return rp(e,t);if(Gs(e))return ip(e,t)}throw Bs(e)}function ue(e,t){return t?op(e,t):ce(e)}function V(...e){let t=Qt(e);return ue(e,t)}function Xu(e,t){let n=O(e)?e:()=>e,r=i=>i.error(n());return new B(t?i=>t.schedule(r,0,i):r)}function Ys(e){return!!e&&(e instanceof B||O(e.lift)&&O(e.subscribe))}var Mn=Cr(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function G(e,t){return K((n,r)=>{let i=0;n.subscribe(Y(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:j_}=Array;function V_(e,t){return j_(t)?e(...t):e(t)}function Js(e){return G(t=>V_(e,t))}var{isArray:U_}=Array,{getPrototypeOf:B_,prototype:$_,keys:H_}=Object;function Zs(e){if(e.length===1){let t=e[0];if(U_(t))return{args:t,keys:null};if(z_(t)){let n=H_(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function z_(e){return e&&typeof e=="object"&&B_(e)===$_}function Qs(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function el(...e){let t=Qt(e),n=Ps(e),{args:r,keys:i}=Zs(e);if(r.length===0)return ue([],t);let o=new B(G_(r,t,i?s=>Qs(i,s):ft));return n?o.pipe(Js(n)):o}function G_(e,t,n=ft){return r=>{sp(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)sp(t,()=>{let u=ue(e[c],t),l=!1;u.subscribe(Y(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function sp(e,t,n){e?je(n,e,t):t()}function ap(e,t,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&t.complete()},f=m=>u<r?p(m):c.push(m),p=m=>{o&&t.next(m),u++;let y=!1;ce(n(m,l++)).subscribe(Y(t,g=>{i?.(g),o?f(g):t.next(g)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){let g=c.shift();s?je(t,s,()=>p(g)):p(g)}h()}catch(g){t.error(g)}}))};return e.subscribe(Y(t,f,()=>{d=!0,h()})),()=>{a?.()}}function Ne(e,t,n=1/0){return O(t)?Ne((r,i)=>G((o,s)=>t(r,o,i,s))(ce(e(r,i))),n):(typeof t=="number"&&(n=t),K((r,i)=>ap(r,i,e,n)))}function cp(e=1/0){return Ne(ft,e)}function up(){return cp(1)}function Mr(...e){return up()(ue(e,Qt(e)))}function Ni(e){return new B(t=>{ce(e()).subscribe(t)})}function tl(...e){let t=Ps(e),{args:n,keys:r}=Zs(e),i=new B(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;ce(n[l]).subscribe(Y(o,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?Qs(r,a):a),o.complete())}))}});return t?i.pipe(Js(t)):i}function Qe(e,t){return K((n,r)=>{let i=0;n.subscribe(Y(r,o=>e.call(t,o,i++)&&r.next(o)))})}function xi(e){return K((t,n)=>{let r=null,i=!1,o;r=t.subscribe(Y(n,void 0,void 0,s=>{o=ce(e(s,xi(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Rr(e,t){return O(t)?Ne(e,t,1):Ne(e,1)}function nl(e){return K((t,n)=>{let r=!1;t.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Lt(e){return e<=0?()=>Le:K((t,n)=>{let r=0;t.subscribe(Y(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function lp(e=q_){return K((t,n)=>{let r=!1;t.subscribe(Y(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function q_(){return new Mn}function Oi(e){return K((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function jt(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Qe((i,o)=>e(i,o,r)):ft,Lt(1),n?nl(t):lp(()=>new Mn))}function Xs(e){return e<=0?()=>Le:K((t,n)=>{let r=[];t.subscribe(Y(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function rl(...e){let t=Qt(e);return K((n,r)=>{(t?Mr(e,n,t):Mr(e,n)).subscribe(r)})}function Xe(e,t){return K((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(Y(r,c=>{i?.unsubscribe();let u=0,l=o++;ce(e(c,l)).subscribe(i=Y(r,d=>r.next(t?t(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function ki(e){return K((t,n)=>{ce(e).subscribe(Y(n,()=>n.complete(),Ri)),!n.closed&&t.subscribe(n)})}function xe(e,t,n){let r=O(e)||t||n?{next:e,error:t,complete:n}:e;return r?K((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(Y(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):ft}var il;function ea(){return il}function It(e){let t=il;return il=e,t}var dp=Symbol("NotFound");function Nr(e){return e===dp||e?.name==="\u0275NotFound"}var wl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",b=class extends Error{code;constructor(t,n){super(Fn(t,n)),this.code=t}};function Y_(e){return`NG0${Math.abs(e)}`}function Fn(e,t){return`${Y_(e)}${t?": "+t:""}`}function J(e){for(let t in e)if(e[t]===J)return t;throw Error("")}function mp(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function Ut(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(Ut).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function _l(e,t){return e?t?`${e} ${t}`:e:t||""}var J_=J({__forward_ref__:J});function pt(e){return e.__forward_ref__=pt,e.toString=function(){return Ut(this())},e}function Ee(e){return bl(e)?e():e}function bl(e){return typeof e=="function"&&e.hasOwnProperty(J_)&&e.__forward_ref__===pt}function T(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function St(e){return{providers:e.providers||[],imports:e.imports||[]}}function Ui(e){return Z_(e,oa)}function El(e){return Ui(e)!==null}function Z_(e,t){return e.hasOwnProperty(t)&&e[t]||null}function Q_(e){let t=e?.[oa]??null;return t||null}function sl(e){return e&&e.hasOwnProperty(na)?e[na]:null}var oa=J({\u0275prov:J}),na=J({\u0275inj:J}),C=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=T({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Dl(e){return e&&!!e.\u0275providers}var Cl=J({\u0275cmp:J}),Il=J({\u0275dir:J}),Sl=J({\u0275pipe:J}),Tl=J({\u0275mod:J}),Fi=J({\u0275fac:J}),Ln=J({__NG_ELEMENT_ID__:J}),fp=J({__NG_ENV_ID__:J});function Al(e){return sa(e,"@NgModule"),e[Tl]||null}function en(e){return sa(e,"@Component"),e[Cl]||null}function Ml(e){return sa(e,"@Directive"),e[Il]||null}function yp(e){return sa(e,"@Pipe"),e[Sl]||null}function sa(e,t){if(e==null)throw new b(-919,!1)}function aa(e){return typeof e=="string"?e:e==null?"":String(e)}function vp(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():aa(e)}var wp=J({ngErrorCode:J}),X_=J({ngErrorMessage:J}),eb=J({ngTokenPath:J});function Rl(e,t){return _p("",-200,t)}function ca(e,t){throw new b(-201,!1)}function _p(e,t,n){let r=new b(t,e);return r[wp]=t,r[X_]=e,n&&(r[eb]=n),r}function tb(e){return e[wp]}var al;function bp(){return al}function ze(e){let t=al;return al=e,t}function Nl(e,t,n){let r=Ui(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;ca(e,"")}var nb={},Rn=nb,rb="__NG_DI_FLAG__",cl=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=Nn(n)||0;try{return this.injector.get(t,r&8?null:Rn,r)}catch(i){if(Nr(i))return i;throw i}}};function ib(e,t=0){let n=ea();if(n===void 0)throw new b(-203,!1);if(n===null)return Nl(e,void 0,t);{let r=ob(t),i=n.retrieve(e,r);if(Nr(i)){if(r.optional)return null;throw i}return i}}function N(e,t=0){return(bp()||ib)(Ee(e),t)}function v(e,t){return N(e,Nn(t))}function Nn(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function ob(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function ul(e){let t=[];for(let n=0;n<e.length;n++){let r=Ee(e[n]);if(Array.isArray(r)){if(r.length===0)throw new b(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=sb(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(N(i,o))}else t.push(N(r))}return t}function sb(e){return e[rb]}function xn(e,t){let n=e.hasOwnProperty(Fi);return n?e[Fi]:null}function ua(e,t){e.forEach(n=>Array.isArray(n)?ua(n,t):t(n))}function xl(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Bi(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Ep(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function Dp(e,t,n){let r=Or(e,t);return r>=0?e[r|1]=n:(r=~r,Ep(e,r,t,n)),r}function la(e,t){let n=Or(e,t);if(n>=0)return e[n|1]}function Or(e,t){return ab(e,t,1)}function ab(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var tn={},Ge=[],kr=new C(""),Ol=new C("",-1),kl=new C(""),Li=class{get(t,n=Rn){if(n===Rn){let i=_p("",-201);throw i.name="\u0275NotFound",i}return n}};function jn(e){return{\u0275providers:e}}function Cp(...e){return{\u0275providers:Pl(!0,e),\u0275fromNgModule:!0}}function Pl(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return ua(t,s=>{let a=s;ra(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&Ip(i,o),n}function Ip(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];Fl(i,o=>{t(o,r)})}}function ra(e,t,n,r){if(e=Ee(e),!e)return!1;let i=null,o=sl(e),s=!o&&en(e);if(!o&&!s){let c=e.ngModule;if(o=sl(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)ra(u,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{ua(o.imports,l=>{ra(l,t,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&Ip(u,t)}if(!a){let u=xn(i)||(()=>new i);t({provide:i,useFactory:u,deps:Ge},i),t({provide:kl,useValue:i,multi:!0},i),t({provide:kr,useValue:()=>N(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=e;Fl(c,l=>{t(l,u)})}}else return!1;return i!==e&&e.providers!==void 0}function Fl(e,t){for(let n of e)Dl(n)&&(n=n.\u0275providers),Array.isArray(n)?Fl(n,t):t(n)}var cb=J({provide:String,useValue:J});function Sp(e){return e!==null&&typeof e=="object"&&cb in e}function ub(e){return!!(e&&e.useExisting)}function lb(e){return!!(e&&e.useFactory)}function On(e){return typeof e=="function"}function Tp(e){return!!e.useClass}var $i=new C(""),ta={},hp={},ol;function Hi(){return ol===void 0&&(ol=new Li),ol}var de=class{},kn=class extends de{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,dl(t,s=>this.processProvider(s)),this.records.set(Ol,xr(void 0,this)),i.has("environment")&&this.records.set(de,xr(void 0,this));let o=this.records.get($i);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(kl,Ge,{self:!0}))}retrieve(t,n){let r=Nn(n)||0;try{return this.get(t,Rn,r)}catch(i){if(Nr(i))return i;throw i}}destroy(){Pi(this),this._destroyed=!0;let t=L(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),L(t)}}onDestroy(t){return Pi(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){Pi(this);let n=It(this),r=ze(void 0),i;try{return t()}finally{It(n),ze(r)}}get(t,n=Rn,r){if(Pi(this),t.hasOwnProperty(fp))return t[fp](this);let i=Nn(r),o,s=It(this),a=ze(void 0);try{if(!(i&4)){let u=this.records.get(t);if(u===void 0){let l=gb(t)&&Ui(t);l&&this.injectableDefInScope(l)?u=xr(ll(t),ta):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u,i)}let c=i&2?Hi():this.parent;return n=i&8&&n===Rn?null:n,c.get(t,n)}catch(c){let u=tb(c);throw u===-200||u===-201?new b(u,null):c}finally{ze(a),It(s)}}resolveInjectorInitializers(){let t=L(null),n=It(this),r=ze(void 0),i;try{let o=this.get(kr,Ge,{self:!0});for(let s of o)s()}finally{It(n),ze(r),L(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(Ut(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Ee(t);let n=On(t)?t:Ee(t&&t.provide),r=fb(t);if(!On(t)&&t.multi===!0){let i=this.records.get(n);i||(i=xr(void 0,ta,!0),i.factory=()=>ul(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=L(null);try{if(n.value===hp)throw Rl(Ut(t));return n.value===ta&&(n.value=hp,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&pb(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{L(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ee(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function ll(e){let t=Ui(e),n=t!==null?t.factory:xn(e);if(n!==null)return n;if(e instanceof C)throw new b(204,!1);if(e instanceof Function)return db(e);throw new b(204,!1)}function db(e){if(e.length>0)throw new b(204,!1);let n=Q_(e);return n!==null?()=>n.factory(e):()=>new e}function fb(e){if(Sp(e))return xr(void 0,e.useValue);{let t=Ll(e);return xr(t,ta)}}function Ll(e,t,n){let r;if(On(e)){let i=Ee(e);return xn(i)||ll(i)}else if(Sp(e))r=()=>Ee(e.useValue);else if(lb(e))r=()=>e.useFactory(...ul(e.deps||[]));else if(ub(e))r=(i,o)=>N(Ee(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ee(e&&(e.useClass||e.provide));if(hb(e))r=()=>new i(...ul(e.deps));else return xn(i)||ll(i)}return r}function Pi(e){if(e.destroyed)throw new b(205,!1)}function xr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function hb(e){return!!e.deps}function pb(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function gb(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function dl(e,t){for(let n of e)Array.isArray(n)?dl(n,t):n&&Dl(n)?dl(n.\u0275providers,t):t(n)}function Ce(e,t){let n;e instanceof kn?(Pi(e),n=e):n=new cl(e);let r,i=It(n),o=ze(void 0);try{return t()}finally{It(i),ze(o)}}function Ap(){return bp()!==void 0||ea()!=null}var gt=0,F=1,k=2,De=3,et=4,tt=5,zi=6,Pr=7,Ae=8,nn=9,$t=10,ie=11,Fr=12,jl=13,Vn=14,nt=15,Un=16,Bn=17,$n=18,rn=19,Vl=20,Vt=21,da=22,Gi=23,qe=24,fa=25,qi=26,Oe=27,Mp=1;var on=7,Wi=8,Ki=9,Ue=10;function Tt(e){return Array.isArray(e)&&typeof e[Mp]=="object"}function mt(e){return Array.isArray(e)&&e[Mp]===!0}function Ul(e){return(e.flags&4)!==0}function sn(e){return e.componentOffset>-1}function Yi(e){return(e.flags&1)===1}function At(e){return!!e.template}function Lr(e){return(e[k]&512)!==0}function Hn(e){return(e[k]&256)===256}var Rp="svg",Np="math";function rt(e){for(;Array.isArray(e);)e=e[gt];return e}function Bl(e,t){return rt(t[e])}function yt(e,t){return rt(t[e.index])}function ha(e,t){return e.data[t]}function xp(e,t){return e[t]}function it(e,t){let n=t[e];return Tt(n)?n:n[gt]}function pa(e){return(e[k]&128)===128}function Op(e){return mt(e[De])}function zn(e,t){return t==null?null:e[t]}function $l(e){e[Bn]=0}function Hl(e){e[k]&1024||(e[k]|=1024,pa(e)&&Zi(e))}function kp(e,t){for(;e>0;)t=t[Vn],e--;return t}function Ji(e){return!!(e[k]&9216||e[qe]?.dirty)}function ga(e){e[$t].changeDetectionScheduler?.notify(8),e[k]&64&&(e[k]|=1024),Ji(e)&&Zi(e)}function Zi(e){e[$t].changeDetectionScheduler?.notify(0);let t=Xt(e);for(;t!==null&&!(t[k]&8192||(t[k]|=8192,!pa(t)));)t=Xt(t)}function zl(e,t){if(Hn(e))throw new b(911,!1);e[Vt]===null&&(e[Vt]=[]),e[Vt].push(t)}function Pp(e,t){if(e[Vt]===null)return;let n=e[Vt].indexOf(t);n!==-1&&e[Vt].splice(n,1)}function Xt(e){let t=e[De];return mt(t)?t[De]:t}function Fp(e){return e[Pr]??=[]}function Lp(e){return e.cleanup??=[]}var U={lFrame:Zp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var fl=!1;function jp(){return U.lFrame.elementDepthCount}function Vp(){U.lFrame.elementDepthCount++}function Gl(){U.lFrame.elementDepthCount--}function ql(){return U.bindingsEnabled}function Up(){return U.skipHydrationRootTNode!==null}function Wl(e){return U.skipHydrationRootTNode===e}function Kl(){U.skipHydrationRootTNode=null}function X(){return U.lFrame.lView}function We(){return U.lFrame.tView}function se(e){return U.lFrame.contextLView=e,e[Ae]}function ae(e){return U.lFrame.contextLView=null,e}function Be(){let e=Yl();for(;e!==null&&e.type===64;)e=e.parent;return e}function Yl(){return U.lFrame.currentTNode}function Bp(){let e=U.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function jr(e,t){let n=U.lFrame;n.currentTNode=e,n.isParent=t}function Jl(){return U.lFrame.isParent}function $p(){U.lFrame.isParent=!1}function Hp(){return U.lFrame.contextLView}function Zl(){return fl}function Ql(e){let t=fl;return fl=e,t}function zp(e){return U.lFrame.bindingIndex=e}function Qi(){return U.lFrame.bindingIndex++}function Gp(e){let t=U.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function qp(){return U.lFrame.inI18n}function Wp(e,t){let n=U.lFrame;n.bindingIndex=n.bindingRootIndex=e,ma(t)}function Kp(){return U.lFrame.currentDirectiveIndex}function ma(e){U.lFrame.currentDirectiveIndex=e}function Yp(e){let t=U.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Xl(e){U.lFrame.currentQueryIndex=e}function mb(e){let t=e[F];return t.type===2?t.declTNode:t.type===1?e[tt]:null}function ed(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=mb(o),i===null||(o=o[Vn],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=U.lFrame=Jp();return r.currentTNode=t,r.lView=e,!0}function ya(e){let t=Jp(),n=e[F];U.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function Jp(){let e=U.lFrame,t=e===null?null:e.child;return t===null?Zp(e):t}function Zp(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Qp(){let e=U.lFrame;return U.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var td=Qp;function va(){let e=Qp();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Xp(e){return(U.lFrame.contextLView=kp(e,U.lFrame.contextLView))[Ae]}function Gn(){return U.lFrame.selectedIndex}function an(e){U.lFrame.selectedIndex=e}function wa(){let e=U.lFrame;return ha(e.tView,e.selectedIndex)}function eg(){return U.lFrame.currentNamespace}var tg=!0;function _a(){return tg}function ba(e){tg=e}function hl(e,t=null,n=null,r){let i=nd(e,t,n,r);return i.resolveInjectorInitializers(),i}function nd(e,t=null,n=null,r,i=new Set){let o=[n||Ge,Cp(e)];return r=r||(typeof e=="object"?void 0:Ut(e)),new kn(o,t||Hi(),r||null,i)}var ht=class e{static THROW_IF_NOT_FOUND=Rn;static NULL=new Li;static create(t,n){if(Array.isArray(t))return hl({name:""},n,t,"");{let r=t.name??"";return hl({name:r},t.parent,t.providers,r)}}static \u0275prov=T({token:e,providedIn:"any",factory:()=>N(Ol)});static __NG_ELEMENT_ID__=-1},fe=new C(""),cn=(()=>{class e{static __NG_ELEMENT_ID__=yb;static __NG_ENV_ID__=n=>n}return e})(),pl=class extends cn{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Hn(this._lView)}onDestroy(t){let n=this._lView;return zl(n,t),()=>Pp(n,t)}};function yb(){return new pl(X())}var ng=!1,Ht=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new be(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new B(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=T({token:e,providedIn:"root",factory:()=>new e})}return e})(),gl=class extends me{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,Ap()&&(this.destroyRef=v(cn,{optional:!0})??void 0,this.pendingTasks=v(Ht,{optional:!0})??void 0)}emit(t){let n=L(null);try{super.next(t)}finally{L(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof _e&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},le=gl;function ia(...e){}function rd(e){let t,n;function r(){e=ia;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function id(e){return queueMicrotask(()=>e()),()=>{e=ia}}var od="isAngularZone",ji=od+"_ID",vb=0,Ve=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new le(!1);onMicrotaskEmpty=new le(!1);onStable=new le(!1);onError=new le(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=ng}=t;if(typeof Zone>"u")throw new b(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,bb(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(od)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new b(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new b(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,wb,ia,ia);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},wb={};function sd(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function _b(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){rd(()=>{e.callbackScheduled=!1,ml(e),e.isCheckStableRunning=!0,sd(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),ml(e)}function bb(e){let t=()=>{_b(e)},n=vb++;e._inner=e._inner.fork({name:"angular",properties:{[od]:!0,[ji]:n,[ji+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(Eb(c))return r.invokeTask(o,s,a,c);try{return pp(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),gp(e)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return pp(e),r.invoke(o,s,a,c,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!Db(c)&&t(),gp(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,ml(e),sd(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function ml(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function pp(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function gp(e){e._nesting--,sd(e)}var Vi=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new le;onMicrotaskEmpty=new le;onStable=new le;onError=new le;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function Eb(e){return rg(e,"__ignore_ng_zone__")}function Db(e){return rg(e,"__scheduler_tick__")}function rg(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Bt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},vt=new C("",{factory:()=>{let e=v(Ve),t=v(de),n;return r=>{e.runOutsideAngular(()=>{t.destroyed&&!n?setTimeout(()=>{throw r}):(n??=t.get(Bt),n.handleError(r))})}}}),ig={provide:kr,useValue:()=>{let e=v(Bt,{optional:!0})},multi:!0};function wt(e,t){let[n,r,i]=Hu(e,t?.equal),o=n,s=o[Re];return o.set=r,o.update=i,o.asReadonly=og.bind(o),o}function og(){let e=this[Re];if(e.readonlyFn===void 0){let t=()=>this();t[Re]=e,e.readonlyFn=t}return e.readonlyFn}var Pn=class{},Xi=new C("",{factory:()=>!0});var ad=new C(""),Ea=(()=>{class e{internalPendingTasks=v(Ht);scheduler=v(Pn);errorHandler=v(vt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=T({token:e,providedIn:"root",factory:()=>new e})}return e})(),cd=(()=>{class e{static \u0275prov=T({token:e,providedIn:"root",factory:()=>new yl})}return e})(),yl=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},vl=class{[Re];constructor(t){this[Re]=t}destroy(){this[Re].destroy()}};function ye(e){return zu(e)}function oo(e){return{toString:e}.toString()}function Ob(e){return typeof e=="function"}function Pg(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Ta=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Zn=(()=>{let e=()=>Fg;return e.ngInherit=!0,e})();function Fg(e){return e.type.prototype.ngOnChanges&&(e.setInput=Pb),kb}function kb(){let e=jg(this),t=e?.current;if(t){let n=e.previous;if(n===tn)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Pb(e,t,n,r,i){let o=this.declaredInputs[r],s=jg(e)||Fb(e,{previous:tn,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Ta(u&&u.currentValue,n,c===tn),Pg(e,t,i,n)}var Lg="__ngSimpleChanges__";function jg(e){return e[Lg]||null}function Fb(e,t){return e[Lg]=t}var sg=[];var Z=function(e,t=null,n){for(let r=0;r<sg.length;r++){let i=sg[r];i(e,t,n)}},q=(function(e){return e[e.TemplateCreateStart=0]="TemplateCreateStart",e[e.TemplateCreateEnd=1]="TemplateCreateEnd",e[e.TemplateUpdateStart=2]="TemplateUpdateStart",e[e.TemplateUpdateEnd=3]="TemplateUpdateEnd",e[e.LifecycleHookStart=4]="LifecycleHookStart",e[e.LifecycleHookEnd=5]="LifecycleHookEnd",e[e.OutputStart=6]="OutputStart",e[e.OutputEnd=7]="OutputEnd",e[e.BootstrapApplicationStart=8]="BootstrapApplicationStart",e[e.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",e[e.BootstrapComponentStart=10]="BootstrapComponentStart",e[e.BootstrapComponentEnd=11]="BootstrapComponentEnd",e[e.ChangeDetectionStart=12]="ChangeDetectionStart",e[e.ChangeDetectionEnd=13]="ChangeDetectionEnd",e[e.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",e[e.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",e[e.AfterRenderHooksStart=16]="AfterRenderHooksStart",e[e.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",e[e.ComponentStart=18]="ComponentStart",e[e.ComponentEnd=19]="ComponentEnd",e[e.DeferBlockStateStart=20]="DeferBlockStateStart",e[e.DeferBlockStateEnd=21]="DeferBlockStateEnd",e[e.DynamicComponentStart=22]="DynamicComponentStart",e[e.DynamicComponentEnd=23]="DynamicComponentEnd",e[e.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",e[e.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",e})(q||{});function Lb(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Fg(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Vg(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),l!=null&&(e.destroyHooks??=[]).push(n,l)}}function Ca(e,t,n){Ug(e,t,3,n)}function Ia(e,t,n,r){(e[k]&3)===n&&Ug(e,t,n,r)}function ud(e,t){let n=e[k];(n&3)===t&&(n&=16383,n+=1,e[k]=n)}function Ug(e,t,n,r){let i=r!==void 0?e[Bn]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Bn]+=65536),(a<o||o==-1)&&(jb(e,n,t,c),e[Bn]=(e[Bn]&4294901760)+c+2),c++}function ag(e,t){Z(q.LifecycleHookStart,e,t);let n=L(null);try{t.call(e)}finally{L(n),Z(q.LifecycleHookEnd,e,t)}}function jb(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[k]>>14<e[Bn]>>16&&(e[k]&3)===t&&(e[k]+=16384,ag(a,o)):ag(a,o)}var Ur=-1,Wn=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Vb(e){return(e.flags&8)!==0}function Ub(e){return(e.flags&16)!==0}function Bb(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];Hb(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function $b(e){return e===3||e===4||e===6}function Hb(e){return e.charCodeAt(0)===64}function Br(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?cg(e,n,i,null,t[++r]):cg(e,n,i,null,null))}}return e}function cg(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function Bg(e){return e!==Ur}function Aa(e){return e&32767}function zb(e){return e>>16}function Ma(e,t){let n=zb(e),r=t;for(;n>0;)r=r[Vn],n--;return r}var wd=!0;function ug(e){let t=wd;return wd=e,t}var Gb=256,$g=Gb-1,Hg=5,qb=0,Mt={};function Wb(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ln)&&(r=n[Ln]),r==null&&(r=n[Ln]=qb++);let i=r&$g,o=1<<i;t.data[e+(i>>Hg)]|=o}function Ra(e,t){let n=zg(e,t);if(n!==-1)return n;let r=t[F];r.firstCreatePass&&(e.injectorIndex=t.length,ld(r.data,e),ld(t,null),ld(r.blueprint,null));let i=Pd(e,t),o=e.injectorIndex;if(Bg(i)){let s=Aa(i),a=Ma(i,t),c=a[F].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|c[s+u]}return t[o+8]=i,o}function ld(e,t){e.push(0,0,0,0,0,0,0,0,t)}function zg(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Pd(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Yg(i),r===null)return Ur;if(n++,i=i[Vn],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return Ur}function _d(e,t,n){Wb(e,t,n)}function Gg(e,t,n){if(n&8||e!==void 0)return e;ca(t,"NodeInjector")}function qg(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[nn],o=ze(void 0);try{return i?i.get(t,r,n&8):Nl(t,r,n&8)}finally{ze(o)}}return Gg(r,t,n)}function Wg(e,t,n,r=0,i){if(e!==null){if(t[k]&2048&&!(r&2)){let s=Qb(e,t,n,r,Mt);if(s!==Mt)return s}let o=Kg(e,t,n,r,Mt);if(o!==Mt)return o}return qg(t,n,r,i)}function Kg(e,t,n,r,i){let o=Jb(n);if(typeof o=="function"){if(!ed(t,e,r))return r&1?Gg(i,n,r):qg(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ca(n);else return s}finally{td()}}else if(typeof o=="number"){let s=null,a=zg(e,t),c=Ur,u=r&1?t[nt][tt]:null;for((a===-1||r&4)&&(c=a===-1?Pd(e,t):t[a+8],c===Ur||!dg(r,!1)?a=-1:(s=t[F],a=Aa(c),t=Ma(c,t)));a!==-1;){let l=t[F];if(lg(o,a,l.data)){let d=Kb(a,t,n,s,r,u);if(d!==Mt)return d}c=t[a+8],c!==Ur&&dg(r,t[F].data[a+8]===u)&&lg(o,a,t)?(s=l,a=Aa(c),t=Ma(c,t)):a=-1}}return i}function Kb(e,t,n,r,i,o){let s=t[F],a=s.data[e+8],c=r==null?sn(a)&&wd:r!=s&&(a.type&3)!==0,u=i&1&&o===a,l=Yb(a,s,n,c,u);return l!==null?Na(t,s,l,a,i):Mt}function Yb(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,u=e.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=s[c];if(f&&At(f)&&f.type===n)return c}return null}function Na(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof Wn){let a=o;if(a.resolving){let f=vp(s[n]);throw Rl(f)}let c=ug(a.canSeeViewProviders);a.resolving=!0;let u=s[n].type||s[n],l,d=a.injectImpl?ze(a.injectImpl):null,h=ed(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&Lb(n,s[n],t)}finally{d!==null&&ze(d),ug(c),a.resolving=!1,td()}}return o}function Jb(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(Ln)?e[Ln]:void 0;return typeof t=="number"?t>=0?t&$g:Zb:t}function lg(e,t,n){let r=1<<e;return!!(n[t+(e>>Hg)]&r)}function dg(e,t){return!(e&2)&&!(e&1&&t)}var qn=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Wg(this._tNode,this._lView,t,Nn(r),n)}};function Zb(){return new qn(Be(),X())}function zt(e){return oo(()=>{let t=e.prototype.constructor,n=t[Fi]||bd(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Fi]||bd(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function bd(e){return bl(e)?()=>{let t=bd(Ee(e));return t&&t()}:xn(e)}function Qb(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[k]&2048&&!Lr(s);){let a=Kg(o,s,n,r|2,Mt);if(a!==Mt)return a;let c=o.parent;if(!c){let u=s[Vl];if(u){let l=u.get(n,Mt,r);if(l!==Mt)return l}c=Yg(s),s=s[Vn]}o=c}return i}function Yg(e){let t=e[F],n=t.type;return n===2?t.declTNode:n===1?e[tt]:null}function Xb(){return Ua(Be(),X())}function Ua(e,t){return new qr(yt(e,t))}var qr=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=Xb}return e})();function Jg(e){return(e.flags&128)===128}var Fd=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(Fd||{}),Zg=new Map,eE=0;function tE(){return eE++}function nE(e){Zg.set(e[rn],e)}function Ed(e){Zg.delete(e[rn])}var fg="__ngContext__";function $r(e,t){Tt(t)?(e[fg]=t[rn],nE(t)):e[fg]=t}function Qg(e){return em(e[Fr])}function Xg(e){return em(e[et])}function em(e){for(;e!==null&&!mt(e);)e=e[et];return e}var rE;function Ld(e){rE=e}var Ba=new C("",{factory:()=>iE}),iE="ng";var $a=new C(""),so=new C("",{providedIn:"platform",factory:()=>"unknown"});var Ha=new C("",{factory:()=>v(fe).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var tm=!1,nm=new C("",{factory:()=>tm});var oE=(e,t,n,r)=>{};function sE(e,t,n,r){oE(e,t,n,r)}function jd(e){return(e.flags&32)===32}var aE=()=>null;function rm(e,t,n=!1){return aE(e,t,n)}function im(e,t){let n=e.contentQueries;if(n!==null){let r=L(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];Xl(o),a.contentQueries(2,t[s],s)}}}finally{L(r)}}}function Dd(e,t,n){Xl(0);let r=L(null);try{t(e,n)}finally{L(r)}}function om(e,t,n){if(Ul(t)){let r=L(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{L(r)}}}var bt=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e[e.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",e})(bt||{});var Cd=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${wl})`}};function sm(e){return e instanceof Cd?e.changingThisBreaksApplicationSecurity:e}function cE(e,t){return e.createText(t)}function uE(e,t,n){e.setValue(t,n)}function am(e,t,n){return e.createElement(t,n)}function xa(e,t,n,r,i){e.insertBefore(t,n,r,i)}function cm(e,t,n){e.appendChild(t,n)}function hg(e,t,n,r,i){r!==null?xa(e,t,n,r,i):cm(e,t,n)}function lE(e,t,n,r){e.removeChild(null,t,n,r)}function dE(e,t,n){e.setAttribute(t,"style",n)}function fE(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function um(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Bb(e,t,r),i!==null&&fE(e,t,i),o!==null&&dE(e,t,o)}function lm(e){return e instanceof Function?e():e}function hE(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var dm="ng-template";function pE(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&hE(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Vd(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Vd(e){return e.type===4&&e.value!==dm}function gE(e,t,n){let r=e.type===4&&!n?dm:e.value;return t===r}function mE(e,t,n){let r=4,i=e.attrs,o=i!==null?wE(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!_t(r)&&!_t(c))return!1;if(s&&_t(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!gE(e,c,n)||c===""&&t.length===1){if(_t(r))return!1;s=!0}}else if(r&8){if(i===null||!pE(e,i,c,n)){if(_t(r))return!1;s=!0}}else{let u=t[++a],l=yE(c,i,Vd(e),n);if(l===-1){if(_t(r))return!1;s=!0;continue}if(u!==""){let d;if(l>o?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(_t(r))return!1;s=!0}}}}return _t(r)||s}function _t(e){return(e&1)===0}function yE(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return _E(t,e)}function vE(e,t,n=!1){for(let r=0;r<t.length;r++)if(mE(e,t[r],n))return!0;return!1}function wE(e){for(let t=0;t<e.length;t++){let n=e[t];if($b(n))return t}return e.length}function _E(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function pg(e,t){return e?":not("+t.trim()+")":t}function bE(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!_t(s)&&(t+=pg(o,i),i=""),r=s,o=o||!_t(r);n++}return i!==""&&(t+=pg(o,i)),t}function EE(e){return e.map(bE).join(",")}function DE(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!_t(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var ln={};function Ud(e,t,n,r,i,o,s,a,c,u,l){let d=Oe+r,h=d+i,f=CE(d,h),p=typeof u=="function"?u():u;return f[F]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function CE(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:ln);return n}function IE(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Ud(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Bd(e,t,n,r,i,o,s,a,c,u,l){let d=t.blueprint.slice();return d[gt]=i,d[k]=r|4|128|8|64|1024,(u!==null||e&&e[k]&2048)&&(d[k]|=2048),$l(d),d[De]=d[Vn]=e,d[Ae]=n,d[$t]=s||e&&e[$t],d[ie]=a||e&&e[ie],d[nn]=c||e&&e[nn]||null,d[tt]=o,d[rn]=tE(),d[zi]=l,d[Vl]=u,d[nt]=t.type==2?e[nt]:d,d}function SE(e,t,n){let r=yt(t,e),i=IE(n),o=e[$t].rendererFactory,s=$d(e,Bd(e,i,null,fm(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function fm(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function hm(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function $d(e,t){return e[Fr]?e[jl][et]=t:e[Fr]=t,e[jl]=t,t}function Q(e=1){pm(We(),X(),Gn()+e,!1)}function pm(e,t,n,r){if(!r)if((t[k]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Ca(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Ia(t,o,0,n)}an(n)}var za=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(za||{});function Id(e,t,n,r){let i=L(null);try{let[o,s,a]=e.inputs[n],c=null;(s&za.SignalBased)!==0&&(c=t[o][Re]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):Pg(t,c,o,r)}finally{L(i)}}var Rt=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(Rt||{}),TE;function Hd(e,t){return TE(e,t)}var Hr=new Set,zd=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(zd||{}),Qn=new C(""),gg=new Set;function Gd(e){gg.has(e)||(gg.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var gm=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=T({token:e,providedIn:"root",factory:()=>new e})}return e})();var AE=new C("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:v(de)})});function mm(e,t,n){let r=e.get(AE);if(Array.isArray(t))for(let i of t)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function ME(e,t){for(let[n,r]of t)mm(e,r.animateFns)}function mg(e,t,n,r){let i=e?.[qi]?.enter;t!==null&&i&&i.has(n.index)&&ME(r,i)}function Vr(e,t,n,r,i,o,s,a){if(i!=null){let c,u=!1;mt(i)?c=i:Tt(i)&&(u=!0,i=i[gt]);let l=rt(i);e===0&&r!==null?(mg(a,r,o,n),s==null?cm(t,r,l):xa(t,r,l,s||null,!0)):e===1&&r!==null?(mg(a,r,o,n),xa(t,r,l,s||null,!0)):e===2?yg(a,o,n,d=>{lE(t,l,u,d)}):e===3&&yg(a,o,n,()=>{t.destroyNode(l)}),c!=null&&$E(t,e,n,c,o,r,s)}}function RE(e,t){ym(e,t),t[gt]=null,t[tt]=null}function NE(e,t,n,r,i,o){r[gt]=i,r[tt]=t,Ga(e,r,n,1,i,o)}function ym(e,t){t[$t].changeDetectionScheduler?.notify(9),Ga(e,t,t[ie],2,null,null)}function xE(e){let t=e[Fr];if(!t)return dd(e[F],e);for(;t;){let n=null;if(Tt(t))n=t[Fr];else{let r=t[Ue];r&&(n=r)}if(!n){for(;t&&!t[et]&&t!==e;)Tt(t)&&dd(t[F],t),t=t[De];t===null&&(t=e),Tt(t)&&dd(t[F],t),n=t&&t[et]}t=n}}function qd(e,t){let n=e[Ki],r=n.indexOf(t);n.splice(r,1)}function vm(e,t){if(Hn(t))return;let n=t[ie];n.destroyNode&&Ga(e,t,n,3,null,null),xE(t)}function dd(e,t){if(Hn(t))return;let n=L(null);try{t[k]&=-129,t[k]|=256,t[qe]&&Ti(t[qe]),PE(e,t),kE(e,t),t[F].type===1&&t[ie].destroy();let r=t[Un];if(r!==null&&mt(t[De])){r!==t[De]&&qd(r,t);let i=t[$n];i!==null&&i.detachView(e)}Ed(t)}finally{L(n)}}function yg(e,t,n,r){let i=e?.[qi];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);e&&Hr.add(e[rn]),mm(n,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:l}=u();a.push(l)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),OE(e,r)}else e&&Hr.delete(e[rn]),r(!1)},i)}function OE(e,t){let n=e[qi]?.running;if(n){n.then(()=>{e[qi].running=void 0,Hr.delete(e[rn]),t(!0)});return}t(!1)}function kE(e,t){let n=e.cleanup,r=t[Pr];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[Pr]=null);let i=t[Vt];if(i!==null){t[Vt]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[Gi];if(o!==null){t[Gi]=null;for(let s of o)s.destroy()}}function PE(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Wn)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];Z(q.LifecycleHookStart,a,c);try{c.call(a)}finally{Z(q.LifecycleHookEnd,a,c)}}else{Z(q.LifecycleHookStart,i,o);try{o.call(i)}finally{Z(q.LifecycleHookEnd,i,o)}}}}}function FE(e,t,n){return LE(e,t.parent,n)}function LE(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[gt];if(sn(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===bt.None||i===bt.Emulated)return null}return yt(r,n)}function jE(e,t,n){return UE(e,t,n)}function VE(e,t,n){return e.type&40?yt(e,n):null}var UE=VE,vg;function Wd(e,t,n,r){let i=FE(e,r,t),o=t[ie],s=r.parent||t[tt],a=jE(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)hg(o,i,n[c],a,!1);else hg(o,i,n,a,!1);vg!==void 0&&vg(o,r,t,n,i)}function eo(e,t){if(t!==null){let n=t.type;if(n&3)return yt(t,e);if(n&4)return Sd(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return eo(e,r);{let i=e[t.index];return mt(i)?Sd(-1,i):rt(i)}}else{if(n&128)return eo(e,t.next);if(n&32)return Hd(t,e)()||rt(e[t.index]);{let r=wm(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Xt(e[nt]);return eo(i,r)}else return eo(e,t.next)}}}return null}function wm(e,t){if(t!==null){let r=e[nt][tt],i=t.projection;return r.projection[i]}return null}function Sd(e,t){let n=Ue+e+1;if(n<t.length){let r=t[n],i=r[F].firstChild;if(i!==null)return eo(r,i)}return t[on]}function Kd(e,t,n,r,i,o,s){for(;n!=null;){let a=r[nn];if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&t===0&&(c&&$r(rt(c),r),n.flags|=2),!jd(n))if(u&8)Kd(e,t,n.child,r,i,o,!1),Vr(t,e,a,i,c,n,o,r);else if(u&32){let l=Hd(n,r),d;for(;d=l();)Vr(t,e,a,i,d,n,o,r);Vr(t,e,a,i,c,n,o,r)}else u&16?BE(e,t,r,n,i,o):Vr(t,e,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Ga(e,t,n,r,i,o){Kd(n,r,e.firstChild,t,i,o,!1)}function BE(e,t,n,r,i,o){let s=n[nt],c=s[tt].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Vr(t,e,n[nn],i,l,r,o,n)}else{let u=c,l=s[De];Jg(r)&&(u.flags|=128),Kd(e,t,u,l,i,o,!0)}}function $E(e,t,n,r,i,o,s){let a=r[on],c=rt(r);a!==c&&Vr(t,e,n,o,a,i,s);for(let u=Ue;u<r.length;u++){let l=r[u];Ga(l[F],l,e,t,o,a)}}function HE(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:Rt.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=Rt.Important),e.setStyle(n,r,i,o))}}function _m(e,t,n,r,i){let o=Gn(),s=r&2;try{an(-1),s&&t.length>Oe&&pm(e,t,Oe,!1);let a=s?q.TemplateUpdateStart:q.TemplateCreateStart;Z(a,i,n),n(r,i)}finally{an(o);let a=s?q.TemplateUpdateEnd:q.TemplateCreateEnd;Z(a,i,n)}}function Yd(e,t,n){JE(e,t,n),(n.flags&64)===64&&ZE(e,t,n)}function Jd(e,t,n=yt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function zE(e,t,n,r){let o=r.get(nm,tm)||n===bt.ShadowDom||n===bt.ExperimentalIsolatedShadowDom,s=e.selectRootElement(t,o);return GE(s),s}function GE(e){qE(e)}var qE=()=>null;function WE(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function bm(e,t,n,r,i,o){let s=t[F];if(Zd(e,s,t,n,r)){sn(e)&&YE(t,e.index);return}e.type&3&&(n=WE(n)),KE(e,t,n,r,i,o)}function KE(e,t,n,r,i,o){if(e.type&3){let s=yt(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function YE(e,t){let n=it(t,e);n[k]&16||(n[k]|=64)}function JE(e,t,n){let r=n.directiveStart,i=n.directiveEnd;sn(n)&&SE(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||Ra(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=Na(t,e,s,n);if($r(c,t),o!==null&&tD(t,s-r,c,a,n,o),At(a)){let u=it(n.index,t);u[Ae]=Na(t,e,s,n)}}}function ZE(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Kp();try{an(o);for(let a=r;a<i;a++){let c=e.data[a],u=t[a];ma(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&QE(c,u)}}finally{an(-1),ma(s)}}function QE(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function Em(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];vE(t,o.selectors,!1)&&(r??=[],At(o)?r.unshift(o):r.push(o))}return r}function XE(e,t,n,r,i,o){let s=yt(e,t);eD(t[ie],s,o,e.value,n,r,i)}function eD(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?aa(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function tD(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];Id(r,n,c,u)}}function Dm(e,t,n,r,i){let o=Oe+n,s=t[F],a=i(s,t,e,r,n);t[o]=a,jr(e,!0);let c=e.type===2;return c?(um(t[ie],a,e),(jp()===0||Yi(e))&&$r(a,t),Vp()):$r(a,t),_a()&&(!c||!jd(e))&&Wd(s,t,a,e),e}function Cm(e){let t=e;return Jl()?$p():(t=t.parent,jr(t,!1)),t}function nD(e,t){let n=e[nn];if(!n)return;let r;try{r=n.get(vt,null)}catch{r=null}r?.(t)}function Zd(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1],d=t.data[u];Id(d,n[u],l,i),a=!0}if(o)for(let c of o){let u=n[c],l=t.data[c];Id(l,u,r,i),a=!0}return a}function rD(e,t){let n=it(t,e),r=n[F];iD(r,n);let i=n[gt];i!==null&&n[zi]===null&&(n[zi]=rm(i,n[nn])),Z(q.ComponentStart);try{Qd(r,n,n[Ae])}finally{Z(q.ComponentEnd,n[Ae])}}function iD(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Qd(e,t,n){ya(t);try{let r=e.viewQuery;r!==null&&Dd(1,r,n);let i=e.template;i!==null&&_m(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[$n]?.finishViewCreation(e),e.staticContentQueries&&im(e,t),e.staticViewQueries&&Dd(2,e.viewQuery,n);let o=e.components;o!==null&&oD(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[k]&=-5,va()}}function oD(e,t){for(let n=0;n<t.length;n++)rD(e,t[n])}function sD(e,t,n,r){let i=L(null);try{let o=t.tView,a=e[k]&4096?4096:16,c=Bd(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];c[Un]=u;let l=e[$n];return l!==null&&(c[$n]=l.createEmbeddedView(o)),Qd(o,c,n),c}finally{L(i)}}function wg(e,t){return!t||t.firstChild===null||Jg(e)}function no(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(rt(o)),mt(o)&&Im(o,r);let s=n.type;if(s&8)no(e,t,n.child,r);else if(s&32){let a=Hd(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=wm(t,n);if(Array.isArray(a))r.push(...a);else{let c=Xt(t[nt]);no(c[F],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function Im(e,t){for(let n=Ue;n<e.length;n++){let r=e[n],i=r[F].firstChild;i!==null&&no(r[F],r,i,t)}e[on]!==e[gt]&&t.push(e[on])}function Sm(e){if(e[fa]!==null){for(let t of e[fa])t.impl.addSequence(t);e[fa].length=0}}var Tm=[];function aD(e){return e[qe]??cD(e)}function cD(e){let t=Tm.pop()??Object.create(lD);return t.lView=e,t}function uD(e){e.lView[qe]!==e&&(e.lView=null,Tm.push(e))}var lD=z(_({},Ci),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Zi(e.lView)},consumerOnSignalRead(){this.lView[qe]=this}});function dD(e){let t=e[qe]??Object.create(fD);return t.lView=e,t}var fD=z(_({},Ci),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Xt(e.lView);for(;t&&!Am(t[F]);)t=Xt(t);t&&Hl(t)},consumerOnSignalRead(){this.lView[qe]=this}});function Am(e){return e.type!==2}function Mm(e){if(e[Gi]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[Gi])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[k]&8192)}}var hD=100;function Rm(e,t=0){let r=e[$t].rendererFactory,i=!1;i||r.begin?.();try{pD(e,t)}finally{i||r.end?.()}}function pD(e,t){let n=Zl();try{Ql(!0),Td(e,t);let r=0;for(;Ji(e);){if(r===hD)throw new b(103,!1);r++,Td(e,1)}}finally{Ql(n)}}function gD(e,t,n,r){if(Hn(t))return;let i=t[k],o=!1,s=!1;ya(t);let a=!0,c=null,u=null;o||(Am(e)?(u=aD(t),c=Si(u)):Is()===null?(a=!1,u=dD(t),c=Si(u)):t[qe]&&(Ti(t[qe]),t[qe]=null));try{$l(t),zp(e.bindingStartIndex),n!==null&&_m(e,t,n,2,r);let l=(i&3)===3;if(!o)if(l){let f=e.preOrderCheckHooks;f!==null&&Ca(t,f,null)}else{let f=e.preOrderHooks;f!==null&&Ia(t,f,0,null),ud(t,0)}if(s||mD(t),Mm(t),Nm(t,0),e.contentQueries!==null&&im(e,t),!o)if(l){let f=e.contentCheckHooks;f!==null&&Ca(t,f)}else{let f=e.contentHooks;f!==null&&Ia(t,f,1),ud(t,1)}vD(e,t);let d=e.components;d!==null&&Om(t,d,0);let h=e.viewQuery;if(h!==null&&Dd(2,h,r),!o)if(l){let f=e.viewCheckHooks;f!==null&&Ca(t,f)}else{let f=e.viewHooks;f!==null&&Ia(t,f,2),ud(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[da]){for(let f of t[da])f();t[da]=null}o||(Sm(t),t[k]&=-73)}catch(l){throw o||Zi(t),l}finally{u!==null&&(Ss(u,c),a&&uD(u)),va()}}function Nm(e,t){for(let n=Qg(e);n!==null;n=Xg(n))for(let r=Ue;r<n.length;r++){let i=n[r];xm(i,t)}}function mD(e){for(let t=Qg(e);t!==null;t=Xg(t)){if(!(t[k]&2))continue;let n=t[Ki];for(let r=0;r<n.length;r++){let i=n[r];Hl(i)}}}function yD(e,t,n){Z(q.ComponentStart);let r=it(t,e);try{xm(r,n)}finally{Z(q.ComponentEnd,r[Ae])}}function xm(e,t){pa(e)&&Td(e,t)}function Td(e,t){let r=e[F],i=e[k],o=e[qe],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ts(o)),s||=!1,o&&(o.dirty=!1),e[k]&=-9217,s)gD(r,e,r.template,e[Ae]);else if(i&8192){let a=L(null);try{Mm(e),Nm(e,1);let c=r.components;c!==null&&Om(e,c,1),Sm(e)}finally{L(a)}}}function Om(e,t,n){for(let r=0;r<t.length;r++)yD(e,t[r],n)}function vD(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)an(~i);else{let o=i,s=n[++r],a=n[++r];Wp(s,o);let c=t[o];Z(q.HostBindingsUpdateStart,c);try{a(2,c)}finally{Z(q.HostBindingsUpdateEnd,c)}}}}finally{an(-1)}}function Xd(e,t){let n=Zl()?64:1088;for(e[$t].changeDetectionScheduler?.notify(t);e;){e[k]|=n;let r=Xt(e);if(Lr(e)&&!r)return e;e=r}return null}function km(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function wD(e,t,n,r=!0){let i=t[F];if(_D(i,t,e,n),r){let s=Sd(n,e),a=t[ie],c=a.parentNode(e[on]);c!==null&&NE(i,e[tt],a,t,c,s)}let o=t[zi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Ad(e,t){if(e.length<=Ue)return;let n=Ue+t,r=e[n];if(r){let i=r[Un];i!==null&&i!==e&&qd(i,r),t>0&&(e[n-1][et]=r[et]);let o=Bi(e,Ue+t);RE(r[F],r);let s=o[$n];s!==null&&s.detachView(o[F]),r[De]=null,r[et]=null,r[k]&=-129}return r}function _D(e,t,n,r){let i=Ue+r,o=n.length;r>0&&(n[i-1][et]=t),r<o-Ue?(t[et]=n[i],xl(n,Ue+r,t)):(n.push(t),t[et]=null),t[De]=n;let s=t[Un];s!==null&&n!==s&&Pm(s,t);let a=t[$n];a!==null&&a.insertView(e),ga(t),t[k]|=128}function Pm(e,t){let n=e[Ki],r=t[De];if(Tt(r))e[k]|=2;else{let i=r[De][nt];t[nt]!==i&&(e[k]|=2)}n===null?e[Ki]=[t]:n.push(t)}var un=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[F];return no(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Ae]}set context(t){this._lView[Ae]=t}get destroyed(){return Hn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[De];if(mt(t)){let n=t[Wi],r=n?n.indexOf(this):-1;r>-1&&(Ad(t,r),Bi(n,r))}this._attachedToViewContainer=!1}vm(this._lView[F],this._lView)}onDestroy(t){zl(this._lView,t)}markForCheck(){Xd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[k]&=-129}reattach(){ga(this._lView),this._lView[k]|=128}detectChanges(){this._lView[k]|=1024,Rm(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new b(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Lr(this._lView),n=this._lView[Un];n!==null&&!t&&qd(n,this._lView),ym(this._lView[F],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new b(902,!1);this._appRef=t;let n=Lr(this._lView),r=this._lView[Un];r!==null&&!n&&Pm(r,this._lView),ga(this._lView)}};var ao=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=bD;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=sD(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new un(o)}}return e})();function bD(){return ED(Be(),X())}function ED(e,t){return e.type&4?new ao(t,e,Ua(e,t)):null}function qa(e,t,n,r,i){let o=e.data[t];if(o===null)o=DD(e,t,n,r,i),qp()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Bp();o.injectorIndex=s===null?-1:s.injectorIndex}return jr(o,!0),o}function DD(e,t,n,r,i){let o=Yl(),s=Jl(),a=s?o:o&&o.parent,c=e.data[t]=ID(e,a,n,t,r,i);return CD(e,c,o,s),c}function CD(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function ID(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return Up()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var SD=()=>null;function _g(e,t){return SD(e,t)}var Fm=class{},Wa=class{},Md=class{resolveComponentFactory(t){throw new b(917,!1)}},co=class{static NULL=new Md},Kn=class{},uo=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>TD()}return e})();function TD(){let e=X(),t=Be(),n=it(t.index,e);return(Tt(n)?n:e)[ie]}var Lm=(()=>{class e{static \u0275prov=T({token:e,providedIn:"root",factory:()=>null})}return e})();var Sa={},Rd=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,Sa,r);return i!==Sa||n===Sa?i:this.parentInjector.get(t,n,r)}};function Oa(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=_l(i,a);else if(o==2){let c=a,u=t[++s];r=_l(r,c+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function $(e,t=0){let n=X();if(n===null)return N(e,t);let r=Be();return Wg(r,n,Ee(e),t)}function jm(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,u=null;for(let l of s)if(l.resolveHostDirectives!==null){[a,c,u]=l.resolveHostDirectives(s);break}RD(e,t,n,a,o,c,u)}o!==null&&r!==null&&AD(n,r,o)}function AD(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new b(-301,!1);r.push(t[i],o)}}function MD(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function RD(e,t,n,r,i,o,s){let a=r.length,c=null;for(let h=0;h<a;h++){let f=r[h];c===null&&At(f)&&(c=f,MD(e,n,h)),_d(Ra(n,t),e,f.type)}FD(n,e.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let u=!1,l=!1,d=hm(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(n.mergedAttrs=Br(n.mergedAttrs,f.hostAttrs),xD(e,n,t,d,f),PD(d,f,i),s!==null&&s.has(f)){let[m,y]=s.get(f);n.directiveToIndex.set(f.type,[d,m+n.directiveStart,y+n.directiveStart])}else(o===null||!o.has(f))&&n.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!u&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),u=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),l=!0),d++}ND(e,n,o)}function ND(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))bg(0,t,i,r),bg(1,t,i,r),Dg(t,r,!1);else{let o=n.get(i);Eg(0,t,o,r),Eg(1,t,o,r),Dg(t,r,!0)}}}function bg(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),Vm(t,o)}}function Eg(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Vm(t,s)}}function Vm(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function Dg(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||Vd(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let u=i[c];for(let l of u)if(l===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let u=o[c];for(let l=0;l<u.length;l+=2)if(u[l]===t){s??=[],s.push(u[l+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function xD(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=xn(i.type,!0)),s=new Wn(o,At(i),$,null);e.blueprint[r]=s,n[r]=s,OD(e,t,r,hm(e,n,i.hostVars,ln),i)}function OD(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;kD(s)!=a&&s.push(a),s.push(n,r,o)}}function kD(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function PD(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;At(t)&&(n[""]=e)}}function FD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Um(e,t,n,r,i,o,s,a){let c=t[F],u=c.consts,l=zn(u,s),d=qa(c,e,n,r,l);return o&&jm(c,t,d,zn(u,a),i),d.mergedAttrs=Br(d.mergedAttrs,d.attrs),d.attrs!==null&&Oa(d,d.attrs,!1),d.mergedAttrs!==null&&Oa(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function Bm(e,t){Vg(e,t),Ul(t)&&e.queries.elementEnd(t)}function LD(e,t,n,r,i,o){let s=t.consts,a=zn(s,i),c=qa(t,e,n,r,a);if(c.mergedAttrs=Br(c.mergedAttrs,c.attrs),o!=null){let u=zn(s,o);c.localNames=[];for(let l=0;l<u.length;l+=2)c.localNames.push(u[l],-1)}return c.attrs!==null&&Oa(c,c.attrs,!1),c.mergedAttrs!==null&&Oa(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function ef(e){return Hm(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function $m(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{let n=e[Symbol.iterator](),r;for(;!(r=n.next()).done;)t(r.value)}}function Hm(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function lo(e,t,n){if(n===ln)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function fd(e,t,n){return function r(i){let o=sn(e)?it(e.index,t):t;Xd(o,5);let s=t[Ae],a=Cg(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=Cg(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function Cg(e,t,n,r){let i=L(null);try{return Z(q.OutputStart,t,n),n(r)!==!1}catch(o){return nD(e,o),!1}finally{Z(q.OutputEnd,t,n),L(i)}}function jD(e,t,n,r,i,o,s,a){let c=Yi(e),u=!1,l=null;if(!r&&c&&(l=UD(t,n,o,e.index)),l!==null){let d=l.__ngLastListenerFn__||l;d.__ngNextListenerFn__=s,l.__ngLastListenerFn__=s,u=!0}else{let d=yt(e,n),h=r?r(d):d;sE(n,h,o,a);let f=i.listen(h,o,a);if(!VD(o)){let p=r?m=>r(rt(m[e.index])):e.index;zm(p,t,n,o,a,f,!1)}}return u}function VD(e){return e.startsWith("animation")||e.startsWith("transition")}function UD(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[Pr],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function zm(e,t,n,r,i,o,s){let a=t.firstCreatePass?Lp(t):null,c=Fp(n),u=c.length;c.push(i,o),a&&a.push(r,e,u,(u+1)*(s?-1:1))}function Ig(e,t,n,r,i,o){let s=t[n],a=t[F],u=a.data[n].outputs[r],d=s[u].subscribe(o);zm(e.index,a,t,i,o,d,!0)}var Nd=Symbol("BINDING");var ka=class extends co{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=en(t);return new zr(n,this.ngModule)}};function BD(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&za.SignalBased)!==0};return i&&(o.transform=i),o})}function $D(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function HD(e,t,n){let r=t instanceof de?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Rd(n,r):n}function zD(e){let t=e.get(Kn,null);if(t===null)throw new b(407,!1);let n=e.get(Lm,null),r=e.get(Pn,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function GD(e,t){let n=Gm(e);return am(t,n,n==="svg"?Rp:n==="math"?Np:null)}function Gm(e){return(e.selectors[0][0]||"div").toLowerCase()}var zr=class extends Wa{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=BD(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=$D(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=EE(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){Z(q.DynamicComponentStart);let a=L(null);try{let c=this.componentDef,u=qD(r,c,s,o),l=HD(c,i||this.ngModule,t),d=zD(l),h=d.rendererFactory.createRenderer(null,c),f=r?zE(h,r,c.encapsulation,l):GD(c,h),p=s?.some(Sg)||o?.some(g=>typeof g!="function"&&g.bindings.some(Sg)),m=Bd(null,u,null,512|fm(c),null,null,d,h,l,null,rm(f,l,!0));m[Oe]=f,ya(m);let y=null;try{let g=Um(Oe,m,2,"#host",()=>u.directiveRegistry,!0,0);um(h,f,g),$r(f,m),Yd(u,m,g),om(u,g,m),Bm(u,g),n!==void 0&&KD(g,this.ngContentSelectors,n),y=it(g.index,m),m[Ae]=y[Ae],Qd(u,m,null)}catch(g){throw y!==null&&Ed(y),Ed(m),g}finally{Z(q.DynamicComponentEnd),va()}return new Pa(this.componentType,m,!!p)}finally{L(a)}}};function qD(e,t,n,r){let i=e?["ng-version","21.0.8"]:DE(t.selectors[0]),o=null,s=null,a=0;if(n)for(let l of n)a+=l[Nd].requiredVars,l.create&&(l.targetIdx=0,(o??=[]).push(l)),l.update&&(l.targetIdx=0,(s??=[]).push(l));if(r)for(let l=0;l<r.length;l++){let d=r[l];if(typeof d!="function")for(let h of d.bindings){a+=h[Nd].requiredVars;let f=l+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let c=[t];if(r)for(let l of r){let d=typeof l=="function"?l:l.type,h=Ml(d);c.push(h)}return Ud(0,null,WD(o,s),1,a,c,null,null,null,[i],null)}function WD(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function Sg(e){let t=e[Nd].kind;return t==="input"||t==="twoWay"}var Pa=class extends Fm{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ha(n[F],Oe),this.location=Ua(this._tNode,n),this.instance=it(this._tNode.index,n)[Ae],this.hostView=this.changeDetectorRef=new un(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=Zd(r,i[F],i,t,n);this.previousInputValues.set(t,n);let s=it(r.index,i);Xd(s,1)}get injector(){return new qn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function KD(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Xn=(()=>{class e{static __NG_ELEMENT_ID__=YD}return e})();function YD(){let e=Be();return ZD(e,X())}var JD=Xn,qm=class extends JD{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Ua(this._hostTNode,this._hostLView)}get injector(){return new qn(this._hostTNode,this._hostLView)}get parentInjector(){let t=Pd(this._hostTNode,this._hostLView);if(Bg(t)){let n=Ma(t,this._hostLView),r=Aa(t),i=n[F].data[r+8];return new qn(i,n)}else return new qn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=Tg(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ue}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=_g(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,wg(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!Ob(t),u;if(c)u=n;else{let y=n||{};u=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef,s=y.directives,a=y.bindings}let l=c?t:new zr(en(t)),d=r||this.parentInjector;if(!o&&l.ngModule==null){let g=(c?d:this.parentInjector).get(de,null);g&&(o=g)}let h=en(l.componentType??{}),f=_g(this._lContainer,h?.id??null),p=f?.firstChild??null,m=l.create(d,i,p,o,s,a);return this.insertImpl(m.hostView,u,wg(this._hostTNode,f)),m}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(Op(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[De],u=new qm(c,c[tt],c[De]);u.detach(u.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return wD(s,i,o,r),t.attachToViewContainerRef(),xl(hd(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=Tg(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Ad(this._lContainer,n);r&&(Bi(hd(this._lContainer),n),vm(r[F],r))}detach(t){let n=this._adjustIndex(t,-1),r=Ad(this._lContainer,n);return r&&Bi(hd(this._lContainer),n)!=null?new un(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function Tg(e){return e[Wi]}function hd(e){return e[Wi]||(e[Wi]=[])}function ZD(e,t){let n,r=t[e.index];return mt(r)?n=r:(n=km(r,t,null,e),t[e.index]=n,$d(t,n)),XD(n,t,e,r),new qm(n,e,t)}function QD(e,t){let n=e[ie],r=n.createComment(""),i=yt(t,e),o=n.parentNode(i);return xa(n,o,r,n.nextSibling(i),!1),r}var XD=nC,eC=()=>!1;function tC(e,t,n){return eC(e,t,n)}function nC(e,t,n,r){if(e[on])return;let i;n.type&8?i=rt(r):i=QD(t,n),e[on]=i}var Yn=class{},Ka=class{};var Fa=class extends Yn{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ka(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=Al(t);this._bootstrapComponents=lm(o.bootstrap),this._r3Injector=nd(t,n,[{provide:Yn,useValue:this},{provide:co,useValue:this.componentFactoryResolver},...r],Ut(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},La=class extends Ka{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Fa(this.moduleType,t,[])}};var ro=class extends Yn{injector;componentFactoryResolver=new ka(this);instance=null;constructor(t){super();let n=new kn([...t.providers,{provide:Yn,useValue:this},{provide:co,useValue:this.componentFactoryResolver}],t.parent||Hi(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function fo(e,t,n=null){return new ro({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var rC=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Pl(!1,n.type),i=r.length>0?fo([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=T({token:e,providedIn:"environment",factory:()=>new e(N(de))})}return e})();function Ke(e){return oo(()=>{let t=Wm(e),n=z(_({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===Fd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get(rC).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||bt.Emulated,styles:e.styles||Ge,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Gd("NgStandalone"),Km(n);let r=e.dependencies;return n.directiveDefs=Ag(r,iC),n.pipeDefs=Ag(r,yp),n.id=aC(n),n})}function iC(e){return en(e)||Ml(e)}function Gt(e){return oo(()=>({type:e.type,bootstrap:e.bootstrap||Ge,declarations:e.declarations||Ge,imports:e.imports||Ge,exports:e.exports||Ge,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function oC(e,t){if(e==null)return tn;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=za.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function sC(e){if(e==null)return tn;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function he(e){return oo(()=>{let t=Wm(e);return Km(t),t})}function Wm(e){let t={};return{type:e.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||tn,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Ge,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:oC(e.inputs,t),outputs:sC(e.outputs),debugInfo:null}}function Km(e){e.features?.forEach(t=>t(e))}function Ag(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function aC(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function cC(e){return Object.getPrototypeOf(e.prototype).constructor}function ot(e){let t=cC(e.type),n=!0,r=[e];for(;t;){let i;if(At(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new b(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=pd(e.inputs),s.declaredInputs=pd(e.declaredInputs),s.outputs=pd(e.outputs);let a=i.hostBindings;a&&hC(e,a);let c=i.viewQuery,u=i.contentQueries;if(c&&dC(e,c),u&&fC(e,u),uC(e,i),mp(e.outputs,i.outputs),At(i)&&i.data.animation){let l=e.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===ot&&(n=!1)}}t=Object.getPrototypeOf(t)}lC(r)}function uC(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function lC(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Br(i.hostAttrs,n=Br(n,i.hostAttrs))}}function pd(e){return e===tn?{}:e===Ge?[]:e}function dC(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function fC(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function hC(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function pC(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=Br(e.mergedAttrs,e.attrs);let l=e.tView=Ud(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),l.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),jr(e,!1);let c=mC(n,t,e,r);_a()&&Wd(n,t,c,e),$r(c,t);let u=km(c,t,c,e);t[r+Oe]=u,$d(t,u),tC(u,e,t)}function gC(e,t,n,r,i,o,s,a,c,u,l){let d=n+Oe,h;return t.firstCreatePass?(h=qa(t,d,4,s||null,a||null),ql()&&jm(t,e,h,zn(t.consts,u),Em),Vg(t,h)):h=t.data[d],pC(h,e,t,n,r,i,o,c),Yi(h)&&Yd(t,e,h),u!=null&&Jd(e,h,l),h}function dn(e,t,n,r,i,o,s,a){let c=X(),u=We(),l=zn(u.consts,o);return gC(c,u,e,t,n,r,i,l,void 0,s,a),dn}var mC=yC;function yC(e,t,n,r){return ba(!0),t[ie].createComment("")}var tf=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function Ym(e){return typeof e=="function"&&e[Re]!==void 0}function nf(e){return Ym(e)&&typeof e.set=="function"}var rf=new C("");function fn(e){return!!e&&typeof e.then=="function"}function of(e){return!!e&&typeof e.subscribe=="function"}var Jm=new C("");var sf=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=v(Jm,{optional:!0})??[];injector=v(ht);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ce(this.injector,i);if(fn(o))n.push(o);else if(of(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ya=new C("");function Zm(){$u(()=>{let e="";throw new b(600,e)})}function Qm(e){return e.isBoundToModule}var vC=10;var er=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=v(vt);afterRenderManager=v(gm);zonelessEnabled=v(Xi);rootEffectScheduler=v(cd);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new me;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=v(Ht);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(G(n=>!n))}constructor(){v(Qn,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=v(de);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=ht.NULL){return this._injector.get(Ve).run(()=>{Z(q.BootstrapComponentStart);let s=n instanceof Wa;if(!this._injector.get(sf).done){let p="";throw new b(405,p)}let c;s?c=n:c=this._injector.get(co).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=Qm(c)?void 0:this._injector.get(Yn),l=r||c.selector,d=c.create(i,[],l,u),h=d.location.nativeElement,f=d.injector.get(rf,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),to(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),Z(q.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){Z(q.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(zd.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw Z(q.ChangeDetectionEnd),new b(101,!1);let n=L(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,L(n),this.afterTick.next(),Z(q.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(Kn,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<vC;){Z(q.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{Z(q.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Ji(i))continue;let o=r&&!this.zonelessEnabled?0:1;Rm(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Ji(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;to(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ya,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>to(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new b(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function to(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function ho(e,t,n,r){let i=X(),o=Qi();if(lo(i,o,t)){let s=We(),a=wa();XE(a,i,e,t,n,r)}return ho}var cF=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Ye(e,t,n){let r=X(),i=Qi();if(lo(r,i,t)){let o=We(),s=wa();bm(s,r,e,t,r[ie],n)}return Ye}function Mg(e,t,n,r,i){Zd(t,e,n,i?"class":"style",r)}function I(e,t,n,r){let i=X(),o=i[F],s=e+Oe,a=o.firstCreatePass?Um(s,i,2,t,Em,ql(),n,r):o.data[s];if(Dm(a,i,e,t,Xm),Yi(a)){let c=i[F];Yd(c,i,a),om(c,a,i)}return r!=null&&Jd(i,a),I}function S(){let e=We(),t=Be(),n=Cm(t);return e.firstCreatePass&&Bm(e,n),Wl(n)&&Kl(),Gl(),n.classesWithoutHost!=null&&Vb(n)&&Mg(e,n,X(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Ub(n)&&Mg(e,n,X(),n.stylesWithoutHost,!1),S}function st(e,t,n,r){return I(e,t,n,r),S(),st}function Ja(e,t,n,r){let i=X(),o=i[F],s=e+Oe,a=o.firstCreatePass?LD(s,o,2,t,n,r):o.data[s];return Dm(a,i,e,t,Xm),r!=null&&Jd(i,a),Ja}function Za(){let e=Be(),t=Cm(e);return Wl(t)&&Kl(),Gl(),Za}var Xm=(e,t,n,r,i)=>(ba(!0),am(t[ie],r,eg()));function po(){return X()}var go="en-US";var wC=go;function ey(e){typeof e=="string"&&(wC=e.toLowerCase().replace(/_/g,"-"))}function Me(e,t,n){let r=X(),i=We(),o=Be();return ty(i,r,r[ie],o,e,t,n),Me}function ty(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=fd(r,t,o),jD(r,e,t,s,n,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],l=r.hostDirectiveOutputs?.[i];if(l&&l.length)for(let d=0;d<l.length;d+=2){let h=l[d],f=l[d+1];c??=fd(r,t,o),Ig(r,t,h,f,i,c)}if(u&&u.length)for(let d of u)c??=fd(r,t,o),Ig(r,t,d,i,i,c)}}function mo(e=1){return Xp(e)}function yo(e){let t=Hp();return xp(t,Oe+e)}function Da(e,t){return e<<17|t<<2}function Jn(e){return e>>17&32767}function _C(e){return(e&2)==2}function bC(e,t){return e&131071|t<<17}function xd(e){return e|2}function Gr(e){return(e&131068)>>2}function gd(e,t){return e&-131069|t<<2}function EC(e){return(e&1)===1}function Od(e){return e|1}function DC(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=Jn(s),c=Gr(s);e[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Or(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=Jn(e[a+1]);e[r+1]=Da(h,a),h!==0&&(e[h+1]=gd(e[h+1],r)),e[a+1]=bC(e[a+1],r)}else e[r+1]=Da(a,0),a!==0&&(e[a+1]=gd(e[a+1],r)),a=r;else e[r+1]=Da(c,0),a===0?a=r:e[c+1]=gd(e[c+1],r),c=r;u&&(e[r+1]=xd(e[r+1])),Rg(e,l,r,!0),Rg(e,l,r,!1),CC(t,l,e,r,o),s=Da(a,c),o?t.classBindings=s:t.styleBindings=s}function CC(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Or(o,t)>=0&&(n[r+1]=Od(n[r+1]))}function Rg(e,t,n,r){let i=e[n+1],o=t===null,s=r?Jn(i):Gr(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],u=e[s+1];IC(c,t)&&(a=!0,e[s+1]=r?Od(u):xd(u)),s=r?Jn(u):Gr(u)}a&&(e[n+1]=r?xd(i):Od(i))}function IC(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Or(e,t)>=0:!1}function vo(e,t){return SC(e,t,null,!0),vo}function SC(e,t,n,r){let i=X(),o=We(),s=Gp(2);if(o.firstUpdatePass&&AC(o,e,s,r),t!==ln&&lo(i,s,t)){let a=o.data[Gn()];OC(o,a,i,i[ie],e,i[s+1]=kC(t,n),r,s)}}function TC(e,t){return t>=e.expandoStartIndex}function AC(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[Gn()],s=TC(e,n);PC(o,r)&&t===null&&!s&&(t=!1),t=MC(i,o,t,r),DC(i,o,t,n,s,r)}}function MC(e,t,n,r){let i=Yp(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=md(null,e,t,n,r),n=io(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=md(i,e,t,n,r),o===null){let c=RC(e,t,r);c!==void 0&&Array.isArray(c)&&(c=md(null,e,t,c[1],r),c=io(c,t.attrs,r),NC(e,t,r,c))}else o=xC(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function RC(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Gr(r)!==0)return e[Jn(r)]}function NC(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[Jn(i)]=r}function xC(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=io(r,s,n)}return io(r,t.attrs,n)}function md(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=io(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function io(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),Dp(e,s,n?!0:t[++o]))}return e===void 0?null:e}function OC(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,u=c[a+1],l=EC(u)?Ng(c,t,n,i,Gr(u),s):void 0;if(!ja(l)){ja(o)||_C(u)&&(o=Ng(c,null,n,i,a,s));let d=Bl(Gn(),n);HE(r,s,d,i,o)}}function Ng(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===ln&&(h=d?Ge:void 0);let f=d?la(h,r):l===r?h:void 0;if(u&&!ja(f)&&(f=la(c,r)),ja(f)&&(a=f,s))return a;let p=e[i+1];i=s?Jn(p):Gr(p)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=la(c,r))}return a}function ja(e){return e!==void 0}function kC(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=Ut(sm(e)))),e}function PC(e,t){return(e.flags&(t?8:16))!==0}function P(e,t=""){let n=X(),r=We(),i=e+Oe,o=r.firstCreatePass?qa(r,i,1,t,null):r.data[i],s=FC(r,n,o,t,e);n[i]=s,_a()&&Wd(r,n,s,o),jr(o,!1)}var FC=(e,t,n,r,i)=>(ba(!0),cE(t[ie],r));function LC(e,t,n,r=""){return lo(e,Qi(),n)?t+aa(n)+r:ln}function wo(e){return Nt("",e),wo}function Nt(e,t,n){let r=X(),i=LC(r,e,t,n);return i!==ln&&jC(r,Gn(),i),Nt}function jC(e,t,n){let r=Bl(t,e);uE(e[ie],r,n)}function ke(e,t,n){nf(t)&&(t=t());let r=X(),i=Qi();if(lo(r,i,t)){let o=We(),s=wa();bm(s,r,e,t,r[ie],n)}return ke}function $e(e,t){let n=nf(e);return n&&e.set(t),n}function Pe(e,t){let n=X(),r=We(),i=Be();return ty(r,n,n[ie],i,e,t),Pe}function xg(e,t,n){let r=We();r.firstCreatePass&&ny(t,r.data,r.blueprint,At(e),n)}function ny(e,t,n,r,i){if(e=Ee(e),Array.isArray(e))for(let o=0;o<e.length;o++)ny(e[o],t,n,r,i);else{let o=We(),s=X(),a=Be(),c=On(e)?e:Ee(e.provide),u=Ll(e),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(On(e)||!e.multi){let f=new Wn(u,i,$,null),p=vd(c,t,i?l:l+h,d);p===-1?(_d(Ra(a,s),o,c),yd(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{let f=vd(c,t,l+h,d),p=vd(c,t,l,l+h),m=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!m){_d(Ra(a,s),o,c);let g=BC(i?UC:VC,n.length,i,r,u,e);!i&&y&&(n[p].providerFactory=g),yd(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)}else{let g=ry(n[i?p:f],u,!i&&r);yd(o,e,f>-1?f:p,g)}!i&&r&&y&&n[p].componentProviders++}}}function yd(e,t,n,r){let i=On(t),o=Tp(t);if(i||o){let c=(o?Ee(t.useClass):t).prototype.ngOnDestroy;if(c){let u=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function ry(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function vd(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function VC(e,t,n,r,i){return kd(this.multi,[])}function UC(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Na(r,r[F],this.providerFactory.index,i);s=c.slice(0,a),kd(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],kd(o,s);return s}function kd(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function BC(e,t,n,r,i,o){let s=new Wn(e,n,$,null);return s.multi=[],s.index=t,s.componentProviders=0,ry(s,i,r&&!n),s}function hn(e,t){return n=>{n.providersResolver=(r,i)=>xg(r,i?i(e):e,!1),t&&(n.viewProvidersResolver=(r,i)=>xg(r,i?i(t):t,!0))}}var Va=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},af=(()=>{class e{compileModuleSync(n){return new La(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Al(n),o=lm(i.declarations).reduce((s,a)=>{let c=en(a);return c&&s.push(new zr(c)),s},[]);return new Va(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var iy=(()=>{class e{applicationErrorHandler=v(vt);appRef=v(er);taskService=v(Ht);ngZone=v(Ve);zonelessEnabled=v(Xi);tracing=v(Qn,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new _e;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ji):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(v(ad,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?id:rd;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ji+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,id(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function oy(){return[{provide:Pn,useExisting:iy},{provide:Ve,useClass:Vi},{provide:Xi,useValue:!0}]}function $C(){return typeof $localize<"u"&&$localize.locale||go}var Qa=new C("",{factory:()=>v(Qa,{optional:!0,skipSelf:!0})||$C()});function Wr(e,t){return As(e,t?.equal)}var ly=Symbol("InputSignalNode#UNSET"),oI=z(_({},Ms),{transformFn:void 0,applyValueToInputSignal(e,t){Ai(e,t)}});function dy(e,t){let n=Object.create(oI);n.value=e,n.transformFn=t?.transform;function r(){if(Ii(n),n.value===ly){let i=null;throw new b(-950,i)}return n.value}return r[Re]=n,r}function sy(e,t){return dy(e,t)}function sI(e){return dy(ly,e)}var fy=(sy.required=sI,sy);var cf=new C(""),aI=new C("");function _o(e){return!e.moduleRef}function cI(e){let t=_o(e)?e.r3Injector:e.moduleRef.injector,n=t.get(Ve);return n.run(()=>{_o(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(vt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),_o(e)){let o=()=>t.destroy(),s=e.platformInjector.get(cf);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(cf);s.add(o),e.moduleRef.onDestroy(()=>{to(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return lI(r,n,()=>{let o=t.get(Ht),s=o.add(),a=t.get(sf);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Qa,go);if(ey(c||go),!t.get(aI,!0))return _o(e)?t.get(er):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(_o(e)){let l=t.get(er);return e.rootComponent!==void 0&&l.bootstrap(e.rootComponent),l}else return uI?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var uI;function lI(e,t,n){try{let r=n();return fn(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var Xa=null;function dI(e=[],t){return ht.create({name:t,providers:[{provide:$i,useValue:"platform"},{provide:cf,useValue:new Set([()=>Xa=null])},...e]})}function fI(e=[]){if(Xa)return Xa;let t=dI(e);return Xa=t,Zm(),hI(t),t}function hI(e){let t=e.get($a,null);Ce(e,()=>{t?.forEach(n=>n())})}var qt=(()=>{class e{static __NG_ELEMENT_ID__=pI}return e})();function pI(e){return gI(Be(),X(),(e&16)===16)}function gI(e,t,n){if(sn(e)&&!n){let r=it(e.index,t);return new un(r,r)}else if(e.type&175){let r=t[nt];return new un(r,t)}return null}var uf=class{constructor(){}supports(t){return ef(t)}create(t){return new lf(t)}},mI=(e,t)=>t,lf=class{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(t){this._trackByFn=t||mI}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){let s=!r||n&&n.currentIndex<ay(r,i,o)?n:r,a=ay(s,i,o),c=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);let u=a-i,l=c-i;if(u!=l){for(let h=0;h<u;h++){let f=h<o.length?o[h]:o[h]=0,p=f+h;l<=p&&p<u&&(o[h]=f+1)}let d=s.previousIndex;o[d]=l-u}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!ef(t))throw new b(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,a),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,a)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,$m(t,a=>{s=this._trackByFn(i,a),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,a,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,s,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new df(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){let n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){let i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new ec),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ec),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},df=class{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(t,n){this.item=t,this.trackById=n}},ff=class{_head=null;_tail=null;add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){let n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},ec=class{map=new Map;put(t){let n=t.trackById,r=this.map.get(n);r||(r=new ff,this.map.set(n,r)),r.add(t)}get(t,n){let r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){let n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function ay(e,t,n){let r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}function cy(){return new hf([new uf])}var hf=(()=>{class e{factories;static \u0275prov=T({token:e,providedIn:"root",factory:cy});constructor(n){this.factories=n}static create(n,r){if(r!=null){let i=r.factories.slice();n=n.concat(i)}return new e(n)}static extend(n){return{provide:e,useFactory:()=>{let r=v(e,{optional:!0,skipSelf:!0});return e.create(n,r||cy())}}}find(n){let r=this.factories.find(i=>i.supports(n));if(r!=null)return r;throw new b(901,!1)}}return e})();function hy(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;Z(q.BootstrapApplicationStart);try{let o=i?.injector??fI(r),s=[oy(),ig,...n||[]],a=new ro({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return cI({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{Z(q.BootstrapApplicationEnd)}}function tc(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var py=null;function at(){return py}function pf(e){py??=e}var Eo=class{},Kr=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>v(gy),providedIn:"platform"})}return e})();var gy=(()=>{class e extends Kr{_location;_history;_doc=v(fe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return at().getBaseHref(this._doc)}onPopState(n){let r=at().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=at().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function vy(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function my(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function pn(e){return e&&e[0]!=="?"?`?${e}`:e}var nc=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>v(vI),providedIn:"root"})}return e})(),yI=new C(""),vI=(()=>{class e extends nc{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??v(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return vy(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+pn(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+pn(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+pn(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(N(Kr),N(yI,8))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Yr=(()=>{class e{_subject=new me;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=bI(my(yy(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+pn(r))}normalize(n){return e.stripTrailingSlash(_I(this._basePath,yy(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pn(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+pn(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=pn;static joinWithSlash=vy;static stripTrailingSlash=my;static \u0275fac=function(r){return new(r||e)(N(nc))};static \u0275prov=T({token:e,factory:()=>wI(),providedIn:"root"})}return e})();function wI(){return new Yr(N(nc))}function _I(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function yy(e){return e.replace(/\/index.html$/,"")}function bI(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var rc=class{$implicit;ngForOf;index;count;constructor(t,n,r,i){this.$implicit=t,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},oc=(()=>{class e{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,i){this._viewContainer=n,this._template=r,this._differs=i}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let r=this._viewContainer;n.forEachOperation((i,o,s)=>{if(i.previousIndex==null)r.createEmbeddedView(this._template,new rc(i.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(o===null?void 0:o);else if(o!==null){let a=r.get(o);r.move(a,s),wy(a,i)}});for(let i=0,o=r.length;i<o;i++){let a=r.get(i).context;a.index=i,a.count=o,a.ngForOf=this._ngForOf}n.forEachIdentityChange(i=>{let o=r.get(i.currentIndex);wy(o,i)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)($(Xn),$(ao),$(hf))};static \u0275dir=he({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return e})();function wy(e,t){e.context.$implicit=t.item}var tr=(()=>{class e{_viewContainer;_context=new ic;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){_y(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){_y(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)($(Xn),$(ao))};static \u0275dir=he({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),ic=class{$implicit=null;ngIf=null};function _y(e,t){if(e&&!e.createEmbeddedView)throw new b(2020,!1)}var gn=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Gt({type:e});static \u0275inj=St({})}return e})();function Do(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var nr=class{};var by="browser";var Co=class{_doc;constructor(t){this._doc=t}manager},sc=(()=>{class e extends Co{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(N(fe))};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})(),uc=new C(""),wf=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof sc));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof sc);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new b(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(N(uc),N(Ve))};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})(),mf="ng-app-id";function Ey(e){for(let t of e)t.remove()}function Dy(e,t){let n=t.createElement("style");return n.textContent=e,n}function EI(e,t,n,r){let i=e.head?.querySelectorAll(`style[${mf}="${t}"],link[${mf}="${t}"]`);if(i)for(let o of i)o.removeAttribute(mf),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function vf(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var _f=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,EI(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,Dy);r?.forEach(i=>this.addUsage(i,this.external,vf))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(Ey(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])Ey(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,Dy(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,vf(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(N(fe),N(Ba),N(Ha,8),N(so))};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})(),yf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},bf=/%COMP%/g;var Iy="%COMP%",DI=`_nghost-${Iy}`,CI=`_ngcontent-${Iy}`,II=!0,SI=new C("",{factory:()=>II});function TI(e){return CI.replace(bf,e)}function AI(e){return DI.replace(bf,e)}function Sy(e,t){return t.map(n=>n.replace(bf,e))}var Ef=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.defaultRenderer=new Io(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof cc?i.applyToHost(n):i instanceof So&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case bt.Emulated:o=new cc(c,u,r,this.appId,l,s,a,d);break;case bt.ShadowDom:return new ac(c,n,r,s,a,this.nonce,d,u);case bt.ExperimentalIsolatedShadowDom:return new ac(c,n,r,s,a,this.nonce,d);default:o=new So(c,u,r,l,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(N(wf),N(_f),N(Ba),N(SI),N(fe),N(Ve),N(Ha),N(Qn,8))};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})(),Io=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(yf[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(Cy(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(Cy(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new b(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=yf[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=yf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(Rt.DashCase|Rt.Important)?t.style.setProperty(n,r,i&Rt.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&Rt.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=at().getGlobalEventTarget(this.doc,t),!t))throw new b(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function Cy(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var ac=class extends Io{hostEl;sharedStylesHost;shadowRoot;constructor(t,n,r,i,o,s,a,c){super(t,i,o,a),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=Sy(r.id,u);for(let d of u){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=d,this.shadowRoot.appendChild(h)}let l=r.getExternalStyles?.();if(l)for(let d of l){let h=vf(d,i);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},So=class extends Io{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?Sy(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Hr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},cc=class extends So{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(t,n,r,o,s,a,c,u),this.contentAttr=TI(u),this.hostAttr=AI(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var lc=class e extends Eo{supportsDOMEvents=!0;static makeCurrent(){pf(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=MI();return n==null?null:RI(n)}resetBaseElement(){To=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Do(document.cookie,t)}},To=null;function MI(){return To=To||document.head.querySelector("base"),To?To.getAttribute("href"):null}function RI(e){return new URL(e,document.baseURI).pathname}var NI=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})(),Ty=["alt","control","meta","shift"],xI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},OI={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},Ay=(()=>{class e extends Co{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>at().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),Ty.forEach(u=>{let l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=xI[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),Ty.forEach(s=>{if(s!==i){let a=OI[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(N(fe))};static \u0275prov=T({token:e,factory:e.\u0275fac})}return e})();function Df(e,t,n){let r=_({rootComponent:e,platformRef:n?.platformRef},kI(t));return hy(r)}function kI(e){return{appProviders:[...VI,...e?.providers??[]],platformProviders:jI}}function PI(){lc.makeCurrent()}function FI(){return new Bt}function LI(){return Ld(document),document}var jI=[{provide:so,useValue:by},{provide:$a,useValue:PI,multi:!0},{provide:fe,useFactory:LI}];var VI=[{provide:$i,useValue:"root"},{provide:Bt,useFactory:FI},{provide:uc,useClass:sc,multi:!0},{provide:uc,useClass:Ay,multi:!0},Ef,_f,wf,{provide:Kn,useExisting:Ef},{provide:nr,useClass:NI},[]];var rr=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var fc=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}},hc=class{encodeKey(t){return My(t)}encodeValue(t){return My(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function UI(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var BI=/%(\d[a-f0-9])/gi,$I={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function My(e){return encodeURIComponent(e).replace(BI,(t,n)=>$I[n]??t)}function dc(e){return`${e}`}var mn=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new hc,t.fromString){if(t.fromObject)throw new b(2805,!1);this.map=UI(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(dc):[dc(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(dc(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(dc(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};function HI(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Ry(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function Ny(e){return typeof Blob<"u"&&e instanceof Blob}function xy(e){return typeof FormData<"u"&&e instanceof FormData}function zI(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var Oy="Content-Type",ky="Accept",Py="text/plain",Fy="application/json",GI=`${Fy}, ${Py}, */*`,Ao=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,n,r,i){this.url=n,this.method=t.toUpperCase();let o;if(HI(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new b(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new rr,this.context??=new fc,!this.params)this.params=new mn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Ry(this.body)||Ny(this.body)||xy(this.body)||zI(this.body)?this.body:this.body instanceof mn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||xy(this.body)?null:Ny(this.body)?this.body.type||null:Ry(this.body)?null:typeof this.body=="string"?Py:this.body instanceof mn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?Fy:null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,c=t.mode||this.mode,u=t.redirect||this.redirect,l=t.credentials||this.credentials,d=t.referrer||this.referrer,h=t.integrity||this.integrity,f=t.referrerPolicy||this.referrerPolicy,p=t.transferCache??this.transferCache,m=t.timeout??this.timeout,y=t.body!==void 0?t.body:this.body,g=t.withCredentials??this.withCredentials,R=t.reportProgress??this.reportProgress,E=t.headers||this.headers,w=t.params||this.params,j=t.context??this.context;return t.setHeaders!==void 0&&(E=Object.keys(t.setHeaders).reduce((Se,H)=>Se.set(H,t.setHeaders[H]),E)),t.setParams&&(w=Object.keys(t.setParams).reduce((Se,H)=>Se.set(H,t.setParams[H]),w)),new e(n,r,y,{params:w,headers:E,context:j,reportProgress:R,responseType:i,withCredentials:g,transferCache:p,keepalive:o,cache:a,priority:s,timeout:m,mode:c,redirect:u,credentials:l,referrer:d,integrity:h,referrerPolicy:f})}},Jr=(function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e})(Jr||{}),Zr=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(t,n=200,r="OK"){this.headers=t.headers||new rr,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.responseType=t.responseType,this.ok=this.status>=200&&this.status<300}},pc=class e extends Zr{constructor(t={}){super(t)}type=Jr.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},gc=class e extends Zr{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Jr.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected,responseType:t.responseType??this.responseType})}},Mo=class extends Zr{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},qI=200,WI=204;var KI=new C("");var YI=/^\)\]\}',?\n/;var If=(()=>{class e{xhrFactory;tracingService=v(Qn,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new b(-2800,!1);let r=this.xhrFactory;return V(null).pipe(Xe(()=>new B(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((y,g)=>s.setRequestHeader(y,g.join(","))),n.headers.has(ky)||s.setRequestHeader(ky,GI),!n.headers.has(Oy)){let y=n.detectContentTypeHeader();y!==null&&s.setRequestHeader(Oy,y)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let y=n.responseType.toLowerCase();s.responseType=y!=="json"?y:"text"}let a=n.serializeBody(),c=null,u=()=>{if(c!==null)return c;let y=s.statusText||"OK",g=new rr(s.getAllResponseHeaders()),R=s.responseURL||n.url;return c=new pc({headers:g,status:s.status,statusText:y,url:R}),c},l=this.maybePropagateTrace(()=>{let{headers:y,status:g,statusText:R,url:E}=u(),w=null;g!==WI&&(w=typeof s.response>"u"?s.responseText:s.response),g===0&&(g=w?qI:0);let j=g>=200&&g<300;if(n.responseType==="json"&&typeof w=="string"){let Se=w;w=w.replace(YI,"");try{w=w!==""?JSON.parse(w):null}catch(H){w=Se,j&&(j=!1,w={error:H,text:w})}}j?(o.next(new gc({body:w,headers:y,status:g,statusText:R,url:E||void 0})),o.complete()):o.error(new Mo({error:w,headers:y,status:g,statusText:R,url:E||void 0}))}),d=this.maybePropagateTrace(y=>{let{url:g}=u(),R=new Mo({error:y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:g||void 0});o.error(R)}),h=d;n.timeout&&(h=this.maybePropagateTrace(y=>{let{url:g}=u(),R=new Mo({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:g||void 0});o.error(R)}));let f=!1,p=this.maybePropagateTrace(y=>{f||(o.next(u()),f=!0);let g={type:Jr.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(g.total=y.total),n.responseType==="text"&&s.responseText&&(g.partialText=s.responseText),o.next(g)}),m=this.maybePropagateTrace(y=>{let g={type:Jr.UploadProgress,loaded:y.loaded};y.lengthComputable&&(g.total=y.total),o.next(g)});return s.addEventListener("load",l),s.addEventListener("error",d),s.addEventListener("timeout",h),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Jr.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",l),s.removeEventListener("timeout",h),n.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||e)(N(nr))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function JI(e,t){return t(e)}function ZI(e,t,n){return(r,i)=>Ce(n,()=>t(r,o=>e(o,i)))}var Ly=new C("",{factory:()=>[]}),QI=new C(""),jy=new C("",{factory:()=>!0});var Sf=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=N(If),i},providedIn:"root"})}return e})();var mc=(()=>{class e{backend;injector;chain=null;pendingTasks=v(Ea);contributeToStability=v(jy);constructor(n,r){this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(Ly),...this.injector.get(QI,[])]));this.chain=r.reduceRight((i,o)=>ZI(i,o,this.injector),JI)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(Oi(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(N(Sf),N(de))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Tf=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=N(mc),i},providedIn:"root"})}return e})();function Cf(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var XI=(()=>{class e{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Ao)o=n;else{let c;i.headers instanceof rr?c=i.headers:c=new rr(i.headers);let u;i.params&&(i.params instanceof mn?u=i.params:u=new mn({fromObject:i.params})),o=new Ao(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let s=V(o).pipe(Rr(c=>this.handler.handle(c)));if(n instanceof Ao||i.observe==="events")return s;let a=s.pipe(Qe(c=>c instanceof gc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(G(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new b(2806,!1);return c.body}));case"blob":return a.pipe(G(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new b(2807,!1);return c.body}));case"text":return a.pipe(G(c=>{if(c.body!==null&&typeof c.body!="string")throw new b(2808,!1);return c.body}));case"json":default:return a.pipe(G(c=>c.body))}case"response":return a;default:throw new b(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new mn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Cf(i,r))}post(n,r,i={}){return this.request("POST",n,Cf(i,r))}put(n,r,i={}){return this.request("PUT",n,Cf(i,r))}static \u0275fac=function(r){return new(r||e)(N(Tf))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var e0=new C("",{factory:()=>!0}),t0="XSRF-TOKEN",n0=new C("",{factory:()=>t0}),r0="X-XSRF-TOKEN",i0=new C("",{providedIn:"root",factory:()=>r0}),o0=(()=>{class e{cookieName=v(n0);doc=v(fe);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Do(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Vy=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=N(o0),i},providedIn:"root"})}return e})();function s0(e,t){if(!v(e0)||e.method==="GET"||e.method==="HEAD")return t(e);try{let i=v(Kr).href,{origin:o}=new URL(i),{origin:s}=new URL(e.url,o);if(o!==s)return t(e)}catch{return t(e)}let n=v(Vy).getToken(),r=v(i0);return n!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,n)})),t(e)}function Af(...e){let t=[XI,mc,{provide:Tf,useExisting:mc},{provide:Sf,useFactory:()=>v(KI,{optional:!0})??v(If)},{provide:Ly,useValue:s0,multi:!0}];for(let n of e)t.push(...n.\u0275providers);return jn(t)}var Uy=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(N(fe))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var x="primary",$o=Symbol("RouteTitle"),Of=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function ar(e){return new Of(e)}function Yy(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Ec(e){return new Promise((t,n)=>{e.pipe(jt()).subscribe({next:r=>t(r),error:r=>n(r)})})}function c0(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!xt(e[n],t[n]))return!1;return!0}function xt(e,t){let n=e?kf(e):void 0,r=t?kf(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!Jy(e[i],t[i]))return!1;return!0}function kf(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function Jy(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function Zy(e){return e.length>0?e[e.length-1]:null}function ur(e){return Ys(e)?e:fn(e)?ue(Promise.resolve(e)):V(e)}function Qy(e){return Ys(e)?Ec(e):Promise.resolve(e)}var u0={exact:ev,subset:tv},Xy={exact:l0,subset:d0,ignored:()=>!0};function By(e,t,n){return u0[n.paths](e.root,t.root,n.matrixParams)&&Xy[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function l0(e,t){return xt(e,t)}function ev(e,t,n){if(!or(e.segments,t.segments)||!wc(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!ev(e.children[r],t.children[r],n))return!1;return!0}function d0(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Jy(e[n],t[n]))}function tv(e,t,n){return nv(e,t,t.segments,n)}function nv(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!or(i,n)||t.hasChildren()||!wc(i,n,r))}else if(e.segments.length===n.length){if(!or(e.segments,n)||!wc(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!tv(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!or(e.segments,i)||!wc(e.segments,i,r)||!e.children[x]?!1:nv(e.children[x],t,o,r)}}function wc(e,t,n){return t.every((r,i)=>Xy[n](e[i].parameters,r.parameters))}var Dt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new W([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=ar(this.queryParams),this._queryParamMap}toString(){return p0.serialize(this)}},W=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _c(this)}},yn=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=ar(this.parameters),this._parameterMap}toString(){return iv(this)}};function f0(e,t){return or(e,t)&&e.every((n,r)=>xt(n.parameters,t[r].parameters))}function or(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function h0(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===x&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==x&&(n=n.concat(t(i,r)))}),n}var Ho=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>new vn,providedIn:"root"})}return e})(),vn=class{parse(t){let n=new Ff(t);return new Dt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Ro(t.root,!0)}`,r=y0(t.queryParams),i=typeof t.fragment=="string"?`#${g0(t.fragment)}`:"";return`${n}${r}${i}`}},p0=new vn;function _c(e){return e.segments.map(t=>iv(t)).join("/")}function Ro(e,t){if(!e.hasChildren())return _c(e);if(t){let n=e.children[x]?Ro(e.children[x],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==x&&r.push(`${i}:${Ro(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=h0(e,(r,i)=>i===x?[Ro(e.children[x],!1)]:[`${i}:${Ro(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[x]!=null?`${_c(e)}/${n[0]}`:`${_c(e)}/(${n.join("//")})`}}function rv(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function yc(e){return rv(e).replace(/%3B/gi,";")}function g0(e){return encodeURI(e)}function Pf(e){return rv(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function bc(e){return decodeURIComponent(e)}function $y(e){return bc(e.replace(/\+/g,"%20"))}function iv(e){return`${Pf(e.path)}${m0(e.parameters)}`}function m0(e){return Object.entries(e).map(([t,n])=>`;${Pf(t)}=${Pf(n)}`).join("")}function y0(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${yc(n)}=${yc(i)}`).join("&"):`${yc(n)}=${yc(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var v0=/^[^\/()?;#]+/;function Mf(e){let t=e.match(v0);return t?t[0]:""}var w0=/^[^\/()?;=#]+/;function _0(e){let t=e.match(w0);return t?t[0]:""}var b0=/^[^=?&#]+/;function E0(e){let t=e.match(b0);return t?t[0]:""}var D0=/^[^&#]+/;function C0(e){let t=e.match(D0);return t?t[0]:""}var Ff=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new W([],{}):new W([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[x]=new W(t,n)),r}parseSegment(){let t=Mf(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new b(4009,!1);return this.capture(t),new yn(bc(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=_0(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Mf(this.remaining);i&&(r=i,this.capture(r))}t[bc(n)]=bc(r)}parseQueryParam(t){let n=E0(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=C0(this.remaining);s&&(r=s,this.capture(r))}let i=$y(n),o=$y(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Mf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new b(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=x);let s=this.parseChildren();n[o??x]=Object.keys(s).length===1&&s[x]?s[x]:new W([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new b(4011,!1)}};function ov(e){return e.segments.length>0?new W([],{[x]:e}):e}function sv(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=sv(i);if(r===x&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new W(e.segments,t);return I0(n)}function I0(e){if(e.numberOfChildren===1&&e.children[x]){let t=e.children[x];return new W(e.segments.concat(t.segments),t.children)}return e}function ti(e){return e instanceof Dt}function av(e,t,n=null,r=null,i=new vn){let o=cv(e);return uv(o,t,n,r,i)}function cv(e){let t;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new W(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=ov(r);return t??i}function uv(e,t,n,r,i){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return Rf(o,o,o,n,r,i);let s=S0(t);if(s.toRoot())return Rf(o,o,new W([],{}),n,r,i);let a=T0(s,o,e),c=a.processChildren?xo(a.segmentGroup,a.index,s.commands):dv(a.segmentGroup,a.index,s.commands);return Rf(o,a.segmentGroup,c,n,r,i)}function Dc(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Po(e){return typeof e=="object"&&e!=null&&e.outlets}function Hy(e,t,n){e||="\u0275";let r=new Dt;return r.queryParams={[e]:t},n.parse(n.serialize(r)).queryParams[e]}function Rf(e,t,n,r,i,o){let s={};for(let[u,l]of Object.entries(r??{}))s[u]=Array.isArray(l)?l.map(d=>Hy(u,d,o)):Hy(u,l,o);let a;e===t?a=n:a=lv(e,t,n);let c=ov(sv(a));return new Dt(c,s,i)}function lv(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=lv(o,t,n)}),new W(e.segments,r)}var Cc=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&Dc(r[0]))throw new b(4003,!1);let i=r.find(Po);if(i&&i!==Zy(r))throw new b(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function S0(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Cc(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new Cc(n,t,r)}var Xr=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function T0(e,t,n){if(e.isAbsolute)return new Xr(t,!0,0);if(!n)return new Xr(t,!1,NaN);if(n.parent===null)return new Xr(n,!0,0);let r=Dc(e.commands[0])?0:1,i=n.segments.length-1+r;return A0(n,i,e.numberOfDoubleDots)}function A0(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new b(4005,!1);i=r.segments.length}return new Xr(r,!1,i-o)}function M0(e){return Po(e[0])?e[0].outlets:{[x]:e}}function dv(e,t,n){if(e??=new W([],{}),e.segments.length===0&&e.hasChildren())return xo(e,t,n);let r=R0(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new W(e.segments.slice(0,r.pathIndex),{});return o.children[x]=new W(e.segments.slice(r.pathIndex),e.children),xo(o,0,i)}else return r.match&&i.length===0?new W(e.segments,{}):r.match&&!e.hasChildren()?Lf(e,t,n):r.match?xo(e,0,i):Lf(e,t,n)}function xo(e,t,n){if(n.length===0)return new W(e.segments,{});{let r=M0(n),i={};if(Object.keys(r).some(o=>o!==x)&&e.children[x]&&e.numberOfChildren===1&&e.children[x].segments.length===0){let o=xo(e.children[x],t,n);return new W(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=dv(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new W(e.segments,i)}}function R0(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(Po(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!Gy(c,u,s))return o;r+=2}else{if(!Gy(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Lf(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(Po(o)){let c=N0(o.outlets);return new W(r,c)}if(i===0&&Dc(n[0])){let c=e.segments[t];r.push(new yn(c.path,zy(n[0]))),i++;continue}let s=Po(o)?o.outlets[x]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Dc(a)?(r.push(new yn(s,zy(a))),i+=2):(r.push(new yn(s,{})),i++)}return new W(r,{})}function N0(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Lf(new W([],{}),0,r))}),t}function zy(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function Gy(e,t,n){return e==n.path&&xt(t,n.parameters)}var Oo="imperative",ve=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(ve||{}),Ze=class{id;url;constructor(t,n){this.id=t,this.url=n}},cr=class extends Ze{type=ve.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Wt=class extends Ze{urlAfterRedirects;type=ve.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Fe=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Fe||{}),Fo=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(Fo||{}),Ot=class extends Ze{reason;code;type=ve.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Kt=class extends Ze{reason;code;type=ve.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},ni=class extends Ze{error;target;type=ve.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Lo=class extends Ze{urlAfterRedirects;state;type=ve.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ic=class extends Ze{urlAfterRedirects;state;type=ve.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Sc=class extends Ze{urlAfterRedirects;state;shouldActivate;type=ve.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Tc=class extends Ze{urlAfterRedirects;state;type=ve.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ac=class extends Ze{urlAfterRedirects;state;type=ve.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Mc=class{route;type=ve.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Rc=class{route;type=ve.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Nc=class{snapshot;type=ve.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},xc=class{snapshot;type=ve.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Oc=class{snapshot;type=ve.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},kc=class{snapshot;type=ve.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var jo=class{},ri=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function x0(e){return!(e instanceof jo)&&!(e instanceof ri)}function O0(e,t){return e.providers&&!e._injector&&(e._injector=fo(e.providers,t,`Route: ${e.path}`)),e._injector??t}function Et(e){return e.outlet||x}function k0(e,t){let n=e.filter(r=>Et(r)===t);return n.push(...e.filter(r=>Et(r)!==t)),n}function si(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Pc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return si(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new ai(this.rootInjector)}},ai=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Pc(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(N(de))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Fc=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=jf(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=jf(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Vf(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Vf(t,this._root).map(n=>n.value)}};function jf(e,t){if(e===t.value)return t;for(let n of t.children){let r=jf(e,n);if(r)return r}return null}function Vf(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Vf(e,n);if(r.length)return r.unshift(t),r}return[]}var Je=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Qr(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Vo=class extends Fc{snapshot;constructor(t,n){super(t),this.snapshot=n,Gf(this,t)}toString(){return this.snapshot.toString()}};function fv(e){let t=P0(e),n=new be([new yn("",{})]),r=new be({}),i=new be({}),o=new be({}),s=new be(""),a=new wn(n,r,o,s,i,x,e,t.root);return a.snapshot=t.root,new Vo(new Je(a,[]),t)}function P0(e){let t={},n={},r={},o=new sr([],t,r,"",n,x,e,null,{});return new Uo("",new Je(o,[]))}var wn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(G(u=>u[$o]))??V(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(t=>ar(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(t=>ar(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Lc(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:_(_({},t.params),e.params),data:_(_({},t.data),e.data),resolve:_(_(_(_({},e.data),t.data),i?.data),e._resolvedData)}:r={params:_({},e.params),data:_({},e.data),resolve:_(_({},e.data),e._resolvedData??{})},i&&pv(i)&&(r.resolve[$o]=i.title),r}var sr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[$o]}constructor(t,n,r,i,o,s,a,c,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ar(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ar(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Uo=class extends Fc{url;constructor(t,n){super(n),this.url=t,Gf(this,n)}toString(){return hv(this._root)}};function Gf(e,t){t.value._routerState=e,t.children.forEach(n=>Gf(e,n))}function hv(e){let t=e.children.length>0?` { ${e.children.map(hv).join(", ")} } `:"";return`${e.value}${t}`}function Nf(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,xt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),xt(t.params,n.params)||e.paramsSubject.next(n.params),c0(t.url,n.url)||e.urlSubject.next(n.url),xt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Uf(e,t){let n=xt(e.params,t.params)&&f0(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Uf(e.parent,t.parent))}function pv(e){return typeof e.title=="string"||e.title===null}var gv=new C(""),zo=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=x;activateEvents=new le;deactivateEvents=new le;attachEvents=new le;detachEvents=new le;routerOutletData=fy();parentContexts=v(ai);location=v(Xn);changeDetector=v(qt);inputBinder=v(Bc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new b(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new b(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new b(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new b(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Bf(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=he({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Zn]})}return e})(),Bf=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===wn?this.route:t===ai?this.childContexts:t===gv?this.outletData:this.parent.get(t,n)}},Bc=new C("");var qf=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ke({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&st(0,"router-outlet")},dependencies:[zo],encapsulation:2})}return e})();function Wf(e){let t=e.children&&e.children.map(Wf),n=t?z(_({},e),{children:t}):_({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==x&&(n.component=qf),n}function F0(e,t,n){let r=Bo(e,t._root,n?n._root:void 0);return new Vo(r,t)}function Bo(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=L0(e,t,n);return new Je(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Bo(e,a)),s}}let r=j0(t.value),i=t.children.map(o=>Bo(e,o));return new Je(r,i)}}function L0(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Bo(e,r,i);return Bo(e,r)})}function j0(e){return new wn(new be(e.url),new be(e.params),new be(e.queryParams),new be(e.fragment),new be(e.data),e.outlet,e.component,e)}var ii=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},mv="ngNavigationCancelingError";function jc(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=ti(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=yv(!1,Fe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function yv(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[mv]=!0,n.cancellationCode=t,n}function V0(e){return vv(e)&&ti(e.url)}function vv(e){return!!e&&e[mv]}var U0=(e,t,n,r)=>G(i=>(new $f(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),$f=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),Nf(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Qr(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Qr(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Qr(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Qr(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new kc(o.value.snapshot))}),t.children.length&&this.forwardEvent(new xc(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(Nf(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Nf(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Vc=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ei=class{component;route;constructor(t,n){this.component=t,this.route=n}};function B0(e,t,n){let r=e._root,i=t?t._root:null;return No(r,i,n,[r.value])}function $0(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function ci(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!El(e)?e:t.get(e):r}function No(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Qr(t);return e.children.forEach(s=>{H0(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>ko(a,n.getContext(s),i)),i}function H0(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=z0(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Vc(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?No(e,t,a?a.children:null,r,i):No(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ei(a.outlet.component,s))}else s&&ko(t,a,i),i.canActivateChecks.push(new Vc(r)),o.component?No(e,null,a?a.children:null,r,i):No(e,null,n,r,i);return i}function z0(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!or(e.url,t.url);case"pathParamsOrQueryParamsChange":return!or(e.url,t.url)||!xt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uf(e,t)||!xt(e.queryParams,t.queryParams);case"paramsChange":default:return!Uf(e,t)}}function ko(e,t,n){let r=Qr(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?ko(s,t.children.getContext(o),n):ko(s,null,n):ko(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new ei(t.outlet.component,i)):n.canDeactivateChecks.push(new ei(null,i)):n.canDeactivateChecks.push(new ei(null,i))}function Go(e){return typeof e=="function"}function G0(e){return typeof e=="boolean"}function q0(e){return e&&Go(e.canLoad)}function W0(e){return e&&Go(e.canActivate)}function K0(e){return e&&Go(e.canActivateChild)}function Y0(e){return e&&Go(e.canDeactivate)}function J0(e){return e&&Go(e.canMatch)}function wv(e){return e instanceof Mn||e?.name==="EmptyError"}var vc=Symbol("INITIAL_VALUE");function oi(){return Xe(e=>el(e.map(t=>t.pipe(Lt(1),rl(vc)))).pipe(G(t=>{for(let n of t)if(n!==!0){if(n===vc)return vc;if(n===!1||Z0(n))return n}return!0}),Qe(t=>t!==vc),Lt(1)))}function Z0(e){return ti(e)||e instanceof ii}function _v(e){return e.aborted?V(void 0).pipe(Lt(1)):new B(t=>{let n=()=>{t.next(),t.complete()};return e.addEventListener("abort",n),()=>e.removeEventListener("abort",n)})}function bv(e){return ki(_v(e))}function Q0(e,t){return Ne(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?V(z(_({},n),{guardsResult:!0})):X0(s,r,i,e).pipe(Ne(a=>a&&G0(a)?eS(r,o,e,t):V(a)),G(a=>z(_({},n),{guardsResult:a})))})}function X0(e,t,n,r){return ue(e).pipe(Ne(i=>oS(i.component,i.route,n,t,r)),jt(i=>i!==!0,!0))}function eS(e,t,n,r){return ue(t).pipe(Rr(i=>Mr(nS(i.route.parent,r),tS(i.route,r),iS(e,i.path,n),rS(e,i.route,n))),jt(i=>i!==!0,!0))}function tS(e,t){return e!==null&&t&&t(new Oc(e)),V(!0)}function nS(e,t){return e!==null&&t&&t(new Nc(e)),V(!0)}function rS(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return V(!0);let i=r.map(o=>Ni(()=>{let s=si(t)??n,a=ci(o,s),c=W0(a)?a.canActivate(t,e):Ce(s,()=>a(t,e));return ur(c).pipe(jt())}));return V(i).pipe(oi())}function iS(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>$0(s)).filter(s=>s!==null).map(s=>Ni(()=>{let a=s.guards.map(c=>{let u=si(s.node)??n,l=ci(c,u),d=K0(l)?l.canActivateChild(r,e):Ce(u,()=>l(r,e));return ur(d).pipe(jt())});return V(a).pipe(oi())}));return V(o).pipe(oi())}function oS(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return V(!0);let s=o.map(a=>{let c=si(t)??i,u=ci(a,c),l=Y0(u)?u.canDeactivate(e,t,n,r):Ce(c,()=>u(e,t,n,r));return ur(l).pipe(jt())});return V(s).pipe(oi())}function sS(e,t,n,r,i){let o=t.canLoad;if(o===void 0||o.length===0)return V(!0);let s=o.map(a=>{let c=ci(a,e),u=q0(c)?c.canLoad(t,n):Ce(e,()=>c(t,n)),l=ur(u);return i?l.pipe(bv(i)):l});return V(s).pipe(oi(),Ev(r))}function Ev(e){return Ju(xe(t=>{if(typeof t!="boolean")throw jc(e,t)}),G(t=>t===!0))}function aS(e,t,n,r,i){let o=t.canMatch;if(!o||o.length===0)return V(!0);let s=o.map(a=>{let c=ci(a,e),u=J0(c)?c.canMatch(t,n):Ce(e,()=>c(t,n)),l=ur(u);return i?l.pipe(bv(i)):l});return V(s).pipe(oi(),Ev(r))}var ir=class Dv extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,Dv.prototype)}},Hf=class Cv extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,Cv.prototype)}};function cS(e){throw new b(4e3,!1)}function uS(e){throw yv(!1,Fe.GuardRejected)}var lS=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}async lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[x])throw cS(`${t.redirectTo}`);i=i.children[x]}}async applyRedirectCommands(t,n,r,i,o){let s=await dS(n,i,o);if(s instanceof Dt)throw new Hf(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new Hf(a);return a}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new Dt(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new W(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new b(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function dS(e,t,n){if(typeof e=="string")return Promise.resolve(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:l,title:d}=t;return Ec(ur(Ce(n,()=>r({params:u,data:l,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d}))))}var zf={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function fS(e,t,n,r,i,o){let s=Iv(e,t,n);return s.matched?(r=O0(t,r),aS(r,t,n,i,o).pipe(G(a=>a===!0?s:_({},zf)))):V(s)}function Iv(e,t,n){if(t.path==="**")return hS(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?_({},zf):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Yy)(n,e,t);if(!i)return _({},zf);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function hS(e){return{matched:!0,parameters:e.length>0?Zy(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function qy(e,t,n,r){return n.length>0&&mS(e,n,r)?{segmentGroup:new W(t,gS(r,new W(n,e.children))),slicedSegments:[]}:n.length===0&&yS(e,n,r)?{segmentGroup:new W(e.segments,pS(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new W(e.segments,e.children),slicedSegments:n}}function pS(e,t,n,r){let i={};for(let o of n)if($c(e,t,o)&&!r[Et(o)]){let s=new W([],{});i[Et(o)]=s}return _(_({},r),i)}function gS(e,t){let n={};n[x]=t;for(let r of e)if(r.path===""&&Et(r)!==x){let i=new W([],{});n[Et(r)]=i}return n}function mS(e,t,n){return n.some(r=>$c(e,t,r)&&Et(r)!==x)}function yS(e,t,n){return n.some(r=>$c(e,t,r))}function $c(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function vS(e,t,n){return t.length===0&&!e.children[n]}var wS=class{};async function _S(e,t,n,r,i,o,s="emptyOnly",a){return new ES(e,t,n,r,i,s,o,a).recognize()}var bS=31,ES=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a,c){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new lS(this.urlSerializer,this.urlTree)}noMatchError(t){return new b(4002,`'${t.segmentGroup}'`)}async recognize(){let t=qy(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(t),i=new Je(r,n),o=new Uo("",i),s=av(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(t){let n=new sr([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),x,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,t,x,n),rootSnapshot:n}}catch(r){if(r instanceof Hf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof ir?this.noMatchError(r):r}}async processSegmentGroup(t,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(t,n,r,o);let s=await this.processSegment(t,n,r,r.segments,i,!0,o);return s instanceof Je?[s]:[]}async processChildren(t,n,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let u=r.children[c],l=k0(n,c),d=await this.processSegmentGroup(t,l,u,c,i);s.push(...d)}let a=Sv(s);return DS(a),a}async processSegment(t,n,r,i,o,s,a){for(let c of n)try{return await this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a)}catch(u){if(u instanceof ir||wv(u))continue;throw u}if(vS(r,i,o))return new wS;throw new ir(r)}async processSegmentAgainstRoute(t,n,r,i,o,s,a,c){if(Et(r)!==s&&(s===x||!$c(i,o,r)))throw new ir(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c);throw new ir(i)}async expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:d,remainingSegments:h}=Iv(n,i,o);if(!c)throw new ir(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>bS&&(this.allowRedirects=!1));let f=new sr(o,u,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Wy(i),Et(i),i.component??i._loadedComponent??null,i,Ky(i)),p=Lc(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let m=await this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d,f,t),y=await this.applyRedirects.lineralizeSegments(i,m);return this.processSegment(t,r,n,y.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await Ec(fS(n,r,i,t,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new ir(n);t=r._injector??t;let{routes:c}=await this.getChildConfig(t,r,i),u=r._loadedInjector??t,{parameters:l,consumedSegments:d,remainingSegments:h}=a,f=new sr(d,l,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Wy(r),Et(r),r.component??r._loadedComponent??null,r,Ky(r)),p=Lc(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let{segmentGroup:m,slicedSegments:y}=qy(n,d,h,c);if(y.length===0&&m.hasChildren()){let E=await this.processChildren(u,c,m,f);return new Je(f,E)}if(c.length===0&&y.length===0)return new Je(f,[]);let g=Et(r)===o,R=await this.processSegment(u,c,m,y,g?x:o,!0,f);return new Je(f,R instanceof Je?[R]:[])}async getChildConfig(t,n,r){if(n.children)return{routes:n.children,injector:t};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await Ec(sS(t,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(t,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw uS(n)}return{routes:[],injector:t}}};function DS(e){e.sort((t,n)=>t.value.outlet===x?-1:n.value.outlet===x?1:t.value.outlet.localeCompare(n.value.outlet))}function CS(e){let t=e.value.routeConfig;return t&&t.path===""}function Sv(e){let t=[],n=new Set;for(let r of e){if(!CS(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=Sv(r.children);t.push(new Je(r.value,i))}return t.filter(r=>!n.has(r))}function Wy(e){return e.data||{}}function Ky(e){return e.resolve||{}}var IS=new C("",{factory:()=>_S});function SS(e,t,n,r,i,o,s){let a=e.get(IS);return Ne(c=>V(c).pipe(Xe(u=>a(e,t,n,r,u.extractedUrl,i,o,s)),G(({state:u,tree:l})=>z(_({},c),{targetSnapshot:u,urlAfterRedirects:l}))))}function TS(e,t){return Ne(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return V(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of Tv(c))s.add(u);let a=0;return ue(s).pipe(Rr(c=>o.has(c)?AS(c,r,e,t):(c.data=Lc(c,c.parent,e).resolve,V(void 0))),xe(()=>a++),Xs(1),Ne(c=>a===s.size?V(n):Le))})}function Tv(e){let t=e.children.map(n=>Tv(n)).flat();return[e,...t]}function AS(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!pv(i)&&(o[$o]=i.title),Ni(()=>(e.data=Lc(e,e.parent,n).resolve,MS(o,e,t,r).pipe(G(s=>(e._resolvedData=s,e.data=_(_({},e.data),s),null)))))}function MS(e,t,n,r){let i=kf(e);if(i.length===0)return V({});let o={};return ue(i).pipe(Ne(s=>RS(e[s],t,n,r).pipe(jt(),xe(a=>{if(a instanceof ii)throw jc(new vn,a);o[s]=a}))),Xs(1),G(()=>o),xi(s=>wv(s)?Le:Xu(s)))}function RS(e,t,n,r){let i=si(t)??r,o=ci(e,i),s=o.resolve?o.resolve(t,n):Ce(i,()=>o(t,n));return ur(s)}function xf(e){return Xe(t=>{let n=e(t);return n?ue(n).pipe(G(()=>t)):V(t)})}var Kf=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===x);return r}getResolvedTitleForRoute(n){return n.data[$o]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>v(Av),providedIn:"root"})}return e})(),Av=(()=>{class e extends Kf{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(N(Uy))};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),qo=new C("",{factory:()=>({})}),Wo=new C(""),Mv=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=v(af);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await Qy(Ce(n,()=>r.loadComponent())),s=await xv(Nv(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await Rv(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();async function Rv(e,t,n,r){let i=await Qy(Ce(n,()=>e.loadChildren())),o=await xv(Nv(i)),s;o instanceof Ka||Array.isArray(o)?s=o:s=await t.compileModuleAsync(o),r&&r(e);let a,c,u=!1;return Array.isArray(s)?(c=s,u=!0):(a=s.create(n).injector,c=a.get(Wo,[],{optional:!0,self:!0}).flat()),{routes:c.map(Wf),injector:a}}function NS(e){return e&&typeof e=="object"&&"default"in e}function Nv(e){return NS(e)?e.default:e}async function xv(e){return e}var Hc=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>v(xS),providedIn:"root"})}return e})(),xS=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ov=new C("");var OS=()=>{},kv=new C(""),Pv=(()=>{class e{currentNavigation=wt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=wt(null);events=new me;transitionAbortWithErrorSubject=new me;configLoader=v(Mv);environmentInjector=v(de);destroyRef=v(cn);urlSerializer=v(Ho);rootContexts=v(ai);location=v(Yr);inputBindingEnabled=v(Bc,{optional:!0})!==null;titleStrategy=v(Kf);options=v(qo,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=v(Hc);createViewTransition=v(Ov,{optional:!0});navigationErrorHandler=v(kv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>V(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Mc(i)),r=i=>this.events.next(new Rc(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;ye(()=>{this.transitions?.next(z(_({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new be(null),this.transitions.pipe(Qe(r=>r!==null),Xe(r=>{let i=!1,o=new AbortController;return V(r).pipe(Xe(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Fe.SupersededByNewNavigation),Le;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?z(_({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new Kt(s.id,this.urlSerializer.serialize(s.rawUrl),"",Fo.IgnoredSameUrlNavigation)),s.resolve(!1),Le;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return V(s).pipe(Xe(l=>(this.events.next(new cr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Le:Promise.resolve(l))),SS(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),xe(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=l.urlAfterRedirects,h));let d=new Lo(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:d,source:h,restoredState:f,extras:p}=s,m=new cr(l,this.urlSerializer.serialize(d),h,f);this.events.next(m);let y=fv(this.rootComponentType).snapshot;return this.currentTransition=r=z(_({},s),{targetSnapshot:y,urlAfterRedirects:d,extras:z(_({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(g=>(g.finalUrl=d,g)),V(r)}else return this.events.next(new Kt(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Fo.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Le}),xe(s=>{let a=new Ic(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),G(s=>(this.currentTransition=r=z(_({},s),{guards:B0(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),Q0(this.environmentInjector,s=>this.events.next(s)),xe(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw jc(this.urlSerializer,s.guardsResult);let a=new Sc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Qe(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Fe.GuardRejected),!1)),xf(s=>{if(s.guards.canActivateChecks.length!==0)return V(s).pipe(xe(a=>{let c=new Tc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Xe(a=>{let c=!1;return V(a).pipe(TS(this.paramsInheritanceStrategy,this.environmentInjector),xe({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Fe.NoDataFromResolver)}}))}),xe(a=>{let c=new Ac(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),xf(s=>{let a=u=>{let l=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let d=si(u)??this.environmentInjector;l.push(this.configLoader.loadComponent(d,u.routeConfig).then(h=>{u.component=h}))}for(let d of u.children)l.push(...a(d));return l},c=a(s.targetSnapshot.root);return c.length===0?V(s):ue(Promise.all(c).then(()=>s))}),xf(()=>this.afterPreactivation()),Xe(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?ue(c).pipe(G(()=>r)):V(r)}),G(s=>{let a=F0(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=z(_({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),xe(()=>{this.events.next(new jo)}),U0(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Lt(1),ki(_v(o.signal).pipe(Qe(()=>!i&&!r.targetRouterState),xe(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Fe.Aborted)}))),xe({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=OS,a)),this.lastSuccessfulNavigation.set(ye(this.currentNavigation)),this.events.next(new Wt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),ki(this.transitionAbortWithErrorSubject.pipe(xe(s=>{throw s}))),Oi(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Fe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),xi(s=>{if(this.destroyed)return r.resolve(!1),Le;if(i=!0,vv(s))this.events.next(new Ot(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),V0(s)?this.events.next(new ri(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ni(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Ce(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof ii){let{message:u,cancellationCode:l}=jc(this.urlSerializer,c);this.events.next(new Ot(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new ri(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Le}))}))}cancelNavigationTransition(n,r,i){let o=new Ot(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=ye(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function kS(e){return e!==Oo}var Fv=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>v(PS),providedIn:"root"})}return e})(),Uc=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},PS=(()=>{class e extends Uc{static \u0275fac=(()=>{let n;return function(i){return(n||(n=zt(e)))(i||e)}})();static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Yf=(()=>{class e{urlSerializer=v(Ho);options=v(qo,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=v(Yr);urlHandlingStrategy=v(Hc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Dt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof Dt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=fv(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:()=>v(Lv),providedIn:"root"})}return e})(),Lv=(()=>{class e extends Yf{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof cr?this.updateStateMemento():n instanceof Kt?this.commitTransition(r):n instanceof Lo?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof jo?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ot&&n.code!==Fe.SupersededByNewNavigation&&n.code!==Fe.Redirect?this.restoreHistory(r):n instanceof ni?this.restoreHistory(r,!0):n instanceof Wt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=_(_({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=_(_({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=zt(e)))(i||e)}})();static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Jf(e,t){e.events.pipe(Qe(n=>n instanceof Wt||n instanceof Ot||n instanceof ni||n instanceof Kt),G(n=>n instanceof Wt||n instanceof Kt?0:(n instanceof Ot?n.code===Fe.Redirect||n.code===Fe.SupersededByNewNavigation:!1)?2:1),Qe(n=>n!==2),Lt(1)).subscribe(()=>{t()})}var FS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},LS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},kt=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=v(tf);stateManager=v(Yf);options=v(qo,{optional:!0})||{};pendingTasks=v(Ht);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=v(Pv);urlSerializer=v(Ho);location=v(Yr);urlHandlingStrategy=v(Hc);injector=v(de);_events=new me;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=v(Fv);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=v(Wo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!v(Bc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new _e;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=ye(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Ot&&r.code!==Fe.Redirect&&r.code!==Fe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Wt)this.navigated=!0;else if(r instanceof ri){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=_({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||kS(i.source)},s);this.scheduleNavigation(a,Oo,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}x0(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Oo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=_({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(vt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return ye(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Wf),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}l!==null&&(l=this.removeEmptyProps(l));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=cv(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return uv(d,n,l,u??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=ti(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Oo,null,r)}navigate(n,r={skipLocationChange:!1}){return jS(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(Fn(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=_({},FS):r===!1?i=_({},LS):i=r,ti(n))return By(this.currentUrlTree,n,i);let o=this.parseUrl(n);return By(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,h)=>{a=d,c=h});let l=this.pendingTasks.add();return Jf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=T({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function jS(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new b(4008,!1)}var US=new C("");function Zf(e,...t){return jn([{provide:Wo,multi:!0,useValue:e},[],{provide:wn,useFactory:BS},{provide:Ya,multi:!0,useFactory:$S},t.map(n=>n.\u0275providers)])}function BS(){return v(kt).routerState.root}function $S(){let e=v(ht);return t=>{let n=e.get(er);if(t!==n.components[0])return;let r=e.get(kt),i=e.get(HS);e.get(zS)===1&&r.initialNavigation(),e.get(GS,null,{optional:!0})?.setUpPreloading(),e.get(US,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var HS=new C("",{factory:()=>new me}),zS=new C("",{factory:()=>1});var GS=new C("");var zc=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ke({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"content"]],template:function(n,r){n&1&&(I(0,"main")(1,"section",0),st(2,"router-outlet"),S()())},dependencies:[zo],encapsulation:2})};var qv=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)($(uo),$(qr))};static \u0275dir=he({type:e})}return e})(),Wv=(()=>{class e extends qv{static \u0275fac=(()=>{let n;return function(i){return(n||(n=zt(e)))(i||e)}})();static \u0275dir=he({type:e,features:[ot]})}return e})(),th=new C("");var WS={provide:th,useExisting:pt(()=>fi),multi:!0};function KS(){let e=at()?at().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var YS=new C(""),fi=(()=>{class e extends qv{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!KS())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)($(uo),$(qr),$(YS,8))};static \u0275dir=he({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Me("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[hn([WS]),ot]})}return e})();function JS(e){return e==null||Kv(e)===0}function Kv(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var Xc=new C(""),Yv=new C("");function ZS(e){return JS(e.value)?{required:!0}:null}function QS(e){return t=>{let n=t.value?.length??Kv(t.value);return n!==null&&n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}function jv(e){return null}function Jv(e){return e!=null}function Zv(e){return fn(e)?ue(e):e}function Qv(e){let t={};return e.forEach(n=>{t=n!=null?_(_({},t),n):t}),Object.keys(t).length===0?null:t}function Xv(e,t){return t.map(n=>n(e))}function XS(e){return!e.validate}function ew(e){return e.map(t=>XS(t)?t:n=>t.validate(n))}function eT(e){if(!e)return null;let t=e.filter(Jv);return t.length==0?null:function(n){return Qv(Xv(n,t))}}function nh(e){return e!=null?eT(ew(e)):null}function tT(e){if(!e)return null;let t=e.filter(Jv);return t.length==0?null:function(n){let r=Xv(n,t).map(Zv);return tl(r).pipe(G(Qv))}}function rh(e){return e!=null?tT(ew(e)):null}function Vv(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function nT(e){return e._rawValidators}function rT(e){return e._rawAsyncValidators}function Xf(e){return e?Array.isArray(e)?e:[e]:[]}function qc(e,t){return Array.isArray(e)?e.includes(t):e===t}function Uv(e,t){let n=Xf(t);return Xf(e).forEach(i=>{qc(n,i)||n.push(i)}),n}function Bv(e,t){return Xf(t).filter(n=>!qc(e,n))}var Wc=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=nh(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=rh(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},di=class extends Wc{name;get formDirective(){return null}get path(){return null}},Xo=class extends Wc{_parent=null;name=null;valueAccessor=null},Kc=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var eu=(()=>{class e extends Kc{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)($(Xo,2))};static \u0275dir=he({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&vo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[ot]})}return e})(),tu=(()=>{class e extends Kc{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)($(di,10))};static \u0275dir=he({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&vo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[ot]})}return e})();var Ko="VALID",Gc="INVALID",ui="PENDING",Yo="DISABLED",_n=class{},Yc=class extends _n{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Zo=class extends _n{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Qo=class extends _n{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},li=class extends _n{status;source;constructor(t,n){super(),this.status=t,this.source=n}},eh=class extends _n{source;constructor(t){super(),this.source=t}},Jc=class extends _n{source;constructor(t){super(),this.source=t}};function tw(e){return(nu(e)?e.validators:e)||null}function iT(e){return Array.isArray(e)?nh(e):e||null}function nw(e,t){return(nu(t)?t.asyncValidators:e)||null}function oT(e){return Array.isArray(e)?rh(e):e||null}function nu(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function sT(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new b(1e3,"");if(!r[n])throw new b(1001,"")}function aT(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new b(1002,"")})}var Zc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return ye(this.statusReactive)}set status(t){ye(()=>this.statusReactive.set(t))}_status=Wr(()=>this.statusReactive());statusReactive=wt(void 0);get valid(){return this.status===Ko}get invalid(){return this.status===Gc}get pending(){return this.status==ui}get disabled(){return this.status===Yo}get enabled(){return this.status!==Yo}errors;get pristine(){return ye(this.pristineReactive)}set pristine(t){ye(()=>this.pristineReactive.set(t))}_pristine=Wr(()=>this.pristineReactive());pristineReactive=wt(!0);get dirty(){return!this.pristine}get touched(){return ye(this.touchedReactive)}set touched(t){ye(()=>this.touchedReactive.set(t))}_touched=Wr(()=>this.touchedReactive());touchedReactive=wt(!1);get untouched(){return!this.touched}_events=new me;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Uv(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Uv(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Bv(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Bv(t,this._rawAsyncValidators))}hasValidator(t){return qc(this._rawValidators,t)}hasAsyncValidator(t){return qc(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched(z(_({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Qo(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Qo(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty(z(_({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Zo(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new Zo(!0,r))}markAsPending(t={}){this.status=ui;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new li(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending(z(_({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Yo,this.errors=null,this._forEachChild(i=>{i.disable(z(_({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Yc(this.value,r)),this._events.next(new li(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(z(_({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ko,this._forEachChild(r=>{r.enable(z(_({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(z(_({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ko||this.status===ui)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Yc(this.value,n)),this._events.next(new li(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(z(_({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Yo:Ko}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=ui,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=Zv(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new li(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?Yo:this.errors?Gc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ui)?ui:this._anyControlsHaveStatus(Gc)?Gc:Ko}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new Zo(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Qo(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){nu(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=iT(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=oT(this._rawAsyncValidators)}},Qc=class extends Zc{constructor(t,n,r){super(tw(n),nw(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){aT(this,!0,t),Object.keys(t).forEach(r=>{sT(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,z(_({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new Jc(this))}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var ih=new C("",{factory:()=>oh}),oh="always";function cT(e,t){return[...t.path,e]}function rw(e,t,n=oh){iw(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),lT(e,t),fT(e,t),dT(e,t),uT(e,t)}function $v(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function uT(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function iw(e,t){let n=nT(e);t.validator!==null?e.setValidators(Vv(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=rT(e);t.asyncValidator!==null?e.setAsyncValidators(Vv(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();$v(t._rawValidators,i),$v(t._rawAsyncValidators,i)}function lT(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&ow(e,t)})}function dT(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&ow(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function ow(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function fT(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function hT(e,t){e==null,iw(e,t)}function pT(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function gT(e){return Object.getPrototypeOf(e.constructor)===Wv}function mT(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function yT(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===fi?n=o:gT(o)?r=o:i=o}),i||r||n||null}var vT={provide:di,useExisting:pt(()=>es)},Jo=Promise.resolve(),es=(()=>{class e extends di{callSetDisabledState;get submitted(){return ye(this.submittedReactive)}_submitted=Wr(()=>this.submittedReactive());submittedReactive=wt(!1);_directives=new Set;form;ngSubmit=new le;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Qc({},nh(n),rh(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Jo.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),rw(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Jo.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Jo.then(()=>{let r=this._findContainer(n.path),i=new Qc({});hT(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Jo.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Jo.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),mT(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new eh(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||e)($(Xc,10),$(Yv,10),$(ih,8))};static \u0275dir=he({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Me("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[hn([vT]),ot]})}return e})();function Hv(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function zv(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var wT=class extends Zc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(tw(n),nw(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nu(n)&&(n.nonNullable||n.initialValueIsDefault)&&(zv(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new Jc(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Hv(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Hv(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){zv(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var _T={provide:Xo,useExisting:pt(()=>ts)},Gv=Promise.resolve(),ts=(()=>{class e extends Xo{_changeDetectorRef;callSetDisabledState;control=new wT;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new le;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=yT(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),pT(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){rw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Gv.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&tc(r);Gv.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?cT(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)($(di,9),$(Xc,10),$(Yv,10),$(th,10),$(qt,8),$(ih,8))};static \u0275dir=he({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[hn([_T]),ot,Zn]})}return e})();var ru=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=he({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})(),bT={provide:th,useExisting:pt(()=>sh),multi:!0},sh=(()=>{class e extends Wv{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=zt(e)))(i||e)}})();static \u0275dir=he({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Me("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[hn([bT]),ot]})}return e})();function ET(e){return typeof e=="number"?e:parseInt(e,10)}var sw=(()=>{class e{_validator=jv;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):jv,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||e)};static \u0275dir=he({type:e,features:[Zn]})}return e})();var DT={provide:Xc,useExisting:pt(()=>ns),multi:!0};var ns=(()=>{class e extends sw{required;inputName="required";normalizeInput=tc;createValidator=n=>ZS;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=zt(e)))(i||e)}})();static \u0275dir=he({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&ho("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[hn([DT]),ot]})}return e})();var CT={provide:Xc,useExisting:pt(()=>ah),multi:!0},ah=(()=>{class e extends sw{maxlength;inputName="maxlength";normalizeInput=n=>ET(n);createValidator=n=>QS(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=zt(e)))(i||e)}})();static \u0275dir=he({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&ho("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[hn([CT]),ot]})}return e})();var IT=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Gt({type:e});static \u0275inj=St({})}return e})();var iu=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:ih,useValue:n.callSetDisabledState??oh}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Gt({type:e});static \u0275inj=St({imports:[IT]})}return e})();var cw=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);var hi=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},rs=class extends hi{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},pi=class extends hi{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},gi=class extends hi{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},ou=(function(e){return e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2",e})(ou||{});var is=class{constructor(t,{headers:n={},customFetch:r,region:i=ou.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=cw(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Fs(this,arguments,void 0,function*(n,r={}){var i;let o,s;try{let{headers:a,method:c,body:u,signal:l,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let p=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let m;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(h["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(h["Content-Type"]="application/json",m=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?m=JSON.stringify(u):m=u;let y=l;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),l?(y=s.signal,l.addEventListener("abort",()=>s.abort())):y=s.signal);let g=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:m,signal:y}).catch(j=>{throw new rs(j)}),R=g.headers.get("x-relay-error");if(R&&R==="true")throw new pi(g);if(!g.ok)throw new gi(g);let E=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return E==="application/json"?w=yield g.json():E==="application/octet-stream"||E==="application/pdf"?w=yield g.blob():E==="text/event-stream"?w=g:E==="multipart/form-data"?w=yield g.formData():w=yield g.text(),{data:w,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof gi||a instanceof pi?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var lw=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},ST=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let s=null,a=null,c=null,u=o.status,l=o.statusText;if(o.ok){var d,h;if(n.method!=="HEAD"){var f;let g=await o.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=g:a=JSON.parse(g))}let m=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),y=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");m&&y&&y.length>1&&(c=parseInt(y[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,u=406,l="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;let m=await o.text();try{s=JSON.parse(m),Array.isArray(s)&&o.status===404&&(a=[],s=null,u=200,l="OK")}catch{o.status===404&&m===""?(u=204,l="No Content"):s={message:m}}if(s&&n.isMaybeSingle&&(!(s==null||(p=s.details)===null||p===void 0)&&p.includes("0 rows"))&&(s=null,u=200,l="OK"),s&&n.shouldThrowOnError)throw new lw(s)}return{error:s,data:a,count:c,status:u,statusText:l}});return this.shouldThrowOnError||(i=i.catch(o=>{var s;let a="",c=o?.cause;if(c){var u,l,d,h;let p=(u=c?.message)!==null&&u!==void 0?u:"",m=(l=c?.code)!==null&&l!==void 0?l:"";a=`${(d=o?.name)!==null&&d!==void 0?d:"FetchError"}: ${o?.message}`,a+=`

Caused by: ${(h=c?.name)!==null&&h!==void 0?h:"Error"}: ${p}`,m&&(a+=` (${m})`),c?.stack&&(a+=`
${c.stack}`)}else{var f;a=(f=o?.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},TT=class extends ST{select(e){let t=!1,n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){let o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){let r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){let i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var s;let a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}},uw=new RegExp("[,()]"),mi=class extends TT{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&uw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&uw.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");let o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},AT=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:n=!1,count:r}=t??{},i=n?"HEAD":"GET",o=!1,s=(e??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join(""),{url:a,headers:c}=this.cloneRequestState();return a.searchParams.set("select",s),r&&c.append("Prefer",`count=${r}`),new mi({method:i,url:a,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;let i="POST",{url:o,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),n||s.append("Prefer","missing=default"),Array.isArray(e)){let a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){let c=[...new Set(a)].map(u=>`"${u}"`);o.searchParams.set("columns",c.join(","))}}return new mi({method:i,url:o,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;let s="POST",{url:a,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),i||c.append("Prefer","missing=default"),Array.isArray(e)){let u=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(u.length>0){let l=[...new Set(u)].map(d=>`"${d}"`);a.searchParams.set("columns",l.join(","))}}return new mi({method:s,url:a,headers:c,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;let r="PATCH",{url:i,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new mi({method:r,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;let n="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new mi({method:n,url:r,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},dw=class fw{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new AT(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new fw(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,c=new URL(`${this.url}/rpc/${t}`),u,l=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(l)),d=r&&Object.values(n).some(l);d?(a="POST",u=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{c.searchParams.append(f,p)})):(a="POST",u=n);let h=new Headers(this.headers);return d?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new mi({method:a,url:c,headers:h,schema:this.schemaName,body:u,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};var ch=class{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let n=globalThis.process;if(n){let r=n.versions;if(r&&r.node){let i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){let r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},uh=ch;var hw="2.93.2";var pw=`realtime-js/${hw}`,gw="1.0.0",lh="2.0.0",dh=lh;var os=1e4,mw=1e3,yw=100,bn=(function(e){return e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed",e})(bn||{}),pe=(function(e){return e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",e})(pe||{}),ct=(function(e){return e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token",e})(ct||{}),fh=(function(e){return e.websocket="websocket",e})(fh||{}),lr=(function(e){return e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed",e})(lr||{});var su=class{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;let i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;let i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,n,r){var i,o;let s=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",c=(o=t.join_ref)!==null&&o!==void 0?o:"",u=t.payload.event,l=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(l).length===0?"":JSON.stringify(l);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+u.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),p=new DataView(f),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,c.length),p.setUint8(m++,a.length),p.setUint8(m++,s.length),p.setUint8(m++,u.length),p.setUint8(m++,d.length),p.setUint8(m++,n),Array.from(c,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(a,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(s,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(u,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(d,g=>p.setUint8(m++,g.charCodeAt(0)));var y=new Uint8Array(f.byteLength+r.byteLength);return y.set(new Uint8Array(f),0),y.set(new Uint8Array(r),f.byteLength),y.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){let r=JSON.parse(t),[i,o,s,a,c]=r;return n({join_ref:i,ref:o,topic:s,event:a,payload:c})}return n({})}_binaryDecode(t){let n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){let i=n.getUint8(1),o=n.getUint8(2),s=n.getUint8(3),a=n.getUint8(4),c=this.HEADER_LENGTH+4,u=r.decode(t.slice(c,c+i));c=c+i;let l=r.decode(t.slice(c,c+o));c=c+o;let d=r.decode(t.slice(c,c+s));c=c+s;let h=t.slice(c,t.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:l,payload:f};return s>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}};var yi=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var ee=(function(e){return e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange",e})(ee||{}),ph=(e,t,n={})=>{var r;let i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,s)=>(o[s]=MT(s,e,t,i),o),{}):{}},MT=(e,t,n,r)=>{let i=t.find(a=>a.name===e),o=i?.type,s=n[e];return o&&!r.includes(o)?vw(o,s):hh(s)},vw=(e,t)=>{if(e.charAt(0)==="_"){let n=e.slice(1,e.length);return OT(t,n)}switch(e){case ee.bool:return RT(t);case ee.float4:case ee.float8:case ee.int2:case ee.int4:case ee.int8:case ee.numeric:case ee.oid:return NT(t);case ee.json:case ee.jsonb:return xT(t);case ee.timestamp:return kT(t);case ee.abstime:case ee.date:case ee.daterange:case ee.int4range:case ee.int8range:case ee.money:case ee.reltime:case ee.text:case ee.time:case ee.timestamptz:case ee.timetz:case ee.tsrange:case ee.tstzrange:return hh(t);default:return hh(t)}},hh=e=>e,RT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},NT=e=>{if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},xT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},OT=(e,t)=>{if(typeof e!="string")return e;let n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o,s=e.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>vw(t,a))}return e},kT=e=>typeof e=="string"?e.replace(" ","T"):e,au=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var vi=class{constructor(t,n,r={},i=os){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var ss=class e{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=e.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=e.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){let o=this.cloneDeep(t),s=this.transformState(n),a={},c={};return this.map(o,(u,l)=>{s[u]||(c[u]=l)}),this.map(s,(u,l)=>{let d=o[u];if(d){let h=l.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=l.filter(y=>f.indexOf(y.presence_ref)<0),m=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[u]=p),m.length>0&&(c[u]=m)}else a[u]=l}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(t,n,r,i){let{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var u;let l=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(c),l.length>0){let d=t[a].map(f=>f.presence_ref),h=l.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,l,c)}),this.map(s,(a,c)=>{let u=t[a];if(!u)return;let l=c.map(d=>d.presence_ref);u=u.filter(d=>l.indexOf(d.presence_ref)<0),t[a]=u,i(a,u,c),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{let i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var as=(function(e){return e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system",e})(as||{}),Yt=(function(e){return e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR",e})(Yt||{});var cs=class e{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=pe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new vi(this,ct.join,this.params,this.timeout),this.rejoinTimer=new yi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=pe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=pe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=pe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ct.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new ss(this),this.broadcastEndpointURL=au(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==pe.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],l=!!this.bindings[as.PRESENCE]&&this.bindings[as.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(Yt.CHANNEL_ERROR,f)),this._onClose(()=>t?.(Yt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){t?.(Yt.SUBSCRIBED);return}else{let m=this.bindings.postgres_changes,y=(p=m?.length)!==null&&p!==void 0?p:0,g=[];for(let R=0;R<y;R++){let E=m[R],{filter:{event:w,schema:j,table:Se,filter:H}}=E,te=f&&f[R];if(te&&te.event===w&&e.isFilterValueEqual(te.schema,j)&&e.isFilterValueEqual(te.table,Se)&&e.isFilterValueEqual(te.filter,H))g.push(Object.assign(Object.assign({},E),{id:te.id}));else{this.unsubscribe(),this.state=pe.errored,t?.(Yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(Yt.SUBSCRIBED);return}}).receive("error",f=>{this.state=pe.errored,t?.(Yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(Yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===pe.joined&&t===as.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");let o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);let s={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{let u=await a.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:o,payload:s}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,c;let u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=pe.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ct.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new vi(this,ct.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=pe.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new vi(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>yw){let n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:c,leave:u,join:l}=ct;if(r&&[a,c,u,l].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,m,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(m=f.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var p,m,y,g,R,E;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let w=f.id,j=(p=f.filter)===null||p===void 0?void 0:p.event;return w&&((m=n.ids)===null||m===void 0?void 0:m.includes(w))&&(j==="*"||j?.toLocaleLowerCase()===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{let w=(R=(g=f?.filter)===null||g===void 0?void 0:g.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return w==="*"||w===((E=n?.event)===null||E===void 0?void 0:E.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let p=h.data,{schema:m,table:y,commit_timestamp:g,type:R,errors:E}=p;h=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:g,eventType:R,new:{},old:{},errors:E}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===pe.closed}_isJoined(){return this.state===pe.joined}_isJoining(){return this.state===pe.joining}_isLeaving(){return this.state===pe.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){let i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&e.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(let r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ct.close,{},t)}_onError(t){this._on(ct.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=pe.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=ph(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=ph(t.columns,t.old_record)),n}};var gh=()=>{},cu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},FT=[1e3,2e3,5e3,1e4],LT=1e4,jT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,us=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=os,this.transport=null,this.heartbeatIntervalMs=cu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gh,this.ref=0,this.reconnectTimer=null,this.vsn=dh,this.logger=gh,this.conn=null,this.sendBuffer=[],this.serializer=new su,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${fh.websocket}`,this.httpEndpoint=au(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=uh.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){let n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){let t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case bn.connecting:return lr.Connecting;case bn.open:return lr.Open;case bn.closing:return lr.Closing;default:return lr.Closed}}isConnected(){return this.connectionState()===lr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new cs(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){let{topic:n,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(mw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},cu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){let u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(l){this.log("error","error in heartbeat callback",l)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:i,payload:o,ref:s}=n,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,o,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===bn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===bn.open||this.conn.readyState===bn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(ct.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{let r=new Blob([jT],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{let o={access_token:n,version:pw};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(ct.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new yi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},cu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,s,a,c,u,l,d,h,f;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:os,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:cu.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:gh,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:dh,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t?.reconnectAfterMs)!==null&&u!==void 0?u:p=>FT[p-1]||LT,this.vsn){case gw:this.encode=(l=t?.encode)!==null&&l!==void 0?l:(p,m)=>m(JSON.stringify(p)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:(p,m)=>m(JSON.parse(p));break;case lh:this.encode=(h=t?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};var ls=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function VT(e,t,n){let r=new URL(t,e);if(n)for(let[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function UT(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function BT(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:s}){let a=VT(e.baseUrl,r,i),c=await UT(e.auth),u=await t(a,{method:n,headers:_(_(_({},o?{"Content-Type":"application/json"}:{}),c),s),body:o?JSON.stringify(o):void 0}),l=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),h=d&&l?JSON.parse(l):l;if(!u.ok){let f=d?h:void 0,p=f?.error;throw new ls(p?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:p?.type,icebergCode:p?.code,details:f})}return{status:u.status,headers:u.headers,data:h}}}}function uu(e){return e.join("")}var $T=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:uu(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){let n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${uu(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${uu(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${uu(e.namespace)}`}),!0}catch(t){if(t instanceof ls&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof ls&&n.status===409)return;throw n}}};function wi(e){return e.join("")}var HT=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wi(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${wi(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){let n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${wi(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${wi(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${wi(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${wi(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof ls&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof ls&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},ww=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);let n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=BT({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new $T(this.client,t),this.tableOps=new HT(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};var du=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function fu(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var lu=class extends du{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Dw=class extends du{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};var zT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),GT=e=>{if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},mh=e=>{if(Array.isArray(e))return e.map(n=>mh(n));if(typeof e=="function"||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([n,r])=>{let i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=mh(r)}),t},qT=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function fs(e){"@babel/helpers - typeof";return fs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fs(e)}function WT(e,t){if(fs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(fs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function KT(e){var t=WT(e,"string");return fs(t)=="symbol"?t:t+""}function YT(e,t,n){return(t=KT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_w(Object(n),!0).forEach(function(r){YT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_w(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var bw=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},JT=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){let i=e,o=i.status||500;if(typeof i.json=="function")i.json().then(s=>{let a=s?.statusCode||s?.code||o+"";t(new lu(bw(s),o,a,r))}).catch(()=>{if(r==="vectors"){let s=o+"";t(new lu(i.statusText||`HTTP ${o} error`,o,s,r))}else{let s=o+"";t(new lu(i.statusText||`HTTP ${o} error`,o,s,r))}});else{let s=o+"";t(new lu(i.statusText||`HTTP ${o} error`,o,s,r))}}else t(new Dw(bw(e),e,r))},ZT=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!r?M(M({},i),n):(GT(r)?(i.headers=M({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),M(M({},i),n))};async function ds(e,t,n,r,i,o,s){return new Promise((a,c)=>{e(n,ZT(t,r,i,o)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;if(s==="vectors"){let l=u.headers.get("content-type");if(!l||!l.includes("application/json"))return{}}return u.json()}).then(u=>a(u)).catch(u=>JT(u,c,r,s))})}function QT(e="storage"){return{get:async(t,n,r,i)=>ds(t,"GET",n,r,i,void 0,e),post:async(t,n,r,i,o)=>ds(t,"POST",n,i,o,r,e),put:async(t,n,r,i,o)=>ds(t,"PUT",n,i,o,r,e),head:async(t,n,r,i)=>ds(t,"HEAD",n,M(M({},r),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,n,r,i,o)=>ds(t,"DELETE",n,i,o,r,e)}}var XT=QT("storage"),{get:hs,post:ne,put:yh,head:eA,remove:vh}=XT,_i=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=zT(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(fu(n))return{data:null,error:n};throw n}}},tA=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fu(t))return{data:null,error:t};throw t}}},Cw;Cw=Symbol.toStringTag;var nA=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Cw]="BlobDownloadBuilder",this.promise=null}asStream(){return new tA(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(fu(t))return{data:null,error:t};throw t}}},rA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ew={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},iA=class extends _i{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var i=this;return i.handleOperation(async()=>{let o,s=M(M({},Ew),r),a=M(M({},i.headers),e==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",i.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(c))):(o=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),r?.headers&&(a=M(M({},a),r.headers));let u=i._removeEmptyFolders(t),l=i._getFinalPath(u),d=await(e=="PUT"?yh:ne)(i.fetch,`${i.url}/object/${l}`,o,M({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{path:u,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;let o=i._removeEmptyFolders(e),s=i._getFinalPath(o),a=new URL(i.url+`/object/upload/sign/${s}`);return a.searchParams.set("token",t),i.handleOperation(async()=>{let c,u=M({upsert:Ew.upsert},r),l=M(M({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,l["cache-control"]=`max-age=${u.cacheControl}`,l["content-type"]=u.contentType),{path:o,fullPath:(await yh(i.fetch,a.toString(),c,{headers:l})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e),i=M({},n.headers);t?.upsert&&(i["x-upsert"]="true");let o=await ne(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(n.url+o.url),a=s.searchParams.get("token");if(!a)throw new du("No token returned by API");return{signedUrl:s.toString(),path:e,token:a}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await ne(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await ne(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e),o=await ne(r.fetch,`${r.url}/object/sign/${i}`,M({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${s}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{let i=await ne(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(s=>M(M({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${o}`):null}))})}download(e,t){let n=typeof t?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(t?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(e),s=()=>hs(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new nA(s,this.shouldThrowOnError)}async info(e){var t=this;let n=t._getFinalPath(e);return t.handleOperation(async()=>mh(await hs(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;let n=t._getFinalPath(e);try{return await eA(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(fu(r)&&r instanceof Dw){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){let n=this._getFinalPath(e),r=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);let o=typeof t?.transform<"u"?"render/image":"object",s=this.transformOptsToQueryString(t?.transform||{});s!==""&&r.push(s);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${a}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await vh(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{let i=M(M(M({},rA),t),{},{prefix:e||""});return await ne(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{let r=M({},e);return await ne(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}},oA="2.93.2",ps={"X-Client-Info":`storage-js/${oA}`},sA=class extends _i{constructor(e,t={},n,r){let i=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));let o=i.href.replace(/\/$/,""),s=M(M({},ps),t);super(o,s,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let n=t.listBucketOptionsToQueryString(e);return await hs(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await hs(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await ne(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await yh(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await vh(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},aA=class extends _i{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=M(M({},ps),t);super(r,i,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);let r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await hs(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await vh(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!qT(e))throw new du("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let n=new ww({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){let s=i[o];return typeof s!="function"?s:async(...a)=>{try{return{data:await s.apply(i,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},cA=class extends _i{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=M(M({},ps),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await ne(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await ne(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},uA=class extends _i{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=M(M({},ps),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},lA=class extends _i{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=M(M({},ps),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await ne(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},dA=class extends lA{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new fA(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},fA=class extends cA{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,M(M({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,M(M({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new hA(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},hA=class extends uA{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,M(M({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,M(M({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,M(M({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,M(M({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,M(M({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},Iw=class extends sA{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new iA(this.url,this.headers,e,this.fetch)}get vectors(){return new dA(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new aA(this.url+"/iceberg",this.headers,this.fetch)}};var hu="2.93.2";var dr=30*1e3,pu=3,gu=pu*dr,Sw="http://localhost:9999",Tw="supabase.auth.token";var Aw={"X-Client-Info":`gotrue-js/${hu}`};var gs="X-Supabase-Api-Version",wh={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Mw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Rw=600*1e3;var En=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function D(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}var mu=class extends En{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function Nw(e){return D(e)&&e.name==="AuthApiError"}var ut=class extends En{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},Ct=class extends En{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},Ie=class extends Ct{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function vu(e){return D(e)&&e.name==="AuthSessionMissingError"}var Jt=class extends Ct{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},fr=class extends Ct{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},hr=class extends Ct{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function xw(e){return D(e)&&e.name==="AuthImplicitGrantRedirectError"}var ms=class extends Ct{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},yu=class extends Ct{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var bi=class extends Ct{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function wu(e){return D(e)&&e.name==="AuthRetryableFetchError"}var ys=class extends Ct{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var pr=class extends Ct{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var _u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Ow=` 	
\r=`.split(""),pA=(()=>{let e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Ow.length;t+=1)e[Ow[t].charCodeAt(0)]=-2;for(let t=0;t<_u.length;t+=1)e[_u[t].charCodeAt(0)]=t;return e})();function kw(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(_u[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(_u[r]),t.queuedBits-=6}}function Pw(e,t,n){let r=pA[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function _h(e){let t=[],n=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{yA(s,r,n)};for(let s=0;s<e.length;s+=1)Pw(e.charCodeAt(s),i,o);return t.join("")}function gA(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function mA(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}gA(r,t)}}function yA(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function Dn(e){let t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Pw(e.charCodeAt(i),n,r);return new Uint8Array(t)}function Fw(e){let t=[];return mA(e,n=>t.push(n)),new Uint8Array(t)}function Zt(e){let t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>kw(i,n,r)),kw(null,n,r),t.join("")}function Lw(e){return Math.round(Date.now()/1e3)+e}function jw(){return Symbol("auth-callback")}var ge=()=>typeof window<"u"&&typeof document<"u",gr={tested:!1,writable:!1},bu=()=>{if(!ge())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(gr.tested)return gr.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),gr.tested=!0,gr.writable=!0}catch{gr.tested=!0,gr.writable=!1}return gr.writable};function Vw(e){let t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}var Eu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Uw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",mr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Cn=async(e,t)=>{let n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},we=async(e,t)=>{await e.removeItem(t)},vs=class e{constructor(){this.promise=new e.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}};vs.promiseConstructor=Promise;function ws(e){let t=e.split(".");if(t.length!==3)throw new pr("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Mw.test(t[r]))throw new pr("JWT not in base64url format");return{header:JSON.parse(_h(t[0])),payload:JSON.parse(_h(t[1])),signature:Dn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Bw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function $w(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await e(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function vA(e){return("0"+e.toString(16)).substr(-2)}function wA(){let t=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,vA).join("")}async function _A(e){let n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function bA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;let n=await _A(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yr(e,t,n=!1){let r=wA(),i=r;n&&(i+="/PASSWORD_RECOVERY"),await mr(e,`${t}-code-verifier`,i);let o=await bA(r);return[o,r===o?"plain":"s256"]}var EA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Hw(e){let t=e.headers.get(gs);if(!t||!t.match(EA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function zw(e){if(!e)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Gw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var DA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function vr(e){if(!DA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Du(){let e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){let r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function qw(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function bh(e){return JSON.parse(JSON.stringify(e))}var wr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),CA=[502,503,504];async function Ww(e){var t;if(!Uw(e))throw new bi(wr(e),0);if(CA.includes(e.status))throw new bi(wr(e),e.status);let n;try{n=await e.json()}catch(o){throw new ut(wr(o),o)}let r,i=Hw(e);if(i&&i.getTime()>=wh["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ys(wr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ie}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new ys(wr(n),e.status,n.weak_password.reasons);throw new mu(wr(n),e.status||500,r)}var IA=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function A(e,t,n,r){var i;let o=Object.assign({},r?.headers);o[gs]||(o[gs]=wh["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await SA(e,t,n+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function SA(e,t,n,r,i,o){let s=IA(t,r,i,o),a;try{a=await e(n,Object.assign({},s))}catch(c){throw console.error(c),new bi(wr(c),0)}if(a.ok||await Ww(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await Ww(c)}}function lt(e){var t;let n=null;TA(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Lw(e.expires_in)));let r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function Eh(e){let t=lt(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Pt(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Kw(e){return{data:e,error:null}}function Yw(e){let{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,s=An(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function Dh(e){return e}function TA(e){return e.access_token&&e.refresh_token&&e.expires_in}var Cu=["global","local","others"];var Ei=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Eu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=Cu[0]){if(Cu.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Cu.join(", ")}`);try{return await A(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await A(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Pt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:n}=t,r=An(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await A(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Yw,redirectTo:n?.redirectTo})}catch(n){if(D(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await A(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Pt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,s,a,c;try{let u={nextPage:null,lastPage:0,total:0},l=await A(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Dh});if(l.error)throw l.error;let d=await l.json(),h=(s=l.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);u[`${y}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(D(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){vr(t);try{return await A(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Pt})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){vr(t);try{return await A(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Pt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){vr(t);try{return await A(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Pt})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){vr(t.userId);try{let{data:n,error:r}=await A(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(D(n))return{data:null,error:n};throw n}}async _deleteFactor(t){vr(t.userId),vr(t.id);try{return{data:await A(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,s,a,c;try{let u={nextPage:null,lastPage:0,total:0},l=await A(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:Dh});if(l.error)throw l.error;let d=await l.json(),h=(s=l.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);u[`${y}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(D(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await A(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(D(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await A(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(D(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await A(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await A(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await A(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(D(n))return{data:null,error:n};throw n}}};function Ch(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}var _r={debug:!!(globalThis&&bu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},_s=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},Iu=class extends _s{};async function Ih(e,t,n){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),_r.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{_r.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw _r.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Iu(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(_r.debug)try{let o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Jw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Sh(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Zw(e){return parseInt(e,16)}function Qw(e){let t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function Xw(e){var t;let{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:u,scheme:l,uri:d,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}let f=Sh(e.address),p=l?`${l}://${r}`:r,m=e.statement?`${e.statement}
`:"",y=`${p} wants you to sign in with your Ethereum account:
${f}

${m}`,g=`URI: ${d}
Version: ${h}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),c&&(g+=`
Request ID: ${c}`),u){let R=`
Resources:`;for(let E of u){if(!E||typeof E!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${E}`);R+=`
- ${E}`}g+=R}return`${y}
${g}`}var re=class extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}},br=class extends re{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}};function e_({error:e,options:t}){var n,r,i;let{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new re({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new re({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new re({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new re({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new re({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new re({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new re({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new re({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){let s=window.location.hostname;if(Th(s)){if(o.rp.id!==s)return new re({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new re({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function t_({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new re({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new re({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){let r=window.location.hostname;if(Th(r)){if(n.rpId!==r)return new re({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new re({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new re({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new re({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var Ah=class{createNewAbortSignal(){if(this.controller){let n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},AA=new Ah;function r_(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:n,excludeCredentials:r}=e,i=An(e,["challenge","user","excludeCredentials"]),o=Dn(t).buffer,s=Object.assign(Object.assign({},n),{id:Dn(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let u=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:Dn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function i_(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:n}=e,r=An(e,["challenge","allowCredentials"]),i=Dn(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){let a=n[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:Dn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function o_(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Zt(new Uint8Array(e.response.attestationObject)),clientDataJSON:Zt(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function s_(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Zt(new Uint8Array(i.authenticatorData)),clientDataJSON:Zt(new Uint8Array(i.clientDataJSON)),signature:Zt(new Uint8Array(i.signature)),userHandle:i.userHandle?Zt(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Th(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function n_(){var e,t;return!!(ge()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function MA(e){try{let t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new br("Browser returned unexpected credential type",t)}:{data:null,error:new br("Empty credential response",t)}}catch(t){return{data:null,error:e_({error:t,options:e})}}}async function RA(e){try{let t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new br("Browser returned unexpected credential type",t)}:{data:null,error:new br("Empty credential response",t)}}catch(t){return{data:null,error:t_({error:t,options:e})}}}var NA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},xA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Su(...e){let t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of e)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(n(s))r[o]=s;else if(t(s)){let a=r[o];t(a)?r[o]=Su(a,s):r[o]=Su(s)}else r[o]=s}return r}function OA(e,t){return Su(NA,e,t||{})}function kA(e,t){return Su(xA,e,t||{})}var Tu=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{let{data:s,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:a};let c=i??AA.createNewAbortSignal();if(s.webauthn.type==="create"){let{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{let u=OA(s.webauthn.credential_options.publicKey,o?.create),{data:l,error:d}=await MA({publicKey:u,signal:c});return l?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:l}},error:null}:{data:null,error:d}}case"request":{let u=kA(s.webauthn.credential_options.publicKey,o?.request),{data:l,error:d}=await RA(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return l?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:l}},error:null}:{data:null,error:d}}}}catch(s){return D(s)?{data:null,error:s}:{data:null,error:new ut("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new En("rpId is required for WebAuthn authentication")};try{if(!n_())return{data:null,error:new ut("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!s)return{data:null,error:a};let{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return D(s)?{data:null,error:s}:{data:null,error:new ut("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new En("rpId is required for WebAuthn registration")};try{if(!n_())return{data:null,error:new ut("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(l=>{var d;return(d=l.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(l=>l?this.client.mfa.unenroll({factorId:l?.id}):void 0),{data:null,error:a};let{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return D(s)?{data:null,error:s}:{data:null,error:new ut("Unexpected error in register",s)}}}};Jw();var PA={url:Sw,storageKey:Tw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Aw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function a_(e,t,n){return await n()}var Di={},FA=(()=>{class e{get jwks(){var n,r;return(r=(n=Di[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Di[this.storageKey]=Object.assign(Object.assign({},Di[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Di[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Di[this.storageKey]=Object.assign(Object.assign({},Di[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},PA),n);if(this.storageKey=s.storageKey,this.instanceID=(r=e.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,e.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&ge()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new Ei({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Eu(s.fetch),this.lock=s.lock||a_,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&ge()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Ih:this.lock=a_,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Tu(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:bu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ch(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Ch(this.memoryStorage)),ge()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${hu}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},i="none";if(ge()&&(r=Vw(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),ge()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),xw(s)){let u=(n=s.details)===null||n===void 0?void 0:n.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return{error:s}}let{session:a,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return D(r)?this._returnResult({error:r}):this._returnResult({error:new ut("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,o;try{let s=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:lt}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(D(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(n){var r,i,o;try{let s;if("email"in n){let{email:d,password:h,options:f}=n,p=null,m=null;this.flowType==="pkce"&&([p,m]=await yr(this.storage,this.storageKey)),s=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:m},xform:lt})}else if("phone"in n){let{phone:d,password:h,options:f}=n;s=await A(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:lt})}else throw new fr("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return await we(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});let u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(n){try{let r;if("email"in n){let{email:s,password:a,options:c}=n;r=await A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Eh})}else if("phone"in n){let{phone:s,password:a,options:c}=n;r=await A(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:Eh})}else throw new fr("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new Jt;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,i,o,s;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=n.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){let{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,o,s,a,c,u,l,d,h,f;let p,m;if("message"in n)p=n.message,m=n.signature;else{let{chain:y,wallet:g,statement:R,options:E}=n,w;if(ge())if(typeof g=="object")w=g;else{let Ft=window;if("ethereum"in Ft&&typeof Ft.ethereum=="object"&&"request"in Ft.ethereum&&typeof Ft.ethereum.request=="function")w=Ft.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}let j=new URL((r=E?.url)!==null&&r!==void 0?r:window.location.href),Se=await w.request({method:"eth_requestAccounts"}).then(Ft=>Ft).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Se||Se.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let H=Sh(Se[0]),te=(i=E?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!te){let Ft=await w.request({method:"eth_chainId"});te=Zw(Ft)}let f_={domain:j.host,address:H,statement:R,uri:j.href,version:"1",chainId:te,nonce:(o=E?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=E?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=E?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(u=E?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(l=E?.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(d=E?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=Xw(f_),m=await w.request({method:"personal_sign",params:[Qw(p),H]})}try{let{data:y,error:g}=await A(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=n.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=n.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:lt});if(g)throw g;if(!y||!y.session||!y.user){let R=new Jt;return this._returnResult({data:{user:null,session:null},error:R})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:g})}catch(y){if(D(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(n){var r,i,o,s,a,c,u,l,d,h,f,p;let m,y;if("message"in n)m=n.message,y=n.signature;else{let{chain:g,wallet:R,statement:E,options:w}=n,j;if(ge())if(typeof R=="object")j=R;else{let H=window;if("solana"in H&&typeof H.solana=="object"&&("signIn"in H.solana&&typeof H.solana.signIn=="function"||"signMessage"in H.solana&&typeof H.solana.signMessage=="function"))j=H.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof R!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=R}let Se=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){let H=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:Se.host,uri:Se.href}),E?{statement:E}:null)),te;if(Array.isArray(H)&&H[0]&&typeof H[0]=="object")te=H[0];else if(H&&typeof H=="object"&&"signedMessage"in H&&"signature"in H)te=H;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in te&&"signature"in te&&(typeof te.signedMessage=="string"||te.signedMessage instanceof Uint8Array)&&te.signature instanceof Uint8Array)m=typeof te.signedMessage=="string"?te.signedMessage:new TextDecoder().decode(te.signedMessage),y=te.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${Se.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${Se.href}`,`Issued At: ${(o=(i=w?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=w?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(te=>`- ${te}`)]:[]].join(`
`);let H=await j.signMessage(new TextEncoder().encode(m),"utf8");if(!H||!(H instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=H}}try{let{data:g,error:R}=await A(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Zt(y)},!((f=n.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=n.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:lt});if(R)throw R;if(!g||!g.session||!g.user){let E=new Jt;return this._returnResult({data:{user:null,session:null},error:E})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:R})}catch(g){if(D(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(n){let r=await Cn(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new yu;let{data:s,error:a}=await A(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:lt});if(await we(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new Jt;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(n){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=n,c=await A(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:lt}),{data:u,error:l}=c;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!u||!u.session||!u.user){let d=new Jt;return this._returnResult({data:{user:null,session:null},error:d})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:l})}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,i,o,s,a;try{if("email"in n){let{email:c,options:u}=n,l=null,d=null;this.flowType==="pkce"&&([l,d]=await yr(this.storage,this.storageKey));let{error:h}=await A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(i=u?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:l,code_challenge_method:d},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in n){let{phone:c,options:u}=n,{data:l,error:d}=await A(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=u?.data)!==null&&o!==void 0?o:{},create_user:(s=u?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(a=u?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:d})}throw new fr("You must provide either an email or phone number.")}catch(c){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(n){var r,i;try{let o,s;"options"in n&&(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo,s=(i=n.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=await A(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:lt});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let u=a.session,l=a.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(o){if(D(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var r,i,o,s,a;try{let c=null,u=null;this.flowType==="pkce"&&([c,u]=await yr(this.storage,this.storageKey));let l=await A(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:Kw});return!((s=l.data)===null||s===void 0)&&s.url&&ge()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(c){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new Ie;let{error:o}=await A(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(D(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{let r=`${this.url}/resend`;if("email"in n){let{email:i,type:o,options:s}=n,{error:a}=await A(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in n){let{phone:i,type:o,options:s}=n,{data:a,error:c}=await A(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new fr("You must provide either an email or phone number and a type")}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=await Cn(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};let i=n.expires_at?n.expires_at*1e3-Date.now()<gu:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){let a=await Cn(this.userStorage,this.storageKey+"-user");a?.user?n.user=a.user:n.user=Du()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};n.user=qw(n.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}let{data:o,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;let r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Pt}):await this._useSession(async r=>{var i,o,s;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ie}:await A(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Pt})})}catch(r){if(D(r))return vu(r)&&(await this._removeSession(),await we(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new Ie;let a=o.session,c=null,u=null;this.flowType==="pkce"&&n.email!=null&&([c,u]=await yr(this.storage,this.storageKey));let{data:l,error:d}=await A(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:c,code_challenge_method:u}),jwt:a.access_token,xform:Pt});if(d)throw d;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Ie;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=ws(n.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:c,error:u}=await this._callRefreshToken(n.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:u}=await this._getUser(n.access_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});s={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(D(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){let{data:a,error:c}=r;if(c)throw c;n=(i=a.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Ie;let{data:o,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!ge())throw new hr("No browser detected.");if(n.error||n.error_description||n.error_code)throw new hr(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ms("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new ms("No code detected.");let{data:E,error:w}=await this._exchangeCodeForSession(n.code);if(w)throw w;let j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:E.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:c,expires_at:u,token_type:l}=n;if(!s||!c||!a||!l)throw new hr("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(c),f=d+h;u&&(f=parseInt(u));let p=f-d;p*1e3<=dr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);let m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);let{data:y,error:g}=await this._getUser(s);if(g)throw g;let R={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:l,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:R,redirectType:n.type},error:null})}catch(i){if(D(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){let r=await Cn(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s&&!vu(s))return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=await this.admin.signOut(a,n);if(c&&!(Nw(c)&&(c.status===404||c.status===401||c.status===403)||vu(c)))return this._returnResult({error:c})}return n!=="others"&&(await this._removeSession(),await we(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){let r=jw(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",n,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",s),console.error(s)}})}async resetPasswordForEmail(n,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await yr(this.storage,this.storageKey,!0));try{return await A(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var n;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,c,u,l,d;let{data:h,error:f}=s;if(f)throw f;let p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await A(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return ge()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(D(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:c,token:u,access_token:l,nonce:d}=n,h=await A(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:u,access_token:l,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:lt}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Jt}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(o){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await A(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await $w(async o=>(o>0&&await Bw(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await A(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:lt})),(o,s)=>{let a=200*Math.pow(2,o);return s&&wu(s)&&Date.now()+a-i<dr})}catch(i){if(this._debug(r,"error",i),D(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),ge()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=await Cn(this.storage,this.storageKey);if(o&&this.userStorage){let a=await Cn(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},await mr(this.userStorage,this.storageKey+"-user",a)),o.user=(n=a?.user)!==null&&n!==void 0?n:Du()}else if(o&&!o.user&&!o.user){let a=await Cn(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,await we(this.storage,this.storageKey+"-user"),await mr(this.storage,this.storageKey,o)):o.user=Du()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<gu;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${gu}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=await this._callRefreshToken(o.refresh_token);a&&(console.error(a),wu(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=await this._getUser(o.access_token);!c&&a?.user?(o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new Ie;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new vs;let{data:s,error:a}=await this._refreshAccessToken(n);if(a)throw a;if(!s.session)throw new Ie;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),D(s)){let a={data:null,error:s};return wu(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,r,i=!0){let o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(n,r)}catch(u){s.push(u)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await we(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await mr(this.userStorage,this.storageKey+"-user",{user:r.user});let o=Object.assign({},r);delete o.user;let s=bh(o);await mr(this.storage,this.storageKey,s)}else{let o=bh(r);await mr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await we(this.storage,this.storageKey),await we(this.storage,this.storageKey+"-code-verifier"),await we(this.storage,this.storageKey+"-user"),this.userStorage&&await we(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&ge()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),dr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);let r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let n=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-n)/dr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${dr}ms, refresh threshold is ${pu} ticks`),o<=pu&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof _s)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ge()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=await yr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):await A(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:u,error:l}=await A(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(n.factorType==="totp"&&u.type==="totp"&&(!((o=u?.totp)===null||o===void 0)&&o.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?o_(n.webauthn.credential_response):s_(n.webauthn.credential_response)})}:{code:n.code}),{data:c,error:u}=await A(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:u}))})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=await A(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:r_(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:i_(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){let{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(n=r?.factors)!==null&&n!==void 0?n:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,i,o,s;if(n)try{let{payload:p}=ws(n),m=null;p.aal&&(m=p.aal);let y=m,{data:{user:g},error:R}=await this.getUser(n);if(R)return this._returnResult({data:null,error:R});((i=(r=g?.factors)===null||r===void 0?void 0:r.filter(j=>j.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(y="aal2");let w=p.amr||[];return{data:{currentLevel:m,nextLevel:y,currentAuthenticationMethods:w},error:null}}catch(p){if(D(p))return this._returnResult({data:null,error:p});throw p}let{data:{session:a},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:u}=ws(a.access_token),l=null;u.aal&&(l=u.aal);let d=l;((s=(o=a.user.factors)===null||o===void 0?void 0:o.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");let f=u.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await A(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ie})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new Ie});let a=await A(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&ge()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(D(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new Ie});let a=await A(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&ge()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(D(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await A(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ie})})}catch(n){if(D(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await A(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ie})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(c=>c.kid===n);if(i)return i;let o=Date.now();if(i=this.jwks.keys.find(c=>c.kid===n),i&&this.jwks_cached_at+Rw>o)return i;let{data:s,error:a}=await A(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,i=s.keys.find(c=>c.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){let{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});i=p.session.access_token}let{header:o,payload:s,signature:a,raw:{header:c,payload:u}}=ws(i);r?.allowExpired||zw(s.exp);let l=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!l){let{error:p}=await this.getUser(i);if(p)throw p;return{data:{claims:s,header:o,signature:a},error:null}}let d=Gw(o.alg),h=await crypto.subtle.importKey("jwk",l,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,Fw(`${c}.${u}`)))throw new pr("Invalid JWT signature");return{data:{claims:s,header:o,signature:a},error:null}}catch(i){if(D(i))return this._returnResult({data:null,error:i});throw i}}}return e.nextInstanceID={},e})(),Mh=FA;var LA=Mh,Rh=LA;var jA="2.93.2",bs="";typeof Deno<"u"?bs="deno":typeof document<"u"?bs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?bs="react-native":bs="node";var VA={"X-Client-Info":`supabase-js-${bs}/${jA}`},UA={headers:VA},BA={schema:"public"},$A={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},HA={};function Es(e){"@babel/helpers - typeof";return Es=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Es(e)}function zA(e,t){if(Es(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Es(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GA(e){var t=zA(e,"string");return Es(t)=="symbol"?t:t+""}function qA(e,t,n){return(t=GA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c_(Object(n),!0).forEach(function(r){qA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c_(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var WA=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),KA=()=>Headers,YA=(e,t,n)=>{let r=WA(n),i=KA();return async(o,s)=>{var a;let c=(a=await t())!==null&&a!==void 0?a:e,u=new i(s?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(o,oe(oe({},s),{},{headers:u}))}};function JA(e){return e.endsWith("/")?e:e+"/"}function ZA(e,t){var n,r;let{db:i,auth:o,realtime:s,global:a}=e,{db:c,auth:u,realtime:l,global:d}=t,h={db:oe(oe({},c),i),auth:oe(oe({},u),o),realtime:oe(oe({},l),s),storage:{},global:oe(oe(oe({},d),a),{},{headers:oe(oe({},(n=d?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function QA(e){let t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(JA(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var XA=class extends Rh{constructor(e){super(e)}},eM=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;let o=QA(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);let s=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:BA,realtime:HA,auth:oe(oe({},$A),{},{storageKey:s}),global:UA},c=ZA(n??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(l,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=YA(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(oe({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(l=>this.realtime.setAuth(l)).catch(l=>console.warn("Failed to set initial Realtime auth token:",l)),this.rest=new dw(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new Iw(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new is(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();let{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:s,lock:a,debug:c,throwOnError:u},l,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new XA({url:this.authUrl.href,headers:oe(oe({},h),l),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:s,lock:a,debug:c,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new us(this.realtimeUrl.href,oe(oe({},e),{},{params:oe(oe({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},u_=(e,t,n)=>new eM(e,t,n);function tM(){if(typeof window<"u")return!1;let e=globalThis.process;if(!e)return!1;let t=e.version;if(t==null)return!1;let n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}tM()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Er=u_("https://kmbhzpfwhzxpobhjbyvt.supabase.co","sb_publishable_hu-YJAvolnoKaMh2dvPC1w_Ou_W19Av");function nM(e,t){if(e&1&&(I(0,"div",20),P(1),S()),e&2){let n=mo();Q(),Nt(" ",n.errorMessage," ")}}var Au=class e{constructor(t,n){this.router=t;this.cdr=n}username="";password="";errorMessage="";loading=!1;showPassword=!1;async login(){this.errorMessage="",this.loading=!0;let[t,n]=await Promise.all([Er.from("users").select("id").eq("username",this.username).eq("password",this.password).limit(1).maybeSingle(),Er.from("nutritionists").select("id").eq("username",this.username).eq("password",this.password).limit(1).maybeSingle()]);if(this.loading=!1,t.data){if(t.data){localStorage.setItem("user_id",t.data.id),this.router.navigate(["/user-dashboard"]);return}return}if(n.data){this.router.navigate(["/nutri-dashboard"]);return}this.errorMessage="Invalid username or password",this.cdr.detectChanges()}goToSignUp(){this.router.navigate(["/sign-up"])}static \u0275fac=function(n){return new(n||e)($(kt),$(qt))};static \u0275cmp=Ke({type:e,selectors:[["app-home"]],decls:27,vars:6,consts:[["form","ngForm"],[1,"page-bg"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand"],[1,"container","vh-100","d-flex","align-items-center","justify-content-center"],[1,"row","shadow","rounded","overflow-hidden",2,"max-width","900px","width","100%"],[1,"col-md-6","p-0","d-none","d-md-block"],["src","https://lipsum.app/random/640x880/","alt","CalTrack",1,"img-fluid","h-100","w-100",2,"object-fit","cover"],[1,"col-md-6","bg-white","p-5","d-flex","flex-column","justify-content-center"],[1,"mb-4","text-center"],[3,"ngSubmit"],["type","email","placeholder","Email","name","username","required","",1,"form-control","mb-3",3,"ngModelChange","ngModel"],[1,"input-group","mb-3"],["placeholder","Password","name","password","required","",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-primary","w-100","mb-3",3,"disabled"],["class","text-danger text-center mb-2",4,"ngIf"],[1,"text-center"],["role","button",3,"click"],[1,"text-danger","text-center","mb-2"]],template:function(n,r){if(n&1){let i=po();I(0,"div",1)(1,"nav",2)(2,"div",3)(3,"a",4),P(4,"CalTrack"),S()()(),I(5,"div",5)(6,"div",6)(7,"div",7),st(8,"img",8),S(),I(9,"div",9)(10,"h3",10),P(11,"Sign In"),S(),I(12,"form",11,0),Me("ngSubmit",function(){return se(i),ae(r.login())}),I(14,"input",12),Pe("ngModelChange",function(s){return se(i),$e(r.username,s)||(r.username=s),ae(s)}),S(),I(15,"div",13)(16,"input",14),Pe("ngModelChange",function(s){return se(i),$e(r.password,s)||(r.password=s),ae(s)}),S(),I(17,"button",15),Me("click",function(){return se(i),ae(r.showPassword=!r.showPassword)}),P(18," \u{1F441} "),S()(),I(19,"button",16),P(20),S()(),dn(21,nM,2,1,"div",17),I(22,"div",18)(23,"small"),P(24," Don\u2019t have an account? "),I(25,"a",19),Me("click",function(){return se(i),ae(r.goToSignUp())}),P(26,"Sign up"),S()()()()()()()}if(n&2){let i=yo(13);Q(14),ke("ngModel",r.username),Q(2),Ye("type",r.showPassword?"text":"password"),ke("ngModel",r.password),Q(3),Ye("disabled",i.invalid||r.loading),Q(),Nt(" ",r.loading?"Checking...":"Log In"," "),Q(),Ye("ngIf",r.errorMessage)}},dependencies:[gn,tr,iu,ru,fi,eu,tu,ns,ts,es],styles:[".page-bg[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#498d8d,#e6f6f4,#eefcff)}"]})};function rM(e,t){if(e&1&&(I(0,"div",23)(1,"span"),P(2),S(),I(3,"strong"),P(4),S()()),e&2){let n=t.$implicit;Q(2),wo(n.name),Q(2),Nt("",n.kcal," kcal")}}function iM(e,t){e&1&&(I(0,"div",24),P(1," No meals recorded "),S())}var Mu=class e{constructor(t){this.router=t}userId=Number(localStorage.getItem("user_id"))||null;meals=[];totalCalories=0;async ngOnInit(){if(!this.userId){this.router.navigate([""]);return}await this.loadMeals()}logout(){localStorage.removeItem("user_id"),this.router.navigate([""])}async loadMeals(){let{data:t,error:n}=await Er.from("users_meals").select(`
        kcal,
        meals ( name )
      `).eq("user_id",this.userId);if(n){console.error("Failed loading meals:",n);return}this.meals=(t??[]).map(r=>({name:r.meals?.name??"Unknown meal",kcal:Number(r.kcal)})),this.totalCalories=this.meals.reduce((r,i)=>r+i.kcal,0)}static \u0275fac=function(n){return new(n||e)($(kt))};static \u0275cmp=Ke({type:e,selectors:[["app-user-dashboard"]],decls:37,vars:3,consts:[[1,"d-flex","vh-100"],[1,"bg-dark","text-white","p-3",2,"width","240px"],[1,"mb-4"],[1,"nav","flex-column","gap-2"],[1,"nav-item"],["routerLink","/user-dashboard",1,"nav-link","text-white"],["routerLink","/check-goals",1,"nav-link","text-white"],["routerLink","/check-users",1,"nav-link","text-white"],[1,"nav-item","mt-auto"],[1,"btn","btn-outline-light","w-100",3,"click"],[1,"flex-grow-1","p-4","bg-light"],[1,"row","g-4"],[1,"col-lg-8"],[1,"card","shadow-sm","mb-4","text-center","p-4"],[1,"fw-bold"],[1,"text-muted"],[1,"card","shadow-sm","p-4"],[1,"mb-3"],["id","weeklyChart"],[1,"col-lg-4"],[1,"card","shadow-sm","p-3","h-100"],["class","d-flex justify-content-between border-bottom py-2",4,"ngFor","ngForOf"],["class","text-muted text-center mt-3",4,"ngIf"],[1,"d-flex","justify-content-between","border-bottom","py-2"],[1,"text-muted","text-center","mt-3"]],template:function(n,r){n&1&&(I(0,"div",0)(1,"div",1)(2,"h4",2),P(3,"CalTrack"),S(),I(4,"ul",3)(5,"li",4)(6,"a",5),P(7,"Dashboard"),S()(),I(8,"li",4)(9,"a",6),P(10,"Goals"),S()(),I(11,"li",4)(12,"a",7),P(13,"Users"),S()(),I(14,"li",8)(15,"button",9),Me("click",function(){return r.logout()}),P(16," Sign Out "),S()()()(),I(17,"div",10)(18,"div",11)(19,"div",12)(20,"div",13)(21,"h5"),P(22,"Total calories today"),S(),I(23,"h1",14),P(24),S(),I(25,"span",15),P(26,"kcal"),S()(),I(27,"div",16)(28,"h5",17),P(29,"Weekly intake"),S(),st(30,"canvas",18),S()(),I(31,"div",19)(32,"div",20)(33,"h5",17),P(34,"Meals consumed"),S(),dn(35,rM,5,2,"div",21)(36,iM,2,0,"div",22),S()()()()()),n&2&&(Q(24),wo(r.totalCalories),Q(11),Ye("ngForOf",r.meals),Q(),Ye("ngIf",r.meals.length===0))},dependencies:[gn,oc,tr],encapsulation:2})};var Ru=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ke({type:e,selectors:[["app-nutri-dashboard"]],decls:2,vars:0,template:function(n,r){n&1&&(Ja(0,"p"),P(1,"nutri-dashboard works!"),Za())},encapsulation:2})};function oM(e,t){if(e&1&&(I(0,"div",36),P(1),S()),e&2){let n=mo();Q(),Nt(" ",n.errorMessage," ")}}var Nu=class e{constructor(t,n){this.router=t;this.cdr=n}showPassword=!1;errorMessage="";user={firstName:"",firstLastName:"",secondLastName:"",height:null,weight:null,age:null,phoneNumber:"",username:"",password:""};navigateToLogin(t){t.preventDefault(),this.router.navigate([""])}async createUser(t){let{error:n}=await Er.from("users").insert([{firstName:t.firstName,firstLastName:t.firstLastName,secondLastName:t.secondLastName,height:t.height,weight:t.weight,age:t.age,phoneNumber:t.phoneNumber,username:t.username,password:t.password}]);n?n.code==="23505"?(this.errorMessage="Email already exists",this.cdr.detectChanges()):(this.errorMessage="Something went wrong",this.cdr.detectChanges(),console.error(n)):this.router.navigate([""])}static \u0275fac=function(n){return new(n||e)($(kt),$(qt))};static \u0275cmp=Ke({type:e,selectors:[["app-sign-up"]],decls:66,vars:12,consts:[["form","ngForm"],[1,"page-bg"],[1,"page-bg","vh-100"],[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#sidebar","aria-controls","sidebar",1,"btn","btn-outline-light","me-2"],[1,"navbar-brand","mb-0","h1"],["tabindex","-1","id","sidebar","aria-labelledby","sidebarLabel",1,"offcanvas","offcanvas-start"],[1,"offcanvas-header"],["id","sidebarLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset"],[1,"offcanvas-body","p-0"],[1,"nav","flex-column","p-3"],["data-bs-dismiss","offcanvas",1,"nav-link","active",3,"click"],[1,"container-fluid","pt-4","h-100","d-flex","justify-content-center","align-items-start"],[1,"card","shadow","p-4","w-100",2,"max-width","900px"],[1,"mb-4","text-center"],[3,"ngSubmit"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label"],["name","firstName","required","","maxlength","20",1,"form-control",3,"ngModelChange","ngModel"],["name","firstLastName","required","","maxlength","20",1,"form-control",3,"ngModelChange","ngModel"],["name","secondLastName","required","","maxlength","20",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.01","name","height","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.1","name","weight","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","age","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6"],["type","email","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","phoneNumber","maxlength","20","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-12"],[1,"input-group"],["name","password","required","",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["class","text-danger mt-3",4,"ngIf"],[1,"btn","btn-success","w-100","mt-4",3,"disabled"],[1,"text-danger","mt-3"]],template:function(n,r){if(n&1){let i=po();I(0,"div",1)(1,"div",2)(2,"nav",3)(3,"div",4)(4,"button",5),P(5," \u2630 "),S(),I(6,"span",6),P(7,"CalTrack"),S()()(),I(8,"div",7)(9,"div",8)(10,"h5",9),P(11,"Menu"),S(),st(12,"button",10),S(),I(13,"div",11)(14,"nav",12)(15,"a",13),Me("click",function(s){return se(i),ae(r.navigateToLogin(s))}),P(16," \u2190 Back to Login "),S()()()(),I(17,"div",14)(18,"div",15)(19,"h2",16),P(20,"Create Account"),S(),I(21,"form",17,0),Me("ngSubmit",function(){return se(i),ae(r.createUser(r.user))}),I(23,"div",18)(24,"div",19)(25,"label",20),P(26,"Name"),S(),I(27,"input",21),Pe("ngModelChange",function(s){return se(i),$e(r.user.firstName,s)||(r.user.firstName=s),ae(s)}),S()(),I(28,"div",19)(29,"label",20),P(30,"First Last Name"),S(),I(31,"input",22),Pe("ngModelChange",function(s){return se(i),$e(r.user.firstLastName,s)||(r.user.firstLastName=s),ae(s)}),S()(),I(32,"div",19)(33,"label",20),P(34,"Second Last Name"),S(),I(35,"input",23),Pe("ngModelChange",function(s){return se(i),$e(r.user.secondLastName,s)||(r.user.secondLastName=s),ae(s)}),S()(),I(36,"div",19)(37,"label",20),P(38,"Height (m)"),S(),I(39,"input",24),Pe("ngModelChange",function(s){return se(i),$e(r.user.height,s)||(r.user.height=s),ae(s)}),S()(),I(40,"div",19)(41,"label",20),P(42,"Weight (kg)"),S(),I(43,"input",25),Pe("ngModelChange",function(s){return se(i),$e(r.user.weight,s)||(r.user.weight=s),ae(s)}),S()(),I(44,"div",19)(45,"label",20),P(46,"Age"),S(),I(47,"input",26),Pe("ngModelChange",function(s){return se(i),$e(r.user.age,s)||(r.user.age=s),ae(s)}),S()(),I(48,"div",27)(49,"label",20),P(50,"Email"),S(),I(51,"input",28),Pe("ngModelChange",function(s){return se(i),$e(r.user.username,s)||(r.user.username=s),ae(s)}),S()(),I(52,"div",27)(53,"label",20),P(54,"Phone Number"),S(),I(55,"input",29),Pe("ngModelChange",function(s){return se(i),$e(r.user.phoneNumber,s)||(r.user.phoneNumber=s),ae(s)}),S()(),I(56,"div",30)(57,"label",20),P(58,"Password"),S(),I(59,"div",31)(60,"input",32),Pe("ngModelChange",function(s){return se(i),$e(r.user.password,s)||(r.user.password=s),ae(s)}),S(),I(61,"button",33),Me("click",function(){return se(i),ae(r.showPassword=!r.showPassword)}),P(62," \u{1F441} "),S()()()(),dn(63,oM,2,1,"div",34),I(64,"button",35),P(65," Create User "),S()()()()()()}if(n&2){let i=yo(22);Q(27),ke("ngModel",r.user.firstName),Q(4),ke("ngModel",r.user.firstLastName),Q(4),ke("ngModel",r.user.secondLastName),Q(4),ke("ngModel",r.user.height),Q(4),ke("ngModel",r.user.weight),Q(4),ke("ngModel",r.user.age),Q(4),ke("ngModel",r.user.username),Q(4),ke("ngModel",r.user.phoneNumber),Q(5),Ye("type",r.showPassword?"text":"password"),ke("ngModel",r.user.password),Q(3),Ye("ngIf",r.errorMessage),Q(),Ye("disabled",i.invalid)}},dependencies:[gn,tr,iu,ru,fi,sh,eu,tu,ns,ah,ts,es],styles:[".page-bg[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#498d8d,#e6f6f4,#eefcff)}"]})};var l_=[{path:"",component:Au},{path:"user-dashboard",component:Mu},{path:"nutri-dashboard",component:Ru},{path:"sign-up",component:Nu}];var d_={providers:[Zf(l_),Af()]};Df(zc,d_);
