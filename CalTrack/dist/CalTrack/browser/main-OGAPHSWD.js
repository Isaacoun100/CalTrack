var Qw=Object.defineProperty,Xw=Object.defineProperties;var e_=Object.getOwnPropertyDescriptors;var wh=Object.getOwnPropertySymbols;var t_=Object.prototype.hasOwnProperty,n_=Object.prototype.propertyIsEnumerable;var _h=(e,t,n)=>t in e?Qw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_=(e,t)=>{for(var n in t||={})t_.call(t,n)&&_h(e,n,t[n]);if(wh)for(var n of wh(t))n_.call(t,n)&&_h(e,n,t[n]);return e},$=(e,t)=>Xw(e,e_(t));var Te=null,Ds=!1,Nu=1,r_=null,Me=Symbol("SIGNAL");function F(e){let t=Te;return Te=e,t}function Is(){return Te}var Di={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Ci(e){if(Ds)throw new Error("");if(Te===null)return;Te.consumerOnSignalRead(e);let t=Te.producersTail;if(t!==void 0&&t.producer===e)return;let n,r=Te.recomputing;if(r&&(n=t!==void 0?t.nextProducer:Te.producers,n!==void 0&&n.producer===e)){Te.producersTail=n,n.lastReadVersion=e.version;return}let i=e.consumersTail;if(i!==void 0&&i.consumer===Te&&(!r||o_(i,Te)))return;let o=yr(Te),s={producer:e,consumer:Te,nextProducer:n,prevConsumer:i,lastReadVersion:e.version,nextConsumer:void 0};Te.producersTail=s,t!==void 0?t.nextProducer=s:Te.producers=s,o&&Ch(e,s)}function bh(){Nu++}function xu(e){if(!(yr(e)&&!e.dirty)&&!(!e.dirty&&e.lastCleanEpoch===Nu)){if(!e.producerMustRecompute(e)&&!Ts(e)){Ru(e);return}e.producerRecomputeValue(e),Ru(e)}}function Ou(e){if(e.consumers===void 0)return;let t=Ds;Ds=!0;try{for(let n=e.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||i_(r)}}finally{Ds=t}}function ku(){return Te?.consumerAllowSignalWrites!==!1}function i_(e){e.dirty=!0,Ou(e),e.consumerMarkedDirty?.(e)}function Ru(e){e.dirty=!1,e.lastCleanEpoch=Nu}function Ii(e){return e&&Eh(e),F(e)}function Eh(e){e.producersTail=void 0,e.recomputing=!0}function Ss(e,t){F(t),e&&Dh(e)}function Dh(e){e.recomputing=!1;let t=e.producersTail,n=t!==void 0?t.nextProducer:e.producers;if(n!==void 0){if(yr(e))do n=Pu(n);while(n!==void 0);t!==void 0?t.nextProducer=void 0:e.producers=void 0}}function Ts(e){for(let t=e.producers;t!==void 0;t=t.nextProducer){let n=t.producer,r=t.lastReadVersion;if(r!==n.version||(xu(n),r!==n.version))return!0}return!1}function Si(e){if(yr(e)){let t=e.producers;for(;t!==void 0;)t=Pu(t)}e.producers=void 0,e.producersTail=void 0,e.consumers=void 0,e.consumersTail=void 0}function Ch(e,t){let n=e.consumersTail,r=yr(e);if(n!==void 0?(t.nextConsumer=n.nextConsumer,n.nextConsumer=t):(t.nextConsumer=void 0,e.consumers=t),t.prevConsumer=n,e.consumersTail=t,!r)for(let i=e.producers;i!==void 0;i=i.nextProducer)Ch(i.producer,i)}function Pu(e){let t=e.producer,n=e.nextProducer,r=e.nextConsumer,i=e.prevConsumer;if(e.nextConsumer=void 0,e.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:t.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(t.consumers=r,!yr(t)){let o=t.producers;for(;o!==void 0;)o=Pu(o)}return n}function yr(e){return e.consumerIsAlwaysLive||e.consumers!==void 0}function Fu(e){r_?.(e)}function o_(e,t){let n=t.producersTail;if(n!==void 0){let r=t.producers;do{if(r===e)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function Lu(e,t){return Object.is(e,t)}function As(e,t){let n=Object.create(s_);n.computation=e,t!==void 0&&(n.equal=t);let r=()=>{if(xu(n),Ci(n),n.value===Cs)throw n.error;return n.value};return r[Me]=n,Fu(n),r}var Au=Symbol("UNSET"),Mu=Symbol("COMPUTING"),Cs=Symbol("ERRORED"),s_=$(_({},Di),{value:Au,dirty:!0,error:null,equal:Lu,kind:"computed",producerMustRecompute(e){return e.value===Au||e.value===Mu},producerRecomputeValue(e){if(e.value===Mu)throw new Error("");let t=e.value;e.value=Mu;let n=Ii(e),r,i=!1;try{r=e.computation(),F(null),i=t!==Au&&t!==Cs&&r!==Cs&&e.equal(t,r)}catch(o){r=Cs,e.error=o}finally{Ss(e,n)}if(i){e.value=t;return}e.value=r,e.version++}});function a_(){throw new Error}var Ih=a_;function Sh(e){Ih(e)}function ju(e){Ih=e}var c_=null;function Vu(e,t){let n=Object.create(Ms);n.value=e,t!==void 0&&(n.equal=t);let r=()=>Th(n);return r[Me]=n,Fu(n),[r,s=>Ti(n,s),s=>Ah(n,s)]}function Th(e){return Ci(e),e.value}function Ti(e,t){ku()||Sh(e),e.equal(e.value,t)||(e.value=t,u_(e))}function Ah(e,t){ku()||Sh(e),Ti(e,t(e.value))}var Ms=$(_({},Di),{equal:Lu,value:void 0,kind:"signal"});function u_(e){e.version++,bh(),Ou(e),c_?.(e)}function Uu(e){let t=F(null);try{return e()}finally{F(t)}}function x(e){return typeof e=="function"}function vr(e){let n=e(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Rs=vr(e=>function(n){e(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ai(e,t){if(e){let n=e.indexOf(t);0<=n&&e.splice(n,1)}}var _e=class e{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(x(r))try{r()}catch(o){t=o instanceof Rs?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{Mh(o)}catch(s){t=t??[],s instanceof Rs?t=[...t,...s.errors]:t.push(s)}}if(t)throw new Rs(t)}}add(t){var n;if(t&&t!==this)if(this.closed)Mh(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}}_hasParent(t){let{_parentage:n}=this;return n===t||Array.isArray(n)&&n.includes(t)}_addParent(t){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t}_removeParent(t){let{_parentage:n}=this;n===t?this._parentage=null:Array.isArray(n)&&Ai(n,t)}remove(t){let{_finalizers:n}=this;n&&Ai(n,t),t instanceof e&&t._removeParent(this)}};_e.EMPTY=(()=>{let e=new _e;return e.closed=!0,e})();var Bu=_e.EMPTY;function Ns(e){return e instanceof _e||e&&"closed"in e&&x(e.remove)&&x(e.add)&&x(e.unsubscribe)}function Mh(e){x(e)?e():e.unsubscribe()}var ut={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var wr={setTimeout(e,t,...n){let{delegate:r}=wr;return r?.setTimeout?r.setTimeout(e,t,...n):setTimeout(e,t,...n)},clearTimeout(e){let{delegate:t}=wr;return(t?.clearTimeout||clearTimeout)(e)},delegate:void 0};function xs(e){wr.setTimeout(()=>{let{onUnhandledError:t}=ut;if(t)t(e);else throw e})}function Mi(){}var Rh=$u("C",void 0,void 0);function Nh(e){return $u("E",void 0,e)}function xh(e){return $u("N",e,void 0)}function $u(e,t,n){return{kind:e,value:t,error:n}}var bn=null;function _r(e){if(ut.useDeprecatedSynchronousErrorHandling){let t=!bn;if(t&&(bn={errorThrown:!1,error:null}),e(),t){let{errorThrown:n,error:r}=bn;if(bn=null,n)throw r}}else e()}function Oh(e){ut.useDeprecatedSynchronousErrorHandling&&bn&&(bn.errorThrown=!0,bn.error=e)}var En=class extends _e{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Ns(t)&&t.add(this)):this.destination=f_}static create(t,n,r){return new br(t,n,r)}next(t){this.isStopped?zu(xh(t),this):this._next(t)}error(t){this.isStopped?zu(Nh(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?zu(Rh,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},l_=Function.prototype.bind;function Hu(e,t){return l_.call(e,t)}var Gu=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:n}=this;if(n.next)try{n.next(t)}catch(r){Os(r)}}error(t){let{partialObserver:n}=this;if(n.error)try{n.error(t)}catch(r){Os(r)}else Os(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(n){Os(n)}}},br=class extends En{constructor(t,n,r){super();let i;if(x(t)||!t)i={next:t??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&ut.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),i={next:t.next&&Hu(t.next,o),error:t.error&&Hu(t.error,o),complete:t.complete&&Hu(t.complete,o)}):i=t}this.destination=new Gu(i)}};function Os(e){ut.useDeprecatedSynchronousErrorHandling?Oh(e):xs(e)}function d_(e){throw e}function zu(e,t){let{onStoppedNotification:n}=ut;n&&wr.setTimeout(()=>n(e,t))}var f_={closed:!0,next:Mi,error:d_,complete:Mi};var Er=typeof Symbol=="function"&&Symbol.observable||"@@observable";function lt(e){return e}function qu(...e){return Wu(e)}function Wu(e){return e.length===0?lt:e.length===1?e[0]:function(n){return e.reduce((r,i)=>i(r),n)}}var U=(()=>{class e{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=p_(n)?n:new br(n,r,i);return _r(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=kh(r),new r((i,o)=>{let s=new br({next:a=>{try{n(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Er](){return this}pipe(...n){return Wu(n)(this)}toPromise(n){return n=kh(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return e.create=t=>new e(t),e})();function kh(e){var t;return(t=e??ut.Promise)!==null&&t!==void 0?t:Promise}function h_(e){return e&&x(e.next)&&x(e.error)&&x(e.complete)}function p_(e){return e&&e instanceof En||h_(e)&&Ns(e)}function g_(e){return x(e?.lift)}function W(e){return t=>{if(g_(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function K(e,t,n,r,i){return new Ku(e,t,n,r,i)}var Ku=class extends En{constructor(t,n,r,i,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){t.error(c)}}:super._next,this._error=i?function(a){try{i(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};var Ph=vr(e=>function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ge=(()=>{class e extends U{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new ks(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new Ph}next(n){_r(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){_r(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){_r(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?Bu:(this.currentObservers=null,o.push(n),new _e(()=>{this.currentObservers=null,Ai(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new U;return n.source=this,n}}return e.create=(t,n)=>new ks(t,n),e})(),ks=class extends ge{constructor(t,n){super(),this.destination=t,this.source=n}next(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,t)}error(t){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,t)}complete(){var t,n;(n=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||n===void 0||n.call(t)}_subscribe(t){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(t))!==null&&r!==void 0?r:Bu}};var be=class extends ge{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let n=super._subscribe(t);return!n.closed&&t.next(this._value),n}getValue(){let{hasError:t,thrownError:n,_value:r}=this;if(t)throw n;return this._throwIfClosed(),r}next(t){super.next(this._value=t)}};var Fe=new U(e=>e.complete());function Fh(e){return e&&x(e.schedule)}function Lh(e){return e[e.length-1]}function Ps(e){return x(Lh(e))?e.pop():void 0}function Yt(e){return Fh(Lh(e))?e.pop():void 0}function Cn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Fs(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?o(l.value):i(l.value).then(a,c)}u((r=r.apply(e,t||[])).next())})}function jh(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Dn(e){return this instanceof Dn?(this.v=e,this):new Dn(e)}function Vh(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(f){return function(p){return Promise.resolve(p).then(f,d)}}function a(f,p){r[f]&&(i[f]=function(m){return new Promise(function(y,g){o.push([f,m,y,g])>1||c(f,m)})},p&&(i[f]=p(i[f])))}function c(f,p){try{u(r[f](p))}catch(m){h(o[0][3],m)}}function u(f){f.value instanceof Dn?Promise.resolve(f.value.v).then(l,d):h(o[0][2],f)}function l(f){c("next",f)}function d(f){c("throw",f)}function h(f,p){f(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function Uh(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof jh=="function"?jh(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(a,c){s=e[o](s),i(a,c,s.done,s.value)})}}function i(o,s,a,c){Promise.resolve(c).then(function(u){o({value:u,done:a})},s)}}var Ls=e=>e&&typeof e.length=="number"&&typeof e!="function";function js(e){return x(e?.then)}function Vs(e){return x(e[Er])}function Us(e){return Symbol.asyncIterator&&x(e?.[Symbol.asyncIterator])}function Bs(e){return new TypeError(`You provided ${e!==null&&typeof e=="object"?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function m_(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var $s=m_();function Hs(e){return x(e?.[$s])}function zs(e){return Vh(this,arguments,function*(){let n=e.getReader();try{for(;;){let{value:r,done:i}=yield Dn(n.read());if(i)return yield Dn(void 0);yield yield Dn(r)}}finally{n.releaseLock()}})}function Gs(e){return x(e?.getReader)}function ce(e){if(e instanceof U)return e;if(e!=null){if(Vs(e))return y_(e);if(Ls(e))return v_(e);if(js(e))return w_(e);if(Us(e))return Bh(e);if(Hs(e))return __(e);if(Gs(e))return b_(e)}throw Bs(e)}function y_(e){return new U(t=>{let n=e[Er]();if(x(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function v_(e){return new U(t=>{for(let n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function w_(e){return new U(t=>{e.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,xs)})}function __(e){return new U(t=>{for(let n of e)if(t.next(n),t.closed)return;t.complete()})}function Bh(e){return new U(t=>{E_(e,t).catch(n=>t.error(n))})}function b_(e){return Bh(zs(e))}function E_(e,t){var n,r,i,o;return Fs(this,void 0,void 0,function*(){try{for(n=Uh(e);r=yield n.next(),!r.done;){let s=r.value;if(t.next(s),t.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}t.complete()})}function Le(e,t,n,r=0,i=!1){let o=t.schedule(function(){n(),i?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(o),!i)return o}function qs(e,t=0){return W((n,r)=>{n.subscribe(K(r,i=>Le(r,e,()=>r.next(i),t),()=>Le(r,e,()=>r.complete(),t),i=>Le(r,e,()=>r.error(i),t)))})}function Ws(e,t=0){return W((n,r)=>{r.add(e.schedule(()=>n.subscribe(r),t))})}function $h(e,t){return ce(e).pipe(Ws(t),qs(t))}function Hh(e,t){return ce(e).pipe(Ws(t),qs(t))}function zh(e,t){return new U(n=>{let r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function Gh(e,t){return new U(n=>{let r;return Le(n,t,()=>{r=e[$s](),Le(n,t,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>x(r?.return)&&r.return()})}function Ks(e,t){if(!e)throw new Error("Iterable cannot be null");return new U(n=>{Le(n,t,()=>{let r=e[Symbol.asyncIterator]();Le(n,t,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function qh(e,t){return Ks(zs(e),t)}function Wh(e,t){if(e!=null){if(Vs(e))return $h(e,t);if(Ls(e))return zh(e,t);if(js(e))return Hh(e,t);if(Us(e))return Ks(e,t);if(Hs(e))return Gh(e,t);if(Gs(e))return qh(e,t)}throw Bs(e)}function ue(e,t){return t?Wh(e,t):ce(e)}function j(...e){let t=Yt(e);return ue(e,t)}function Yu(e,t){let n=x(e)?e:()=>e,r=i=>i.error(n());return new U(t?i=>t.schedule(r,0,i):r)}function Ys(e){return!!e&&(e instanceof U||x(e.lift)&&x(e.subscribe))}var In=vr(e=>function(){e(this),this.name="EmptyError",this.message="no elements in sequence"});function H(e,t){return W((n,r)=>{let i=0;n.subscribe(K(r,o=>{r.next(e.call(t,o,i++))}))})}var{isArray:D_}=Array;function C_(e,t){return D_(t)?e(...t):e(t)}function Js(e){return H(t=>C_(e,t))}var{isArray:I_}=Array,{getPrototypeOf:S_,prototype:T_,keys:A_}=Object;function Zs(e){if(e.length===1){let t=e[0];if(I_(t))return{args:t,keys:null};if(M_(t)){let n=A_(t);return{args:n.map(r=>t[r]),keys:n}}}return{args:e,keys:null}}function M_(e){return e&&typeof e=="object"&&S_(e)===T_}function Qs(e,t){return e.reduce((n,r,i)=>(n[r]=t[i],n),{})}function Ju(...e){let t=Yt(e),n=Ps(e),{args:r,keys:i}=Zs(e);if(r.length===0)return ue([],t);let o=new U(R_(r,t,i?s=>Qs(i,s):lt));return n?o.pipe(Js(n)):o}function R_(e,t,n=lt){return r=>{Kh(t,()=>{let{length:i}=e,o=new Array(i),s=i,a=i;for(let c=0;c<i;c++)Kh(t,()=>{let u=ue(e[c],t),l=!1;u.subscribe(K(r,d=>{o[c]=d,l||(l=!0,a--),a||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function Kh(e,t,n){e?Le(n,e,t):t()}function Yh(e,t,n,r,i,o,s,a){let c=[],u=0,l=0,d=!1,h=()=>{d&&!c.length&&!u&&t.complete()},f=m=>u<r?p(m):c.push(m),p=m=>{o&&t.next(m),u++;let y=!1;ce(n(m,l++)).subscribe(K(t,g=>{i?.(g),o?f(g):t.next(g)},()=>{y=!0},void 0,()=>{if(y)try{for(u--;c.length&&u<r;){let g=c.shift();s?Le(t,s,()=>p(g)):p(g)}h()}catch(g){t.error(g)}}))};return e.subscribe(K(t,f,()=>{d=!0,h()})),()=>{a?.()}}function Re(e,t,n=1/0){return x(t)?Re((r,i)=>H((o,s)=>t(r,o,i,s))(ce(e(r,i))),n):(typeof t=="number"&&(n=t),W((r,i)=>Yh(r,i,e,n)))}function Jh(e=1/0){return Re(lt,e)}function Zh(){return Jh(1)}function Dr(...e){return Zh()(ue(e,Yt(e)))}function Ri(e){return new U(t=>{ce(e()).subscribe(t)})}function Zu(...e){let t=Ps(e),{args:n,keys:r}=Zs(e),i=new U(o=>{let{length:s}=n;if(!s){o.complete();return}let a=new Array(s),c=s,u=s;for(let l=0;l<s;l++){let d=!1;ce(n[l]).subscribe(K(o,h=>{d||(d=!0,u--),a[l]=h},()=>c--,void 0,()=>{(!c||!d)&&(u||o.next(r?Qs(r,a):a),o.complete())}))}});return t?i.pipe(Js(t)):i}function Ze(e,t){return W((n,r)=>{let i=0;n.subscribe(K(r,o=>e.call(t,o,i++)&&r.next(o)))})}function Ni(e){return W((t,n)=>{let r=null,i=!1,o;r=t.subscribe(K(n,void 0,void 0,s=>{o=ce(e(s,Ni(e)(t))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function Cr(e,t){return x(t)?Re(e,t,1):Re(e,1)}function Qu(e){return W((t,n)=>{let r=!1;t.subscribe(K(n,i=>{r=!0,n.next(i)},()=>{r||n.next(e),n.complete()}))})}function Pt(e){return e<=0?()=>Fe:W((t,n)=>{let r=0;t.subscribe(K(n,i=>{++r<=e&&(n.next(i),e<=r&&n.complete())}))})}function Qh(e=N_){return W((t,n)=>{let r=!1;t.subscribe(K(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(e())))})}function N_(){return new In}function xi(e){return W((t,n)=>{try{t.subscribe(n)}finally{n.add(e)}})}function Ft(e,t){let n=arguments.length>=2;return r=>r.pipe(e?Ze((i,o)=>e(i,o,r)):lt,Pt(1),n?Qu(t):Qh(()=>new In))}function Xs(e){return e<=0?()=>Fe:W((t,n)=>{let r=[];t.subscribe(K(n,i=>{r.push(i),e<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Xu(...e){let t=Yt(e);return W((n,r)=>{(t?Dr(e,n,t):Dr(e,n)).subscribe(r)})}function Qe(e,t){return W((n,r)=>{let i=null,o=0,s=!1,a=()=>s&&!i&&r.complete();n.subscribe(K(r,c=>{i?.unsubscribe();let u=0,l=o++;ce(e(c,l)).subscribe(i=K(r,d=>r.next(t?t(c,d,l,u++):d),()=>{i=null,a()}))},()=>{s=!0,a()}))})}function Oi(e){return W((t,n)=>{ce(e).subscribe(K(n,()=>n.complete(),Mi)),!n.closed&&t.subscribe(n)})}function Ne(e,t,n){let r=x(e)||t||n?{next:e,error:t,complete:n}:e;return r?W((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;i.subscribe(K(o,c=>{var u;(u=r.next)===null||u===void 0||u.call(r,c),o.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),o.complete()},c=>{var u;a=!1,(u=r.error)===null||u===void 0||u.call(r,c),o.error(c)},()=>{var c,u;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(u=r.finalize)===null||u===void 0||u.call(r)}))}):lt}var el;function ea(){return el}function Dt(e){let t=el;return el=e,t}var Xh=Symbol("NotFound");function Ir(e){return e===Xh||e?.name==="\u0275NotFound"}var gl="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",E=class extends Error{code;constructor(t,n){super(xn(t,n)),this.code=t}};function k_(e){return`NG0${Math.abs(e)}`}function xn(e,t){return`${k_(e)}${t?": "+t:""}`}function Y(e){for(let t in e)if(e[t]===Y)return t;throw Error("")}function ip(e,t){for(let n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function jt(e){if(typeof e=="string")return e;if(Array.isArray(e))return`[${e.map(jt).join(", ")}]`;if(e==null)return""+e;let t=e.overriddenName||e.name;if(t)return`${t}`;let n=e.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function ml(e,t){return e?t?`${e} ${t}`:e:t||""}var P_=Y({__forward_ref__:Y});function ft(e){return e.__forward_ref__=ft,e.toString=function(){return jt(this())},e}function Ee(e){return yl(e)?e():e}function yl(e){return typeof e=="function"&&e.hasOwnProperty(P_)&&e.__forward_ref__===ft}function I(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function Ct(e){return{providers:e.providers||[],imports:e.imports||[]}}function Vi(e){return F_(e,oa)}function vl(e){return Vi(e)!==null}function F_(e,t){return e.hasOwnProperty(t)&&e[t]||null}function L_(e){let t=e?.[oa]??null;return t||null}function nl(e){return e&&e.hasOwnProperty(na)?e[na]:null}var oa=Y({\u0275prov:Y}),na=Y({\u0275inj:Y}),C=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(t,n){this._desc=t,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=I({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function wl(e){return e&&!!e.\u0275providers}var _l=Y({\u0275cmp:Y}),bl=Y({\u0275dir:Y}),El=Y({\u0275pipe:Y}),Dl=Y({\u0275mod:Y}),Pi=Y({\u0275fac:Y}),On=Y({__NG_ELEMENT_ID__:Y}),ep=Y({__NG_ENV_ID__:Y});function Cl(e){return sa(e,"@NgModule"),e[Dl]||null}function Zt(e){return sa(e,"@Component"),e[_l]||null}function Il(e){return sa(e,"@Directive"),e[bl]||null}function op(e){return sa(e,"@Pipe"),e[El]||null}function sa(e,t){if(e==null)throw new E(-919,!1)}function aa(e){return typeof e=="string"?e:e==null?"":String(e)}function sp(e){return typeof e=="function"?e.name||e.toString():typeof e=="object"&&e!=null&&typeof e.type=="function"?e.type.name||e.type.toString():aa(e)}var ap=Y({ngErrorCode:Y}),j_=Y({ngErrorMessage:Y}),V_=Y({ngTokenPath:Y});function Sl(e,t){return cp("",-200,t)}function ca(e,t){throw new E(-201,!1)}function cp(e,t,n){let r=new E(t,e);return r[ap]=t,r[j_]=e,n&&(r[V_]=n),r}function U_(e){return e[ap]}var rl;function up(){return rl}function ze(e){let t=rl;return rl=e,t}function Tl(e,t,n){let r=Vi(e);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(t!==void 0)return t;ca(e,"")}var B_={},Sn=B_,$_="__NG_DI_FLAG__",il=class{injector;constructor(t){this.injector=t}retrieve(t,n){let r=Tn(n)||0;try{return this.injector.get(t,r&8?null:Sn,r)}catch(i){if(Ir(i))return i;throw i}}};function H_(e,t=0){let n=ea();if(n===void 0)throw new E(-203,!1);if(n===null)return Tl(e,void 0,t);{let r=z_(t),i=n.retrieve(e,r);if(Ir(i)){if(r.optional)return null;throw i}return i}}function M(e,t=0){return(up()||H_)(Ee(e),t)}function v(e,t){return M(e,Tn(t))}function Tn(e){return typeof e>"u"||typeof e=="number"?e:0|(e.optional&&8)|(e.host&&1)|(e.self&&2)|(e.skipSelf&&4)}function z_(e){return{optional:!!(e&8),host:!!(e&1),self:!!(e&2),skipSelf:!!(e&4)}}function ol(e){let t=[];for(let n=0;n<e.length;n++){let r=Ee(e[n]);if(Array.isArray(r)){if(r.length===0)throw new E(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let a=r[s],c=G_(a);typeof c=="number"?c===-1?i=a.token:o|=c:i=a}t.push(M(i,o))}else t.push(M(r))}return t}function G_(e){return e[$_]}function An(e,t){let n=e.hasOwnProperty(Pi);return n?e[Pi]:null}function ua(e,t){e.forEach(n=>Array.isArray(n)?ua(n,t):t(n))}function Al(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function Ui(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function lp(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(i===1)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;){let o=i-2;e[i]=e[o],i--}e[t]=n,e[t+1]=r}}function dp(e,t,n){let r=Tr(e,t);return r>=0?e[r|1]=n:(r=~r,lp(e,r,t,n)),r}function la(e,t){let n=Tr(e,t);if(n>=0)return e[n|1]}function Tr(e,t){return q_(e,t,1)}function q_(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=e[o<<n];if(t===s)return o<<n;s>t?i=o:r=o+1}return~(i<<n)}var Qt={},Ge=[],Ar=new C(""),Ml=new C("",-1),Rl=new C(""),Fi=class{get(t,n=Sn){if(n===Sn){let i=cp("",-201);throw i.name="\u0275NotFound",i}return n}};function kn(e){return{\u0275providers:e}}function fp(...e){return{\u0275providers:Nl(!0,e),\u0275fromNgModule:!0}}function Nl(e,...t){let n=[],r=new Set,i,o=s=>{n.push(s)};return ua(t,s=>{let a=s;ra(a,o,[],r)&&(i||=[],i.push(a))}),i!==void 0&&hp(i,o),n}function hp(e,t){for(let n=0;n<e.length;n++){let{ngModule:r,providers:i}=e[n];xl(i,o=>{t(o,r)})}}function ra(e,t,n,r){if(e=Ee(e),!e)return!1;let i=null,o=nl(e),s=!o&&Zt(e);if(!o&&!s){let c=e.ngModule;if(o=nl(c),o)i=c;else return!1}else{if(s&&!s.standalone)return!1;i=e}let a=r.has(i);if(s){if(a)return!1;if(r.add(i),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let u of c)ra(u,t,n,r)}}else if(o){if(o.imports!=null&&!a){r.add(i);let u;try{ua(o.imports,l=>{ra(l,t,n,r)&&(u||=[],u.push(l))})}finally{}u!==void 0&&hp(u,t)}if(!a){let u=An(i)||(()=>new i);t({provide:i,useFactory:u,deps:Ge},i),t({provide:Rl,useValue:i,multi:!0},i),t({provide:Ar,useValue:()=>M(i),multi:!0},i)}let c=o.providers;if(c!=null&&!a){let u=e;xl(c,l=>{t(l,u)})}}else return!1;return i!==e&&e.providers!==void 0}function xl(e,t){for(let n of e)wl(n)&&(n=n.\u0275providers),Array.isArray(n)?xl(n,t):t(n)}var W_=Y({provide:String,useValue:Y});function pp(e){return e!==null&&typeof e=="object"&&W_ in e}function K_(e){return!!(e&&e.useExisting)}function Y_(e){return!!(e&&e.useFactory)}function Mn(e){return typeof e=="function"}function gp(e){return!!e.useClass}var Bi=new C(""),ta={},tp={},tl;function $i(){return tl===void 0&&(tl=new Fi),tl}var de=class{},Rn=class extends de{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(t,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,al(t,s=>this.processProvider(s)),this.records.set(Ml,Sr(void 0,this)),i.has("environment")&&this.records.set(de,Sr(void 0,this));let o=this.records.get(Bi);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(Rl,Ge,{self:!0}))}retrieve(t,n){let r=Tn(n)||0;try{return this.get(t,Sn,r)}catch(i){if(Ir(i))return i;throw i}}destroy(){ki(this),this._destroyed=!0;let t=F(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),F(t)}}onDestroy(t){return ki(this),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){ki(this);let n=Dt(this),r=ze(void 0),i;try{return t()}finally{Dt(n),ze(r)}}get(t,n=Sn,r){if(ki(this),t.hasOwnProperty(ep))return t[ep](this);let i=Tn(r),o,s=Dt(this),a=ze(void 0);try{if(!(i&4)){let u=this.records.get(t);if(u===void 0){let l=eb(t)&&Vi(t);l&&this.injectableDefInScope(l)?u=Sr(sl(t),ta):u=null,this.records.set(t,u)}if(u!=null)return this.hydrate(t,u,i)}let c=i&2?$i():this.parent;return n=i&8&&n===Sn?null:n,c.get(t,n)}catch(c){let u=U_(c);throw u===-200||u===-201?new E(u,null):c}finally{ze(a),Dt(s)}}resolveInjectorInitializers(){let t=F(null),n=Dt(this),r=ze(void 0),i;try{let o=this.get(Ar,Ge,{self:!0});for(let s of o)s()}finally{Dt(n),ze(r),F(t)}}toString(){let t=[],n=this.records;for(let r of n.keys())t.push(jt(r));return`R3Injector[${t.join(", ")}]`}processProvider(t){t=Ee(t);let n=Mn(t)?t:Ee(t&&t.provide),r=Z_(t);if(!Mn(t)&&t.multi===!0){let i=this.records.get(n);i||(i=Sr(void 0,ta,!0),i.factory=()=>ol(i.multi),this.records.set(n,i)),n=t,i.multi.push(t)}this.records.set(n,r)}hydrate(t,n,r){let i=F(null);try{if(n.value===tp)throw Sl(jt(t));return n.value===ta&&(n.value=tp,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&X_(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{F(i)}}injectableDefInScope(t){if(!t.providedIn)return!1;let n=Ee(t.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(t){let n=this._onDestroyHooks.indexOf(t);n!==-1&&this._onDestroyHooks.splice(n,1)}};function sl(e){let t=Vi(e),n=t!==null?t.factory:An(e);if(n!==null)return n;if(e instanceof C)throw new E(204,!1);if(e instanceof Function)return J_(e);throw new E(204,!1)}function J_(e){if(e.length>0)throw new E(204,!1);let n=L_(e);return n!==null?()=>n.factory(e):()=>new e}function Z_(e){if(pp(e))return Sr(void 0,e.useValue);{let t=Ol(e);return Sr(t,ta)}}function Ol(e,t,n){let r;if(Mn(e)){let i=Ee(e);return An(i)||sl(i)}else if(pp(e))r=()=>Ee(e.useValue);else if(Y_(e))r=()=>e.useFactory(...ol(e.deps||[]));else if(K_(e))r=(i,o)=>M(Ee(e.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ee(e&&(e.useClass||e.provide));if(Q_(e))r=()=>new i(...ol(e.deps));else return An(i)||sl(i)}return r}function ki(e){if(e.destroyed)throw new E(205,!1)}function Sr(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Q_(e){return!!e.deps}function X_(e){return e!==null&&typeof e=="object"&&typeof e.ngOnDestroy=="function"}function eb(e){return typeof e=="function"||typeof e=="object"&&e.ngMetadataName==="InjectionToken"}function al(e,t){for(let n of e)Array.isArray(n)?al(n,t):n&&wl(n)?al(n.\u0275providers,t):t(n)}function Ce(e,t){let n;e instanceof Rn?(ki(e),n=e):n=new il(e);let r,i=Dt(n),o=ze(void 0);try{return t()}finally{Dt(i),ze(o)}}function mp(){return up()!==void 0||ea()!=null}var ht=0,P=1,O=2,De=3,Xe=4,et=5,Hi=6,Mr=7,Ae=8,Xt=9,Ut=10,re=11,Rr=12,kl=13,Pn=14,tt=15,Fn=16,Ln=17,jn=18,en=19,Pl=20,Lt=21,da=22,zi=23,qe=24,fa=25,Gi=26,xe=27,yp=1;var tn=7,qi=8,Wi=9,Ve=10;function It(e){return Array.isArray(e)&&typeof e[yp]=="object"}function pt(e){return Array.isArray(e)&&e[yp]===!0}function Fl(e){return(e.flags&4)!==0}function nn(e){return e.componentOffset>-1}function Ki(e){return(e.flags&1)===1}function St(e){return!!e.template}function Nr(e){return(e[O]&512)!==0}function Vn(e){return(e[O]&256)===256}var vp="svg",wp="math";function nt(e){for(;Array.isArray(e);)e=e[ht];return e}function Ll(e,t){return nt(t[e])}function gt(e,t){return nt(t[e.index])}function ha(e,t){return e.data[t]}function _p(e,t){return e[t]}function rt(e,t){let n=t[e];return It(n)?n:n[ht]}function pa(e){return(e[O]&128)===128}function bp(e){return pt(e[De])}function Un(e,t){return t==null?null:e[t]}function jl(e){e[Ln]=0}function Vl(e){e[O]&1024||(e[O]|=1024,pa(e)&&Ji(e))}function Ep(e,t){for(;e>0;)t=t[Pn],e--;return t}function Yi(e){return!!(e[O]&9216||e[qe]?.dirty)}function ga(e){e[Ut].changeDetectionScheduler?.notify(8),e[O]&64&&(e[O]|=1024),Yi(e)&&Ji(e)}function Ji(e){e[Ut].changeDetectionScheduler?.notify(0);let t=Jt(e);for(;t!==null&&!(t[O]&8192||(t[O]|=8192,!pa(t)));)t=Jt(t)}function Ul(e,t){if(Vn(e))throw new E(911,!1);e[Lt]===null&&(e[Lt]=[]),e[Lt].push(t)}function Dp(e,t){if(e[Lt]===null)return;let n=e[Lt].indexOf(t);n!==-1&&e[Lt].splice(n,1)}function Jt(e){let t=e[De];return pt(t)?t[De]:t}function Cp(e){return e[Mr]??=[]}function Ip(e){return e.cleanup??=[]}var V={lFrame:Vp(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var cl=!1;function Sp(){return V.lFrame.elementDepthCount}function Tp(){V.lFrame.elementDepthCount++}function Bl(){V.lFrame.elementDepthCount--}function $l(){return V.bindingsEnabled}function Ap(){return V.skipHydrationRootTNode!==null}function Hl(e){return V.skipHydrationRootTNode===e}function zl(){V.skipHydrationRootTNode=null}function Q(){return V.lFrame.lView}function We(){return V.lFrame.tView}function oe(e){return V.lFrame.contextLView=e,e[Ae]}function se(e){return V.lFrame.contextLView=null,e}function Ue(){let e=Gl();for(;e!==null&&e.type===64;)e=e.parent;return e}function Gl(){return V.lFrame.currentTNode}function Mp(){let e=V.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function xr(e,t){let n=V.lFrame;n.currentTNode=e,n.isParent=t}function ql(){return V.lFrame.isParent}function Rp(){V.lFrame.isParent=!1}function Np(){return V.lFrame.contextLView}function Wl(){return cl}function Kl(e){let t=cl;return cl=e,t}function xp(e){return V.lFrame.bindingIndex=e}function Zi(){return V.lFrame.bindingIndex++}function Op(e){let t=V.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function kp(){return V.lFrame.inI18n}function Pp(e,t){let n=V.lFrame;n.bindingIndex=n.bindingRootIndex=e,ma(t)}function Fp(){return V.lFrame.currentDirectiveIndex}function ma(e){V.lFrame.currentDirectiveIndex=e}function Lp(e){let t=V.lFrame.currentDirectiveIndex;return t===-1?null:e[t]}function Yl(e){V.lFrame.currentQueryIndex=e}function tb(e){let t=e[P];return t.type===2?t.declTNode:t.type===1?e[et]:null}function Jl(e,t,n){if(n&4){let i=t,o=e;for(;i=i.parent,i===null&&!(n&1);)if(i=tb(o),i===null||(o=o[Pn],i.type&10))break;if(i===null)return!1;t=i,e=o}let r=V.lFrame=jp();return r.currentTNode=t,r.lView=e,!0}function ya(e){let t=jp(),n=e[P];V.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function jp(){let e=V.lFrame,t=e===null?null:e.child;return t===null?Vp(e):t}function Vp(e){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return e!==null&&(e.child=t),t}function Up(){let e=V.lFrame;return V.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Zl=Up;function va(){let e=Up();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function Bp(e){return(V.lFrame.contextLView=Ep(e,V.lFrame.contextLView))[Ae]}function Bn(){return V.lFrame.selectedIndex}function rn(e){V.lFrame.selectedIndex=e}function wa(){let e=V.lFrame;return ha(e.tView,e.selectedIndex)}function $p(){return V.lFrame.currentNamespace}var Hp=!0;function _a(){return Hp}function ba(e){Hp=e}function ul(e,t=null,n=null,r){let i=Ql(e,t,n,r);return i.resolveInjectorInitializers(),i}function Ql(e,t=null,n=null,r,i=new Set){let o=[n||Ge,fp(e)];return r=r||(typeof e=="object"?void 0:jt(e)),new Rn(o,t||$i(),r||null,i)}var dt=class e{static THROW_IF_NOT_FOUND=Sn;static NULL=new Fi;static create(t,n){if(Array.isArray(t))return ul({name:""},n,t,"");{let r=t.name??"";return ul({name:r},t.parent,t.providers,r)}}static \u0275prov=I({token:e,providedIn:"any",factory:()=>M(Ml)});static __NG_ELEMENT_ID__=-1},fe=new C(""),on=(()=>{class e{static __NG_ELEMENT_ID__=nb;static __NG_ENV_ID__=n=>n}return e})(),ll=class extends on{_lView;constructor(t){super(),this._lView=t}get destroyed(){return Vn(this._lView)}onDestroy(t){let n=this._lView;return Ul(n,t),()=>Dp(n,t)}};function nb(){return new ll(Q())}var zp=!1,Bt=(()=>{class e{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new be(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new U(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})(),dl=class extends ge{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(t=!1){super(),this.__isAsync=t,mp()&&(this.destroyRef=v(on,{optional:!0})??void 0,this.pendingTasks=v(Bt,{optional:!0})??void 0)}emit(t){let n=F(null);try{super.next(t)}finally{F(n)}}subscribe(t,n,r){let i=t,o=n||(()=>null),s=r;if(t&&typeof t=="object"){let c=t;i=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:i,error:o,complete:s});return t instanceof _e&&t.add(a),a}wrapInTimeout(t){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{t(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},le=dl;function ia(...e){}function Xl(e){let t,n;function r(){e=ia;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),t!==void 0&&clearTimeout(t)}catch{}}return t=setTimeout(()=>{e(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{e(),r()})),()=>r()}function ed(e){return queueMicrotask(()=>e()),()=>{e=ia}}var td="isAngularZone",Li=td+"_ID",rb=0,je=class e{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new le(!1);onMicrotaskEmpty=new le(!1);onStable=new le(!1);onError=new le(!1);constructor(t){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=zp}=t;if(typeof Zone>"u")throw new E(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,sb(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(td)===!0}static assertInAngularZone(){if(!e.isInAngularZone())throw new E(909,!1)}static assertNotInAngularZone(){if(e.isInAngularZone())throw new E(909,!1)}run(t,n,r){return this._inner.run(t,n,r)}runTask(t,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,t,ib,ia,ia);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(t,n,r){return this._inner.runGuarded(t,n,r)}runOutsideAngular(t){return this._outer.run(t)}},ib={};function nd(e){if(e._nesting==0&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function ob(e){if(e.isCheckStableRunning||e.callbackScheduled)return;e.callbackScheduled=!0;function t(){Xl(()=>{e.callbackScheduled=!1,fl(e),e.isCheckStableRunning=!0,nd(e),e.isCheckStableRunning=!1})}e.scheduleInRootZone?Zone.root.run(()=>{t()}):e._outer.run(()=>{t()}),fl(e)}function sb(e){let t=()=>{ob(e)},n=rb++;e._inner=e._inner.fork({name:"angular",properties:{[td]:!0,[Li]:n,[Li+n]:!0},onInvokeTask:(r,i,o,s,a,c)=>{if(ab(c))return r.invokeTask(o,s,a,c);try{return np(e),r.invokeTask(o,s,a,c)}finally{(e.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||e.shouldCoalesceRunChangeDetection)&&t(),rp(e)}},onInvoke:(r,i,o,s,a,c,u)=>{try{return np(e),r.invoke(o,s,a,c,u)}finally{e.shouldCoalesceRunChangeDetection&&!e.callbackScheduled&&!cb(c)&&t(),rp(e)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(e._hasPendingMicrotasks=s.microTask,fl(e),nd(e)):s.change=="macroTask"&&(e.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),e.runOutsideAngular(()=>e.onError.emit(s)),!1)})}function fl(e){e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&e.callbackScheduled===!0?e.hasPendingMicrotasks=!0:e.hasPendingMicrotasks=!1}function np(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function rp(e){e._nesting--,nd(e)}var ji=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new le;onMicrotaskEmpty=new le;onStable=new le;onError=new le;run(t,n,r){return t.apply(n,r)}runGuarded(t,n,r){return t.apply(n,r)}runOutsideAngular(t){return t()}runTask(t,n,r,i){return t.apply(n,r)}};function ab(e){return Gp(e,"__ignore_ng_zone__")}function cb(e){return Gp(e,"__scheduler_tick__")}function Gp(e,t){return!Array.isArray(e)||e.length!==1?!1:e[0]?.data?.[t]===!0}var Vt=class{_console=console;handleError(t){this._console.error("ERROR",t)}},mt=new C("",{factory:()=>{let e=v(je),t=v(de),n;return r=>{e.runOutsideAngular(()=>{t.destroyed&&!n?setTimeout(()=>{throw r}):(n??=t.get(Vt),n.handleError(r))})}}}),qp={provide:Ar,useValue:()=>{let e=v(Vt,{optional:!0})},multi:!0};function yt(e,t){let[n,r,i]=Vu(e,t?.equal),o=n,s=o[Me];return o.set=r,o.update=i,o.asReadonly=Wp.bind(o),o}function Wp(){let e=this[Me];if(e.readonlyFn===void 0){let t=()=>this();t[Me]=e,e.readonlyFn=t}return e.readonlyFn}var Nn=class{},Qi=new C("",{factory:()=>!0});var rd=new C(""),Ea=(()=>{class e{internalPendingTasks=v(Bt);scheduler=v(Nn);errorHandler=v(mt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})(),id=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>new hl})}return e})(),hl=class{dirtyEffectCount=0;queues=new Map;add(t){this.enqueue(t),this.schedule(t)}schedule(t){t.dirty&&this.dirtyEffectCount++}remove(t){let n=t.zone,r=this.queues.get(n);r.has(t)&&(r.delete(t),t.dirty&&this.dirtyEffectCount--)}enqueue(t){let n=t.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(t)||r.add(t)}flush(){for(;this.dirtyEffectCount>0;){let t=!1;for(let[n,r]of this.queues)n===null?t||=this.flushQueue(r):t||=n.run(()=>this.flushQueue(r));t||(this.dirtyEffectCount=0)}}flushQueue(t){let n=!1;for(let r of t)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},pl=class{[Me];constructor(t){this[Me]=t}destroy(){this[Me].destroy()}};function me(e){return Uu(e)}function io(e){return{toString:e}.toString()}function vb(e){return typeof e=="function"}function Dg(e,t,n,r){t!==null?t.applyValueToInputSignal(t,r):e[n]=r}var Ta=class{previousValue;currentValue;firstChange;constructor(t,n,r){this.previousValue=t,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},Wn=(()=>{let e=()=>Cg;return e.ngInherit=!0,e})();function Cg(e){return e.type.prototype.ngOnChanges&&(e.setInput=_b),wb}function wb(){let e=Sg(this),t=e?.current;if(t){let n=e.previous;if(n===Qt)e.previous=t;else for(let r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function _b(e,t,n,r,i){let o=this.declaredInputs[r],s=Sg(e)||bb(e,{previous:Qt,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[o];a[o]=new Ta(u&&u.currentValue,n,c===Qt),Dg(e,t,i,n)}var Ig="__ngSimpleChanges__";function Sg(e){return e[Ig]||null}function bb(e,t){return e[Ig]=t}var Kp=[];var J=function(e,t=null,n){for(let r=0;r<Kp.length;r++){let i=Kp[r];i(e,t,n)}},z=(function(e){return e[e.TemplateCreateStart=0]="TemplateCreateStart",e[e.TemplateCreateEnd=1]="TemplateCreateEnd",e[e.TemplateUpdateStart=2]="TemplateUpdateStart",e[e.TemplateUpdateEnd=3]="TemplateUpdateEnd",e[e.LifecycleHookStart=4]="LifecycleHookStart",e[e.LifecycleHookEnd=5]="LifecycleHookEnd",e[e.OutputStart=6]="OutputStart",e[e.OutputEnd=7]="OutputEnd",e[e.BootstrapApplicationStart=8]="BootstrapApplicationStart",e[e.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",e[e.BootstrapComponentStart=10]="BootstrapComponentStart",e[e.BootstrapComponentEnd=11]="BootstrapComponentEnd",e[e.ChangeDetectionStart=12]="ChangeDetectionStart",e[e.ChangeDetectionEnd=13]="ChangeDetectionEnd",e[e.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",e[e.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",e[e.AfterRenderHooksStart=16]="AfterRenderHooksStart",e[e.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",e[e.ComponentStart=18]="ComponentStart",e[e.ComponentEnd=19]="ComponentEnd",e[e.DeferBlockStateStart=20]="DeferBlockStateStart",e[e.DeferBlockStateEnd=21]="DeferBlockStateEnd",e[e.DynamicComponentStart=22]="DynamicComponentStart",e[e.DynamicComponentEnd=23]="DynamicComponentEnd",e[e.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",e[e.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",e})(z||{});function Eb(e,t,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=t.type.prototype;if(r){let s=Cg(t);(n.preOrderHooks??=[]).push(e,s),(n.preOrderCheckHooks??=[]).push(e,s)}i&&(n.preOrderHooks??=[]).push(0-e,i),o&&((n.preOrderHooks??=[]).push(e,o),(n.preOrderCheckHooks??=[]).push(e,o))}function Tg(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){let o=e.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=o;s&&(e.contentHooks??=[]).push(-n,s),a&&((e.contentHooks??=[]).push(n,a),(e.contentCheckHooks??=[]).push(n,a)),c&&(e.viewHooks??=[]).push(-n,c),u&&((e.viewHooks??=[]).push(n,u),(e.viewCheckHooks??=[]).push(n,u)),l!=null&&(e.destroyHooks??=[]).push(n,l)}}function Ca(e,t,n){Ag(e,t,3,n)}function Ia(e,t,n,r){(e[O]&3)===n&&Ag(e,t,n,r)}function od(e,t){let n=e[O];(n&3)===t&&(n&=16383,n+=1,e[O]=n)}function Ag(e,t,n,r){let i=r!==void 0?e[Ln]&65535:0,o=r??-1,s=t.length-1,a=0;for(let c=i;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],r!=null&&a>=r)break}else t[c]<0&&(e[Ln]+=65536),(a<o||o==-1)&&(Db(e,n,t,c),e[Ln]=(e[Ln]&4294901760)+c+2),c++}function Yp(e,t){J(z.LifecycleHookStart,e,t);let n=F(null);try{t.call(e)}finally{F(n),J(z.LifecycleHookEnd,e,t)}}function Db(e,t,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],a=e[s];i?e[O]>>14<e[Ln]>>16&&(e[O]&3)===t&&(e[O]+=16384,Yp(a,o)):Yp(a,o)}var kr=-1,Hn=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(t,n,r,i){this.factory=t,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function Cb(e){return(e.flags&8)!==0}function Ib(e){return(e.flags&16)!==0}function Sb(e,t,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],a=n[r++];e.setAttribute(t,s,a,o)}else{let o=i,s=n[++r];Ab(o)?e.setProperty(t,o,s):e.setAttribute(t,o,s),r++}}return r}function Tb(e){return e===3||e===4||e===6}function Ab(e){return e.charCodeAt(0)===64}function Pr(e,t){if(!(t===null||t.length===0))if(e===null||e.length===0)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){let i=t[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?Jp(e,n,i,null,t[++r]):Jp(e,n,i,null,null))}}return e}function Jp(e,t,n,r,i){let o=0,s=e.length;if(t===-1)s=-1;else for(;o<e.length;){let a=e[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<e.length;){let a=e[o];if(typeof a=="number")break;if(a===n){i!==null&&(e[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(e.splice(s,0,t),o=s+1),e.splice(o++,0,n),i!==null&&e.splice(o++,0,i)}function Mg(e){return e!==kr}function Aa(e){return e&32767}function Mb(e){return e>>16}function Ma(e,t){let n=Mb(e),r=t;for(;n>0;)r=r[Pn],n--;return r}var gd=!0;function Zp(e){let t=gd;return gd=e,t}var Rb=256,Rg=Rb-1,Ng=5,Nb=0,Tt={};function xb(e,t,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(On)&&(r=n[On]),r==null&&(r=n[On]=Nb++);let i=r&Rg,o=1<<i;t.data[e+(i>>Ng)]|=o}function Ra(e,t){let n=xg(e,t);if(n!==-1)return n;let r=t[P];r.firstCreatePass&&(e.injectorIndex=t.length,sd(r.data,e),sd(t,null),sd(r.blueprint,null));let i=Nd(e,t),o=e.injectorIndex;if(Mg(i)){let s=Aa(i),a=Ma(i,t),c=a[P].data;for(let u=0;u<8;u++)t[o+u]=a[s+u]|c[s+u]}return t[o+8]=i,o}function sd(e,t){e.push(0,0,0,0,0,0,0,0,t)}function xg(e,t){return e.injectorIndex===-1||e.parent&&e.parent.injectorIndex===e.injectorIndex||t[e.injectorIndex+8]===null?-1:e.injectorIndex}function Nd(e,t){if(e.parent&&e.parent.injectorIndex!==-1)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;i!==null;){if(r=Lg(i),r===null)return kr;if(n++,i=i[Pn],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return kr}function md(e,t,n){xb(e,t,n)}function Og(e,t,n){if(n&8||e!==void 0)return e;ca(t,"NodeInjector")}function kg(e,t,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=e[Xt],o=ze(void 0);try{return i?i.get(t,r,n&8):Tl(t,r,n&8)}finally{ze(o)}}return Og(r,t,n)}function Pg(e,t,n,r=0,i){if(e!==null){if(t[O]&2048&&!(r&2)){let s=Lb(e,t,n,r,Tt);if(s!==Tt)return s}let o=Fg(e,t,n,r,Tt);if(o!==Tt)return o}return kg(t,n,r,i)}function Fg(e,t,n,r,i){let o=Pb(n);if(typeof o=="function"){if(!Jl(t,e,r))return r&1?Og(i,n,r):kg(t,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))ca(n);else return s}finally{Zl()}}else if(typeof o=="number"){let s=null,a=xg(e,t),c=kr,u=r&1?t[tt][et]:null;for((a===-1||r&4)&&(c=a===-1?Nd(e,t):t[a+8],c===kr||!Xp(r,!1)?a=-1:(s=t[P],a=Aa(c),t=Ma(c,t)));a!==-1;){let l=t[P];if(Qp(o,a,l.data)){let d=Ob(a,t,n,s,r,u);if(d!==Tt)return d}c=t[a+8],c!==kr&&Xp(r,t[P].data[a+8]===u)&&Qp(o,a,t)?(s=l,a=Aa(c),t=Ma(c,t)):a=-1}}return i}function Ob(e,t,n,r,i,o){let s=t[P],a=s.data[e+8],c=r==null?nn(a)&&gd:r!=s&&(a.type&3)!==0,u=i&1&&o===a,l=kb(a,s,n,c,u);return l!==null?Na(t,s,l,a,i):Tt}function kb(e,t,n,r,i){let o=e.providerIndexes,s=t.data,a=o&1048575,c=e.directiveStart,u=e.directiveEnd,l=o>>20,d=r?a:a+l,h=i?a+l:u;for(let f=d;f<h;f++){let p=s[f];if(f<c&&n===p||f>=c&&p.type===n)return f}if(i){let f=s[c];if(f&&St(f)&&f.type===n)return c}return null}function Na(e,t,n,r,i){let o=e[n],s=t.data;if(o instanceof Hn){let a=o;if(a.resolving){let f=sp(s[n]);throw Sl(f)}let c=Zp(a.canSeeViewProviders);a.resolving=!0;let u=s[n].type||s[n],l,d=a.injectImpl?ze(a.injectImpl):null,h=Jl(e,r,0);try{o=e[n]=a.factory(void 0,i,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&Eb(n,s[n],t)}finally{d!==null&&ze(d),Zp(c),a.resolving=!1,Zl()}}return o}function Pb(e){if(typeof e=="string")return e.charCodeAt(0)||0;let t=e.hasOwnProperty(On)?e[On]:void 0;return typeof t=="number"?t>=0?t&Rg:Fb:t}function Qp(e,t,n){let r=1<<e;return!!(n[t+(e>>Ng)]&r)}function Xp(e,t){return!(e&2)&&!(e&1&&t)}var $n=class{_tNode;_lView;constructor(t,n){this._tNode=t,this._lView=n}get(t,n,r){return Pg(this._tNode,this._lView,t,Tn(r),n)}};function Fb(){return new $n(Ue(),Q())}function $t(e){return io(()=>{let t=e.prototype.constructor,n=t[Pi]||yd(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){let o=i[Pi]||yd(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function yd(e){return yl(e)?()=>{let t=yd(Ee(e));return t&&t()}:An(e)}function Lb(e,t,n,r,i){let o=e,s=t;for(;o!==null&&s!==null&&s[O]&2048&&!Nr(s);){let a=Fg(o,s,n,r|2,Tt);if(a!==Tt)return a;let c=o.parent;if(!c){let u=s[Pl];if(u){let l=u.get(n,Tt,r);if(l!==Tt)return l}c=Lg(s),s=s[Pn]}o=c}return i}function Lg(e){let t=e[P],n=t.type;return n===2?t.declTNode:n===1?e[et]:null}function jb(){return Ua(Ue(),Q())}function Ua(e,t){return new Ur(gt(e,t))}var Ur=(()=>{class e{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=jb}return e})();function jg(e){return(e.flags&128)===128}var xd=(function(e){return e[e.OnPush=0]="OnPush",e[e.Default=1]="Default",e})(xd||{}),Vg=new Map,Vb=0;function Ub(){return Vb++}function Bb(e){Vg.set(e[en],e)}function vd(e){Vg.delete(e[en])}var eg="__ngContext__";function Fr(e,t){It(t)?(e[eg]=t[en],Bb(t)):e[eg]=t}function Ug(e){return $g(e[Rr])}function Bg(e){return $g(e[Xe])}function $g(e){for(;e!==null&&!pt(e);)e=e[Xe];return e}var $b;function Od(e){$b=e}var Ba=new C("",{factory:()=>Hb}),Hb="ng";var $a=new C(""),oo=new C("",{providedIn:"platform",factory:()=>"unknown"});var Ha=new C("",{factory:()=>v(fe).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var Hg=!1,zg=new C("",{factory:()=>Hg});var zb=(e,t,n,r)=>{};function Gb(e,t,n,r){zb(e,t,n,r)}function kd(e){return(e.flags&32)===32}var qb=()=>null;function Gg(e,t,n=!1){return qb(e,t,n)}function qg(e,t){let n=e.contentQueries;if(n!==null){let r=F(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let a=e.data[s];Yl(o),a.contentQueries(2,t[s],s)}}}finally{F(r)}}}function wd(e,t,n){Yl(0);let r=F(null);try{t(e,n)}finally{F(r)}}function Wg(e,t,n){if(Fl(t)){let r=F(null);try{let i=t.directiveStart,o=t.directiveEnd;for(let s=i;s<o;s++){let a=e.data[s];if(a.contentQueries){let c=n[s];a.contentQueries(1,c,s)}}}finally{F(r)}}}var wt=(function(e){return e[e.Emulated=0]="Emulated",e[e.None=2]="None",e[e.ShadowDom=3]="ShadowDom",e[e.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",e})(wt||{});var _d=class{changingThisBreaksApplicationSecurity;constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${gl})`}};function Kg(e){return e instanceof _d?e.changingThisBreaksApplicationSecurity:e}function Wb(e,t){return e.createText(t)}function Kb(e,t,n){e.setValue(t,n)}function Yg(e,t,n){return e.createElement(t,n)}function xa(e,t,n,r,i){e.insertBefore(t,n,r,i)}function Jg(e,t,n){e.appendChild(t,n)}function tg(e,t,n,r,i){r!==null?xa(e,t,n,r,i):Jg(e,t,n)}function Yb(e,t,n,r){e.removeChild(null,t,n,r)}function Jb(e,t,n){e.setAttribute(t,"style",n)}function Zb(e,t,n){n===""?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n)}function Zg(e,t,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&Sb(e,t,r),i!==null&&Zb(e,t,i),o!==null&&Jb(e,t,o)}function Qg(e){return e instanceof Function?e():e}function Qb(e,t,n){let r=e.length;for(;;){let i=e.indexOf(t,n);if(i===-1)return i;if(i===0||e.charCodeAt(i-1)<=32){let o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var Xg="ng-template";function Xb(e,t,n,r){let i=0;if(r){for(;i<t.length&&typeof t[i]=="string";i+=2)if(t[i]==="class"&&Qb(t[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Pd(e))return!1;if(i=t.indexOf(1,i),i>-1){let o;for(;++i<t.length&&typeof(o=t[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function Pd(e){return e.type===4&&e.value!==Xg}function eE(e,t,n){let r=e.type===4&&!n?Xg:e.value;return t===r}function tE(e,t,n){let r=4,i=e.attrs,o=i!==null?iE(i):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!vt(r)&&!vt(c))return!1;if(s&&vt(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!eE(e,c,n)||c===""&&t.length===1){if(vt(r))return!1;s=!0}}else if(r&8){if(i===null||!Xb(e,i,c,n)){if(vt(r))return!1;s=!0}}else{let u=t[++a],l=nE(c,i,Pd(e),n);if(l===-1){if(vt(r))return!1;s=!0;continue}if(u!==""){let d;if(l>o?d="":d=i[l+1].toLowerCase(),r&2&&u!==d){if(vt(r))return!1;s=!0}}}}return vt(r)||s}function vt(e){return(e&1)===0}function nE(e,t,n,r){if(t===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<t.length;){let s=t[i];if(s===e)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++i];for(;typeof a=="string";)a=t[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return oE(t,e)}function rE(e,t,n=!1){for(let r=0;r<t.length;r++)if(tE(e,t[r],n))return!0;return!1}function iE(e){for(let t=0;t<e.length;t++){let n=e[t];if(Tb(n))return t}return e.length}function oE(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){let r=e[n];if(typeof r=="number")return-1;if(r===t)return n;n++}return-1}function ng(e,t){return e?":not("+t.trim()+")":t}function sE(e){let t=e[0],n=1,r=2,i="",o=!1;for(;n<e.length;){let s=e[n];if(typeof s=="string")if(r&2){let a=e[++n];i+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!vt(s)&&(t+=ng(o,i),i=""),r=s,o=o||!vt(r);n++}return i!==""&&(t+=ng(o,i)),t}function aE(e){return e.map(sE).join(",")}function cE(e){let t=[],n=[],r=1,i=2;for(;r<e.length;){let o=e[r];if(typeof o=="string")i===2?o!==""&&t.push(o,e[++r]):i===8&&n.push(o);else{if(!vt(i))break;i=o}r++}return n.length&&t.push(1,...n),t}var an={};function Fd(e,t,n,r,i,o,s,a,c,u,l){let d=xe+r,h=d+i,f=uE(d,h),p=typeof u=="function"?u():u;return f[P]={type:e,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:t,data:f.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function uE(e,t){let n=[];for(let r=0;r<t;r++)n.push(r<e?null:an);return n}function lE(e){let t=e.tView;return t===null||t.incompleteFirstPass?e.tView=Fd(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts,e.id):t}function Ld(e,t,n,r,i,o,s,a,c,u,l){let d=t.blueprint.slice();return d[ht]=i,d[O]=r|4|128|8|64|1024,(u!==null||e&&e[O]&2048)&&(d[O]|=2048),jl(d),d[De]=d[Pn]=e,d[Ae]=n,d[Ut]=s||e&&e[Ut],d[re]=a||e&&e[re],d[Xt]=c||e&&e[Xt]||null,d[et]=o,d[en]=Ub(),d[Hi]=l,d[Pl]=u,d[tt]=t.type==2?e[tt]:d,d}function dE(e,t,n){let r=gt(t,e),i=lE(n),o=e[Ut].rendererFactory,s=jd(e,Ld(e,i,null,em(n),r,t,null,o.createRenderer(r,n),null,null,null));return e[t.index]=s}function em(e){let t=16;return e.signals?t=4096:e.onPush&&(t=64),t}function tm(e,t,n,r){if(n===0)return-1;let i=t.length;for(let o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function jd(e,t){return e[Rr]?e[kl][Xe]=t:e[Rr]=t,e[kl]=t,t}function ae(e=1){nm(We(),Q(),Bn()+e,!1)}function nm(e,t,n,r){if(!r)if((t[O]&3)===3){let o=e.preOrderCheckHooks;o!==null&&Ca(t,o,n)}else{let o=e.preOrderHooks;o!==null&&Ia(t,o,0,n)}rn(n)}var za=(function(e){return e[e.None=0]="None",e[e.SignalBased=1]="SignalBased",e[e.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",e})(za||{});function bd(e,t,n,r){let i=F(null);try{let[o,s,a]=e.inputs[n],c=null;(s&za.SignalBased)!==0&&(c=t[o][Me]),c!==null&&c.transformFn!==void 0?r=c.transformFn(r):a!==null&&(r=a.call(t,r)),e.setInput!==null?e.setInput(t,c,r,n,o):Dg(t,c,o,r)}finally{F(i)}}var At=(function(e){return e[e.Important=1]="Important",e[e.DashCase=2]="DashCase",e})(At||{}),fE;function Vd(e,t){return fE(e,t)}var Lr=new Set,Ud=(function(e){return e[e.CHANGE_DETECTION=0]="CHANGE_DETECTION",e[e.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",e})(Ud||{}),Kn=new C(""),rg=new Set;function Bd(e){rg.has(e)||(rg.add(e),performance?.mark?.("mark_feature_usage",{detail:{feature:e}}))}var rm=(()=>{class e{impl=null;execute(){this.impl?.execute()}static \u0275prov=I({token:e,providedIn:"root",factory:()=>new e})}return e})();var hE=new C("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:v(de)})});function im(e,t,n){let r=e.get(hE);if(Array.isArray(t))for(let i of t)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(t),n?.detachedLeaveAnimationFns?.push(t);r.scheduler&&r.scheduler(e)}function pE(e,t){for(let[n,r]of t)im(e,r.animateFns)}function ig(e,t,n,r){let i=e?.[Gi]?.enter;t!==null&&i&&i.has(n.index)&&pE(r,i)}function Or(e,t,n,r,i,o,s,a){if(i!=null){let c,u=!1;pt(i)?c=i:It(i)&&(u=!0,i=i[ht]);let l=nt(i);e===0&&r!==null?(ig(a,r,o,n),s==null?Jg(t,r,l):xa(t,r,l,s||null,!0)):e===1&&r!==null?(ig(a,r,o,n),xa(t,r,l,s||null,!0)):e===2?og(a,o,n,d=>{Yb(t,l,u,d)}):e===3&&og(a,o,n,()=>{t.destroyNode(l)}),c!=null&&TE(t,e,n,c,o,r,s)}}function gE(e,t){om(e,t),t[ht]=null,t[et]=null}function mE(e,t,n,r,i,o){r[ht]=i,r[et]=t,Ga(e,r,n,1,i,o)}function om(e,t){t[Ut].changeDetectionScheduler?.notify(9),Ga(e,t,t[re],2,null,null)}function yE(e){let t=e[Rr];if(!t)return ad(e[P],e);for(;t;){let n=null;if(It(t))n=t[Rr];else{let r=t[Ve];r&&(n=r)}if(!n){for(;t&&!t[Xe]&&t!==e;)It(t)&&ad(t[P],t),t=t[De];t===null&&(t=e),It(t)&&ad(t[P],t),n=t&&t[Xe]}t=n}}function $d(e,t){let n=e[Wi],r=n.indexOf(t);n.splice(r,1)}function sm(e,t){if(Vn(t))return;let n=t[re];n.destroyNode&&Ga(e,t,n,3,null,null),yE(t)}function ad(e,t){if(Vn(t))return;let n=F(null);try{t[O]&=-129,t[O]|=256,t[qe]&&Si(t[qe]),_E(e,t),wE(e,t),t[P].type===1&&t[re].destroy();let r=t[Fn];if(r!==null&&pt(t[De])){r!==t[De]&&$d(r,t);let i=t[jn];i!==null&&i.detachView(e)}vd(t)}finally{F(n)}}function og(e,t,n,r){let i=e?.[Gi];if(i==null||i.leave==null||!i.leave.has(t.index))return r(!1);e&&Lr.add(e[en]),im(n,()=>{if(i.leave&&i.leave.has(t.index)){let s=i.leave.get(t.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){let u=s.animateFns[c],{promise:l}=u();a.push(l)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(a),vE(e,r)}else e&&Lr.delete(e[en]),r(!1)},i)}function vE(e,t){let n=e[Gi]?.running;if(n){n.then(()=>{e[Gi].running=void 0,Lr.delete(e[en]),t(!0)});return}t(!1)}function wE(e,t){let n=e.cleanup,r=t[Mr];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else{let a=r[n[s+1]];n[s].call(a)}r!==null&&(t[Mr]=null);let i=t[Lt];if(i!==null){t[Lt]=null;for(let s=0;s<i.length;s++){let a=i[s];a()}}let o=t[zi];if(o!==null){t[zi]=null;for(let s of o)s.destroy()}}function _E(e,t){let n;if(e!=null&&(n=e.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=t[n[r]];if(!(i instanceof Hn)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=i[o[s]],c=o[s+1];J(z.LifecycleHookStart,a,c);try{c.call(a)}finally{J(z.LifecycleHookEnd,a,c)}}else{J(z.LifecycleHookStart,i,o);try{o.call(i)}finally{J(z.LifecycleHookEnd,i,o)}}}}}function bE(e,t,n){return EE(e,t.parent,n)}function EE(e,t,n){let r=t;for(;r!==null&&r.type&168;)t=r,r=t.parent;if(r===null)return n[ht];if(nn(r)){let{encapsulation:i}=e.data[r.directiveStart+r.componentOffset];if(i===wt.None||i===wt.Emulated)return null}return gt(r,n)}function DE(e,t,n){return IE(e,t,n)}function CE(e,t,n){return e.type&40?gt(e,n):null}var IE=CE,sg;function Hd(e,t,n,r){let i=bE(e,r,t),o=t[re],s=r.parent||t[et],a=DE(s,r,t);if(i!=null)if(Array.isArray(n))for(let c=0;c<n.length;c++)tg(o,i,n[c],a,!1);else tg(o,i,n,a,!1);sg!==void 0&&sg(o,r,t,n,i)}function Xi(e,t){if(t!==null){let n=t.type;if(n&3)return gt(t,e);if(n&4)return Ed(-1,e[t.index]);if(n&8){let r=t.child;if(r!==null)return Xi(e,r);{let i=e[t.index];return pt(i)?Ed(-1,i):nt(i)}}else{if(n&128)return Xi(e,t.next);if(n&32)return Vd(t,e)()||nt(e[t.index]);{let r=am(e,t);if(r!==null){if(Array.isArray(r))return r[0];let i=Jt(e[tt]);return Xi(i,r)}else return Xi(e,t.next)}}}return null}function am(e,t){if(t!==null){let r=e[tt][et],i=t.projection;return r.projection[i]}return null}function Ed(e,t){let n=Ve+e+1;if(n<t.length){let r=t[n],i=r[P].firstChild;if(i!==null)return Xi(r,i)}return t[tn]}function zd(e,t,n,r,i,o,s){for(;n!=null;){let a=r[Xt];if(n.type===128){n=n.next;continue}let c=r[n.index],u=n.type;if(s&&t===0&&(c&&Fr(nt(c),r),n.flags|=2),!kd(n))if(u&8)zd(e,t,n.child,r,i,o,!1),Or(t,e,a,i,c,n,o,r);else if(u&32){let l=Vd(n,r),d;for(;d=l();)Or(t,e,a,i,d,n,o,r);Or(t,e,a,i,c,n,o,r)}else u&16?SE(e,t,r,n,i,o):Or(t,e,a,i,c,n,o,r);n=s?n.projectionNext:n.next}}function Ga(e,t,n,r,i,o){zd(n,r,e.firstChild,t,i,o,!1)}function SE(e,t,n,r,i,o){let s=n[tt],c=s[et].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++){let l=c[u];Or(t,e,n[Xt],i,l,r,o,n)}else{let u=c,l=s[De];jg(r)&&(u.flags|=128),zd(e,t,u,l,i,o,!0)}}function TE(e,t,n,r,i,o,s){let a=r[tn],c=nt(r);a!==c&&Or(t,e,n,o,a,i,s);for(let u=Ve;u<r.length;u++){let l=r[u];Ga(l[P],l,e,t,o,a)}}function AE(e,t,n,r,i){if(t)i?e.addClass(n,r):e.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:At.DashCase;i==null?e.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=At.Important),e.setStyle(n,r,i,o))}}function cm(e,t,n,r,i){let o=Bn(),s=r&2;try{rn(-1),s&&t.length>xe&&nm(e,t,xe,!1);let a=s?z.TemplateUpdateStart:z.TemplateCreateStart;J(a,i,n),n(r,i)}finally{rn(o);let a=s?z.TemplateUpdateEnd:z.TemplateCreateEnd;J(a,i,n)}}function Gd(e,t,n){PE(e,t,n),(n.flags&64)===64&&FE(e,t,n)}function qd(e,t,n=gt){let r=t.localNames;if(r!==null){let i=t.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],a=s===-1?n(t,e):e[s];e[i++]=a}}}function ME(e,t,n,r){let o=r.get(zg,Hg)||n===wt.ShadowDom||n===wt.ExperimentalIsolatedShadowDom,s=e.selectRootElement(t,o);return RE(s),s}function RE(e){NE(e)}var NE=()=>null;function xE(e){return e==="class"?"className":e==="for"?"htmlFor":e==="formaction"?"formAction":e==="innerHtml"?"innerHTML":e==="readonly"?"readOnly":e==="tabindex"?"tabIndex":e}function um(e,t,n,r,i,o){let s=t[P];if(Wd(e,s,t,n,r)){nn(e)&&kE(t,e.index);return}e.type&3&&(n=xE(n)),OE(e,t,n,r,i,o)}function OE(e,t,n,r,i,o){if(e.type&3){let s=gt(e,t);r=o!=null?o(r,e.value||"",n):r,i.setProperty(s,n,r)}else e.type&12}function kE(e,t){let n=rt(t,e);n[O]&16||(n[O]|=64)}function PE(e,t,n){let r=n.directiveStart,i=n.directiveEnd;nn(n)&&dE(t,n,e.data[r+n.componentOffset]),e.firstCreatePass||Ra(n,t);let o=n.initialInputs;for(let s=r;s<i;s++){let a=e.data[s],c=Na(t,e,s,n);if(Fr(c,t),o!==null&&UE(t,s-r,c,a,n,o),St(a)){let u=rt(n.index,t);u[Ae]=Na(t,e,s,n)}}}function FE(e,t,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Fp();try{rn(o);for(let a=r;a<i;a++){let c=e.data[a],u=t[a];ma(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&LE(c,u)}}finally{rn(-1),ma(s)}}function LE(e,t){e.hostBindings!==null&&e.hostBindings(1,t)}function lm(e,t){let n=e.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];rE(t,o.selectors,!1)&&(r??=[],St(o)?r.unshift(o):r.push(o))}return r}function jE(e,t,n,r,i,o){let s=gt(e,t);VE(t[re],s,o,e.value,n,r,i)}function VE(e,t,n,r,i,o,s){if(o==null)e.removeAttribute(t,i,n);else{let a=s==null?aa(o):s(o,r||"",i);e.setAttribute(t,i,a,n)}}function UE(e,t,n,r,i,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;a+=2){let c=s[a],u=s[a+1];bd(r,n,c,u)}}function dm(e,t,n,r,i){let o=xe+n,s=t[P],a=i(s,t,e,r,n);t[o]=a,xr(e,!0);let c=e.type===2;return c?(Zg(t[re],a,e),(Sp()===0||Ki(e))&&Fr(a,t),Tp()):Fr(a,t),_a()&&(!c||!kd(e))&&Hd(s,t,a,e),e}function fm(e){let t=e;return ql()?Rp():(t=t.parent,xr(t,!1)),t}function BE(e,t){let n=e[Xt];if(!n)return;let r;try{r=n.get(mt,null)}catch{r=null}r?.(t)}function Wd(e,t,n,r,i){let o=e.inputs?.[r],s=e.hostDirectiveInputs?.[r],a=!1;if(s)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1],d=t.data[u];bd(d,n[u],l,i),a=!0}if(o)for(let c of o){let u=n[c],l=t.data[c];bd(l,u,r,i),a=!0}return a}function $E(e,t){let n=rt(t,e),r=n[P];HE(r,n);let i=n[ht];i!==null&&n[Hi]===null&&(n[Hi]=Gg(i,n[Xt])),J(z.ComponentStart);try{Kd(r,n,n[Ae])}finally{J(z.ComponentEnd,n[Ae])}}function HE(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}function Kd(e,t,n){ya(t);try{let r=e.viewQuery;r!==null&&wd(1,r,n);let i=e.template;i!==null&&cm(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),t[jn]?.finishViewCreation(e),e.staticContentQueries&&qg(e,t),e.staticViewQueries&&wd(2,e.viewQuery,n);let o=e.components;o!==null&&zE(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[O]&=-5,va()}}function zE(e,t){for(let n=0;n<t.length;n++)$E(e,t[n])}function GE(e,t,n,r){let i=F(null);try{let o=t.tView,a=e[O]&4096?4096:16,c=Ld(e,o,n,a,null,t,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),u=e[t.index];c[Fn]=u;let l=e[jn];return l!==null&&(c[jn]=l.createEmbeddedView(o)),Kd(o,c,n),c}finally{F(i)}}function ag(e,t){return!t||t.firstChild===null||jg(e)}function to(e,t,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=t[n.index];o!==null&&r.push(nt(o)),pt(o)&&hm(o,r);let s=n.type;if(s&8)to(e,t,n.child,r);else if(s&32){let a=Vd(n,t),c;for(;c=a();)r.push(c)}else if(s&16){let a=am(t,n);if(Array.isArray(a))r.push(...a);else{let c=Jt(t[tt]);to(c[P],c,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function hm(e,t){for(let n=Ve;n<e.length;n++){let r=e[n],i=r[P].firstChild;i!==null&&to(r[P],r,i,t)}e[tn]!==e[ht]&&t.push(e[tn])}function pm(e){if(e[fa]!==null){for(let t of e[fa])t.impl.addSequence(t);e[fa].length=0}}var gm=[];function qE(e){return e[qe]??WE(e)}function WE(e){let t=gm.pop()??Object.create(YE);return t.lView=e,t}function KE(e){e.lView[qe]!==e&&(e.lView=null,gm.push(e))}var YE=$(_({},Di),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{Ji(e.lView)},consumerOnSignalRead(){this.lView[qe]=this}});function JE(e){let t=e[qe]??Object.create(ZE);return t.lView=e,t}var ZE=$(_({},Di),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:e=>{let t=Jt(e.lView);for(;t&&!mm(t[P]);)t=Jt(t);t&&Vl(t)},consumerOnSignalRead(){this.lView[qe]=this}});function mm(e){return e.type!==2}function ym(e){if(e[zi]===null)return;let t=!0;for(;t;){let n=!1;for(let r of e[zi])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));t=n&&!!(e[O]&8192)}}var QE=100;function vm(e,t=0){let r=e[Ut].rendererFactory,i=!1;i||r.begin?.();try{XE(e,t)}finally{i||r.end?.()}}function XE(e,t){let n=Wl();try{Kl(!0),Dd(e,t);let r=0;for(;Yi(e);){if(r===QE)throw new E(103,!1);r++,Dd(e,1)}}finally{Kl(n)}}function eD(e,t,n,r){if(Vn(t))return;let i=t[O],o=!1,s=!1;ya(t);let a=!0,c=null,u=null;o||(mm(e)?(u=qE(t),c=Ii(u)):Is()===null?(a=!1,u=JE(t),c=Ii(u)):t[qe]&&(Si(t[qe]),t[qe]=null));try{jl(t),xp(e.bindingStartIndex),n!==null&&cm(e,t,n,2,r);let l=(i&3)===3;if(!o)if(l){let f=e.preOrderCheckHooks;f!==null&&Ca(t,f,null)}else{let f=e.preOrderHooks;f!==null&&Ia(t,f,0,null),od(t,0)}if(s||tD(t),ym(t),wm(t,0),e.contentQueries!==null&&qg(e,t),!o)if(l){let f=e.contentCheckHooks;f!==null&&Ca(t,f)}else{let f=e.contentHooks;f!==null&&Ia(t,f,1),od(t,1)}rD(e,t);let d=e.components;d!==null&&bm(t,d,0);let h=e.viewQuery;if(h!==null&&wd(2,h,r),!o)if(l){let f=e.viewCheckHooks;f!==null&&Ca(t,f)}else{let f=e.viewHooks;f!==null&&Ia(t,f,2),od(t,2)}if(e.firstUpdatePass===!0&&(e.firstUpdatePass=!1),t[da]){for(let f of t[da])f();t[da]=null}o||(pm(t),t[O]&=-73)}catch(l){throw o||Ji(t),l}finally{u!==null&&(Ss(u,c),a&&KE(u)),va()}}function wm(e,t){for(let n=Ug(e);n!==null;n=Bg(n))for(let r=Ve;r<n.length;r++){let i=n[r];_m(i,t)}}function tD(e){for(let t=Ug(e);t!==null;t=Bg(t)){if(!(t[O]&2))continue;let n=t[Wi];for(let r=0;r<n.length;r++){let i=n[r];Vl(i)}}}function nD(e,t,n){J(z.ComponentStart);let r=rt(t,e);try{_m(r,n)}finally{J(z.ComponentEnd,r[Ae])}}function _m(e,t){pa(e)&&Dd(e,t)}function Dd(e,t){let r=e[P],i=e[O],o=e[qe],s=!!(t===0&&i&16);if(s||=!!(i&64&&t===0),s||=!!(i&1024),s||=!!(o?.dirty&&Ts(o)),s||=!1,o&&(o.dirty=!1),e[O]&=-9217,s)eD(r,e,r.template,e[Ae]);else if(i&8192){let a=F(null);try{ym(e),wm(e,1);let c=r.components;c!==null&&bm(e,c,1),pm(e)}finally{F(a)}}}function bm(e,t,n){for(let r=0;r<t.length;r++)nD(e,t[r],n)}function rD(e,t){let n=e.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)rn(~i);else{let o=i,s=n[++r],a=n[++r];Pp(s,o);let c=t[o];J(z.HostBindingsUpdateStart,c);try{a(2,c)}finally{J(z.HostBindingsUpdateEnd,c)}}}}finally{rn(-1)}}function Yd(e,t){let n=Wl()?64:1088;for(e[Ut].changeDetectionScheduler?.notify(t);e;){e[O]|=n;let r=Jt(e);if(Nr(e)&&!r)return e;e=r}return null}function Em(e,t,n,r){return[e,!0,0,t,null,r,null,n,null,null]}function iD(e,t,n,r=!0){let i=t[P];if(oD(i,t,e,n),r){let s=Ed(n,e),a=t[re],c=a.parentNode(e[tn]);c!==null&&mE(i,e[et],a,t,c,s)}let o=t[Hi];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function Cd(e,t){if(e.length<=Ve)return;let n=Ve+t,r=e[n];if(r){let i=r[Fn];i!==null&&i!==e&&$d(i,r),t>0&&(e[n-1][Xe]=r[Xe]);let o=Ui(e,Ve+t);gE(r[P],r);let s=o[jn];s!==null&&s.detachView(o[P]),r[De]=null,r[Xe]=null,r[O]&=-129}return r}function oD(e,t,n,r){let i=Ve+r,o=n.length;r>0&&(n[i-1][Xe]=t),r<o-Ve?(t[Xe]=n[i],Al(n,Ve+r,t)):(n.push(t),t[Xe]=null),t[De]=n;let s=t[Fn];s!==null&&n!==s&&Dm(s,t);let a=t[jn];a!==null&&a.insertView(e),ga(t),t[O]|=128}function Dm(e,t){let n=e[Wi],r=t[De];if(It(r))e[O]|=2;else{let i=r[De][tt];t[tt]!==i&&(e[O]|=2)}n===null?e[Wi]=[t]:n.push(t)}var sn=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let t=this._lView,n=t[P];return to(n,t,n.firstChild,[])}constructor(t,n){this._lView=t,this._cdRefInjectingView=n}get context(){return this._lView[Ae]}set context(t){this._lView[Ae]=t}get destroyed(){return Vn(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[De];if(pt(t)){let n=t[qi],r=n?n.indexOf(this):-1;r>-1&&(Cd(t,r),Ui(n,r))}this._attachedToViewContainer=!1}sm(this._lView[P],this._lView)}onDestroy(t){Ul(this._lView,t)}markForCheck(){Yd(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[O]&=-129}reattach(){ga(this._lView),this._lView[O]|=128}detectChanges(){this._lView[O]|=1024,vm(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new E(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let t=Nr(this._lView),n=this._lView[Fn];n!==null&&!t&&$d(n,this._lView),om(this._lView[P],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new E(902,!1);this._appRef=t;let n=Nr(this._lView),r=this._lView[Fn];r!==null&&!n&&Dm(r,this._lView),ga(this._lView)}};var qa=(()=>{class e{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=sD;constructor(n,r,i){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=i}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,i){let o=GE(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:i});return new sn(o)}}return e})();function sD(){return aD(Ue(),Q())}function aD(e,t){return e.type&4?new qa(t,e,Ua(e,t)):null}function Wa(e,t,n,r,i){let o=e.data[t];if(o===null)o=cD(e,t,n,r,i),kp()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=Mp();o.injectorIndex=s===null?-1:s.injectorIndex}return xr(o,!0),o}function cD(e,t,n,r,i){let o=Gl(),s=ql(),a=s?o:o&&o.parent,c=e.data[t]=lD(e,a,n,t,r,i);return uD(e,c,o,s),c}function uD(e,t,n,r){e.firstChild===null&&(e.firstChild=t),n!==null&&(r?n.child==null&&t.parent!==null&&(n.child=t):n.next===null&&(n.next=t,t.prev=n))}function lD(e,t,n,r,i,o){let s=t?t.injectorIndex:-1,a=0;return Ap()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}var dD=()=>null;function cg(e,t){return dD(e,t)}var Cm=class{},Ka=class{},Id=class{resolveComponentFactory(t){throw new E(917,!1)}},so=class{static NULL=new Id},zn=class{},ao=(()=>{class e{destroyNode=null;static __NG_ELEMENT_ID__=()=>fD()}return e})();function fD(){let e=Q(),t=Ue(),n=rt(t.index,e);return(It(n)?n:e)[re]}var Im=(()=>{class e{static \u0275prov=I({token:e,providedIn:"root",factory:()=>null})}return e})();var Sa={},Sd=class{injector;parentInjector;constructor(t,n){this.injector=t,this.parentInjector=n}get(t,n,r){let i=this.injector.get(t,Sa,r);return i!==Sa||n===Sa?i:this.parentInjector.get(t,n,r)}};function Oa(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)i=ml(i,a);else if(o==2){let c=a,u=t[++s];r=ml(r,c+": "+u+";")}}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}function Z(e,t=0){let n=Q();if(n===null)return M(e,t);let r=Ue();return Pg(r,n,Ee(e),t)}function Sm(e,t,n,r,i){let o=r===null?null:{"":-1},s=i(e,n);if(s!==null){let a=s,c=null,u=null;for(let l of s)if(l.resolveHostDirectives!==null){[a,c,u]=l.resolveHostDirectives(s);break}gD(e,t,n,a,o,c,u)}o!==null&&r!==null&&hD(n,r,o)}function hD(e,t,n){let r=e.localNames=[];for(let i=0;i<t.length;i+=2){let o=n[t[i+1]];if(o==null)throw new E(-301,!1);r.push(t[i],o)}}function pD(e,t,n){t.componentOffset=n,(e.components??=[]).push(t.index)}function gD(e,t,n,r,i,o,s){let a=r.length,c=null;for(let h=0;h<a;h++){let f=r[h];c===null&&St(f)&&(c=f,pD(e,n,h)),md(Ra(n,t),e,f.type)}bD(n,e.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let h=0;h<a;h++){let f=r[h];f.providersResolver&&f.providersResolver(f)}let u=!1,l=!1,d=tm(e,t,a,null);a>0&&(n.directiveToIndex=new Map);for(let h=0;h<a;h++){let f=r[h];if(n.mergedAttrs=Pr(n.mergedAttrs,f.hostAttrs),yD(e,n,t,d,f),_D(d,f,i),s!==null&&s.has(f)){let[m,y]=s.get(f);n.directiveToIndex.set(f.type,[d,m+n.directiveStart,y+n.directiveStart])}else(o===null||!o.has(f))&&n.directiveToIndex.set(f.type,d);f.contentQueries!==null&&(n.flags|=4),(f.hostBindings!==null||f.hostAttrs!==null||f.hostVars!==0)&&(n.flags|=64);let p=f.type.prototype;!u&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks??=[]).push(n.index),u=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks??=[]).push(n.index),l=!0),d++}mD(e,n,o)}function mD(e,t,n){for(let r=t.directiveStart;r<t.directiveEnd;r++){let i=e.data[r];if(n===null||!n.has(i))ug(0,t,i,r),ug(1,t,i,r),dg(t,r,!1);else{let o=n.get(i);lg(0,t,o,r),lg(1,t,o,r),dg(t,r,!0)}}}function ug(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;e===0?s=t.inputs??={}:s=t.outputs??={},s[o]??=[],s[o].push(r),Tm(t,o)}}function lg(e,t,n,r){let i=e===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],a;e===0?a=t.hostDirectiveInputs??={}:a=t.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,o),Tm(t,s)}}function Tm(e,t){t==="class"?e.flags|=8:t==="style"&&(e.flags|=16)}function dg(e,t,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=e;if(r===null||!n&&i===null||n&&o===null||Pd(e)){e.initialInputs??=[],e.initialInputs.push(null);return}let s=null,a=0;for(;a<r.length;){let c=r[a];if(c===0){a+=4;continue}else if(c===5){a+=2;continue}else if(typeof c=="number")break;if(!n&&i.hasOwnProperty(c)){let u=i[c];for(let l of u)if(l===t){s??=[],s.push(c,r[a+1]);break}}else if(n&&o.hasOwnProperty(c)){let u=o[c];for(let l=0;l<u.length;l+=2)if(u[l]===t){s??=[],s.push(u[l+1],r[a+1]);break}}a+=2}e.initialInputs??=[],e.initialInputs.push(s)}function yD(e,t,n,r,i){e.data[r]=i;let o=i.factory||(i.factory=An(i.type,!0)),s=new Hn(o,St(i),Z,null);e.blueprint[r]=s,n[r]=s,vD(e,t,r,tm(e,n,i.hostVars,an),i)}function vD(e,t,n,r,i){let o=i.hostBindings;if(o){let s=e.hostBindingOpCodes;s===null&&(s=e.hostBindingOpCodes=[]);let a=~t.index;wD(s)!=a&&s.push(a),s.push(n,r,o)}}function wD(e){let t=e.length;for(;t>0;){let n=e[--t];if(typeof n=="number"&&n<0)return n}return 0}function _D(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;St(t)&&(n[""]=e)}}function bD(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function Am(e,t,n,r,i,o,s,a){let c=t[P],u=c.consts,l=Un(u,s),d=Wa(c,e,n,r,l);return o&&Sm(c,t,d,Un(u,a),i),d.mergedAttrs=Pr(d.mergedAttrs,d.attrs),d.attrs!==null&&Oa(d,d.attrs,!1),d.mergedAttrs!==null&&Oa(d,d.mergedAttrs,!0),c.queries!==null&&c.queries.elementStart(c,d),d}function Mm(e,t){Tg(e,t),Fl(t)&&e.queries.elementEnd(t)}function ED(e,t,n,r,i,o){let s=t.consts,a=Un(s,i),c=Wa(t,e,n,r,a);if(c.mergedAttrs=Pr(c.mergedAttrs,c.attrs),o!=null){let u=Un(s,o);c.localNames=[];for(let l=0;l<u.length;l+=2)c.localNames.push(u[l],-1)}return c.attrs!==null&&Oa(c,c.attrs,!1),c.mergedAttrs!==null&&Oa(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function co(e,t,n){if(n===an)return!1;let r=e[t];return Object.is(r,n)?!1:(e[t]=n,!0)}function cd(e,t,n){return function r(i){let o=nn(e)?rt(e.index,t):t;Yd(o,5);let s=t[Ae],a=fg(t,s,n,i),c=r.__ngNextListenerFn__;for(;c;)a=fg(t,s,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function fg(e,t,n,r){let i=F(null);try{return J(z.OutputStart,t,n),n(r)!==!1}catch(o){return BE(e,o),!1}finally{J(z.OutputEnd,t,n),F(i)}}function DD(e,t,n,r,i,o,s,a){let c=Ki(e),u=!1,l=null;if(!r&&c&&(l=ID(t,n,o,e.index)),l!==null){let d=l.__ngLastListenerFn__||l;d.__ngNextListenerFn__=s,l.__ngLastListenerFn__=s,u=!0}else{let d=gt(e,n),h=r?r(d):d;Gb(n,h,o,a);let f=i.listen(h,o,a);if(!CD(o)){let p=r?m=>r(nt(m[e.index])):e.index;Rm(p,t,n,o,a,f,!1)}}return u}function CD(e){return e.startsWith("animation")||e.startsWith("transition")}function ID(e,t,n,r){let i=e.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let a=t[Mr],c=i[o+2];return a&&a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function Rm(e,t,n,r,i,o,s){let a=t.firstCreatePass?Ip(t):null,c=Cp(n),u=c.length;c.push(i,o),a&&a.push(r,e,u,(u+1)*(s?-1:1))}function hg(e,t,n,r,i,o){let s=t[n],a=t[P],u=a.data[n].outputs[r],d=s[u].subscribe(o);Rm(e.index,a,t,i,o,d,!0)}var Td=Symbol("BINDING");var ka=class extends so{ngModule;constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let n=Zt(t);return new jr(n,this.ngModule)}};function SD(e){return Object.keys(e).map(t=>{let[n,r,i]=e[t],o={propName:n,templateName:t,isSignal:(r&za.SignalBased)!==0};return i&&(o.transform=i),o})}function TD(e){return Object.keys(e).map(t=>({propName:e[t],templateName:t}))}function AD(e,t,n){let r=t instanceof de?t:t?.injector;return r&&e.getStandaloneInjector!==null&&(r=e.getStandaloneInjector(r)||r),r?new Sd(n,r):n}function MD(e){let t=e.get(zn,null);if(t===null)throw new E(407,!1);let n=e.get(Im,null),r=e.get(Nn,null);return{rendererFactory:t,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function RD(e,t){let n=Nm(e);return Yg(t,n,n==="svg"?vp:n==="math"?wp:null)}function Nm(e){return(e.selectors[0][0]||"div").toLowerCase()}var jr=class extends Ka{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=SD(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=TD(this.componentDef.outputs),this.cachedOutputs}constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=aE(t.selectors),this.ngContentSelectors=t.ngContentSelectors??[],this.isBoundToModule=!!n}create(t,n,r,i,o,s){J(z.DynamicComponentStart);let a=F(null);try{let c=this.componentDef,u=ND(r,c,s,o),l=AD(c,i||this.ngModule,t),d=MD(l),h=d.rendererFactory.createRenderer(null,c),f=r?ME(h,r,c.encapsulation,l):RD(c,h),p=s?.some(pg)||o?.some(g=>typeof g!="function"&&g.bindings.some(pg)),m=Ld(null,u,null,512|em(c),null,null,d,h,l,null,Gg(f,l,!0));m[xe]=f,ya(m);let y=null;try{let g=Am(xe,m,2,"#host",()=>u.directiveRegistry,!0,0);Zg(h,f,g),Fr(f,m),Gd(u,m,g),Wg(u,g,m),Mm(u,g),n!==void 0&&OD(g,this.ngContentSelectors,n),y=rt(g.index,m),m[Ae]=y[Ae],Kd(u,m,null)}catch(g){throw y!==null&&vd(y),vd(m),g}finally{J(z.DynamicComponentEnd),va()}return new Pa(this.componentType,m,!!p)}finally{F(a)}}};function ND(e,t,n,r){let i=e?["ng-version","21.0.8"]:cE(t.selectors[0]),o=null,s=null,a=0;if(n)for(let l of n)a+=l[Td].requiredVars,l.create&&(l.targetIdx=0,(o??=[]).push(l)),l.update&&(l.targetIdx=0,(s??=[]).push(l));if(r)for(let l=0;l<r.length;l++){let d=r[l];if(typeof d!="function")for(let h of d.bindings){a+=h[Td].requiredVars;let f=l+1;h.create&&(h.targetIdx=f,(o??=[]).push(h)),h.update&&(h.targetIdx=f,(s??=[]).push(h))}}let c=[t];if(r)for(let l of r){let d=typeof l=="function"?l:l.type,h=Il(d);c.push(h)}return Fd(0,null,xD(o,s),1,a,c,null,null,null,[i],null)}function xD(e,t){return!e&&!t?null:n=>{if(n&1&&e)for(let r of e)r.create();if(n&2&&t)for(let r of t)r.update()}}function pg(e){let t=e[Td].kind;return t==="input"||t==="twoWay"}var Pa=class extends Cm{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(t,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=ha(n[P],xe),this.location=Ua(this._tNode,n),this.instance=rt(this._tNode.index,n)[Ae],this.hostView=this.changeDetectorRef=new sn(n,void 0),this.componentType=t}setInput(t,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),n))return;let i=this._rootLView,o=Wd(r,i[P],i,t,n);this.previousInputValues.set(t,n);let s=rt(r.index,i);Yd(s,1)}get injector(){return new $n(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function OD(e,t,n){let r=e.projection=[];for(let i=0;i<t.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Br=(()=>{class e{static __NG_ELEMENT_ID__=kD}return e})();function kD(){let e=Ue();return FD(e,Q())}var PD=Br,xm=class extends PD{_lContainer;_hostTNode;_hostLView;constructor(t,n,r){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=r}get element(){return Ua(this._hostTNode,this._hostLView)}get injector(){return new $n(this._hostTNode,this._hostLView)}get parentInjector(){let t=Nd(this._hostTNode,this._hostLView);if(Mg(t)){let n=Ma(t,this._hostLView),r=Aa(t),i=n[P].data[r+8];return new $n(i,n)}else return new $n(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let n=gg(this._lContainer);return n!==null&&n[t]||null}get length(){return this._lContainer.length-Ve}createEmbeddedView(t,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=cg(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(a,i,ag(this._hostTNode,s)),a}createComponent(t,n,r,i,o,s,a){let c=t&&!vb(t),u;if(c)u=n;else{let y=n||{};u=y.index,r=y.injector,i=y.projectableNodes,o=y.environmentInjector||y.ngModuleRef,s=y.directives,a=y.bindings}let l=c?t:new jr(Zt(t)),d=r||this.parentInjector;if(!o&&l.ngModule==null){let g=(c?d:this.parentInjector).get(de,null);g&&(o=g)}let h=Zt(l.componentType??{}),f=cg(this._lContainer,h?.id??null),p=f?.firstChild??null,m=l.create(d,i,p,o,s,a);return this.insertImpl(m.hostView,u,ag(this._hostTNode,f)),m}insert(t,n){return this.insertImpl(t,n,!0)}insertImpl(t,n,r){let i=t._lView;if(bp(i)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=i[De],u=new xm(c,c[et],c[De]);u.detach(u.indexOf(t))}}let o=this._adjustIndex(n),s=this._lContainer;return iD(s,i,o,r),t.attachToViewContainerRef(),Al(ud(s),o,t),t}move(t,n){return this.insert(t,n)}indexOf(t){let n=gg(this._lContainer);return n!==null?n.indexOf(t):-1}remove(t){let n=this._adjustIndex(t,-1),r=Cd(this._lContainer,n);r&&(Ui(ud(this._lContainer),n),sm(r[P],r))}detach(t){let n=this._adjustIndex(t,-1),r=Cd(this._lContainer,n);return r&&Ui(ud(this._lContainer),n)!=null?new sn(r):null}_adjustIndex(t,n=0){return t??this.length+n}};function gg(e){return e[qi]}function ud(e){return e[qi]||(e[qi]=[])}function FD(e,t){let n,r=t[e.index];return pt(r)?n=r:(n=Em(r,t,null,e),t[e.index]=n,jd(t,n)),jD(n,t,e,r),new xm(n,e,t)}function LD(e,t){let n=e[re],r=n.createComment(""),i=gt(t,e),o=n.parentNode(i);return xa(n,o,r,n.nextSibling(i),!1),r}var jD=BD,VD=()=>!1;function UD(e,t,n){return VD(e,t,n)}function BD(e,t,n,r){if(e[tn])return;let i;n.type&8?i=nt(r):i=LD(t,n),e[tn]=i}var Gn=class{},Ya=class{};var Fa=class extends Gn{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new ka(this);constructor(t,n,r,i=!0){super(),this.ngModuleType=t,this._parent=n;let o=Cl(t);this._bootstrapComponents=Qg(o.bootstrap),this._r3Injector=Ql(t,n,[{provide:Gn,useValue:this},{provide:so,useValue:this.componentFactoryResolver},...r],jt(t),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},La=class extends Ya{moduleType;constructor(t){super(),this.moduleType=t}create(t){return new Fa(this.moduleType,t,[])}};var no=class extends Gn{injector;componentFactoryResolver=new ka(this);instance=null;constructor(t){super();let n=new Rn([...t.providers,{provide:Gn,useValue:this},{provide:so,useValue:this.componentFactoryResolver}],t.parent||$i(),t.debugName,new Set(["environment"]));this.injector=n,t.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function uo(e,t,n=null){return new no({providers:e,parent:t,debugName:n,runEnvironmentInitializers:!0}).injector}var $D=(()=>{class e{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=Nl(!1,n.type),i=r.length>0?uo([r],this._injector,""):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=I({token:e,providedIn:"environment",factory:()=>new e(M(de))})}return e})();function Ke(e){return io(()=>{let t=Om(e),n=$(_({},t),{decls:e.decls,vars:e.vars,template:e.template,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,onPush:e.changeDetection===xd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&e.dependencies||null,getStandaloneInjector:t.standalone?i=>i.get($D).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:e.signals??!1,data:e.data||{},encapsulation:e.encapsulation||wt.Emulated,styles:e.styles||Ge,_:null,schemas:e.schemas||null,tView:null,id:""});t.standalone&&Bd("NgStandalone"),km(n);let r=e.dependencies;return n.directiveDefs=mg(r,HD),n.pipeDefs=mg(r,op),n.id=qD(n),n})}function HD(e){return Zt(e)||Il(e)}function Ht(e){return io(()=>({type:e.type,bootstrap:e.bootstrap||Ge,declarations:e.declarations||Ge,imports:e.imports||Ge,exports:e.exports||Ge,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null}))}function zD(e,t){if(e==null)return Qt;let n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r],o,s,a,c;Array.isArray(i)?(a=i[0],o=i[1],s=i[2]??o,c=i[3]||null):(o=i,s=i,a=za.None,c=null),n[o]=[r,a,c],t[o]=s}return n}function GD(e){if(e==null)return Qt;let t={};for(let n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function ye(e){return io(()=>{let t=Om(e);return km(t),t})}function Om(e){let t={};return{type:e.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputConfig:e.inputs||Qt,exportAs:e.exportAs||null,standalone:e.standalone??!0,signals:e.signals===!0,selectors:e.selectors||Ge,viewQuery:e.viewQuery||null,features:e.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:zD(e.inputs,t),outputs:GD(e.outputs),debugInfo:null}}function km(e){e.features?.forEach(t=>t(e))}function mg(e,t){return e?()=>{let n=typeof e=="function"?e():e,r=[];for(let i of n){let o=t(i);o!==null&&r.push(o)}return r}:null}function qD(e){let t=0,n=typeof e.consts=="function"?"":e.consts,r=[e.selectors,e.ngContentSelectors,e.hostVars,e.hostAttrs,n,e.vars,e.decls,e.encapsulation,e.standalone,e.signals,e.exportAs,JSON.stringify(e.inputs),JSON.stringify(e.outputs),Object.getOwnPropertyNames(e.type.prototype),!!e.contentQueries,!!e.viewQuery];for(let o of r.join("|"))t=Math.imul(31,t)+o.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function WD(e){return Object.getPrototypeOf(e.prototype).constructor}function it(e){let t=WD(e.type),n=!0,r=[e];for(;t;){let i;if(St(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new E(903,!1);i=t.\u0275dir}if(i){if(n){r.push(i);let s=e;s.inputs=ld(e.inputs),s.declaredInputs=ld(e.declaredInputs),s.outputs=ld(e.outputs);let a=i.hostBindings;a&&QD(e,a);let c=i.viewQuery,u=i.contentQueries;if(c&&JD(e,c),u&&ZD(e,u),KD(e,i),ip(e.outputs,i.outputs),St(i)&&i.data.animation){let l=e.data;l.animation=(l.animation||[]).concat(i.data.animation)}}let o=i.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(e),a===it&&(n=!1)}}t=Object.getPrototypeOf(t)}YD(r)}function KD(e,t){for(let n in t.inputs){if(!t.inputs.hasOwnProperty(n)||e.inputs.hasOwnProperty(n))continue;let r=t.inputs[n];r!==void 0&&(e.inputs[n]=r,e.declaredInputs[n]=t.declaredInputs[n])}}function YD(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Pr(i.hostAttrs,n=Pr(n,i.hostAttrs))}}function ld(e){return e===Qt?{}:e===Ge?[]:e}function JD(e,t){let n=e.viewQuery;n?e.viewQuery=(r,i)=>{t(r,i),n(r,i)}:e.viewQuery=t}function ZD(e,t){let n=e.contentQueries;n?e.contentQueries=(r,i,o)=>{t(r,i,o),n(r,i,o)}:e.contentQueries=t}function QD(e,t){let n=e.hostBindings;n?e.hostBindings=(r,i)=>{t(r,i),n(r,i)}:e.hostBindings=t}function XD(e,t,n,r,i,o,s,a){if(n.firstCreatePass){e.mergedAttrs=Pr(e.mergedAttrs,e.attrs);let l=e.tView=Fd(2,e,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,e),l.queries=n.queries.embeddedTView(e))}a&&(e.flags|=a),xr(e,!1);let c=tC(n,t,e,r);_a()&&Hd(n,t,c,e),Fr(c,t);let u=Em(c,t,c,e);t[r+xe]=u,jd(t,u),UD(u,e,t)}function eC(e,t,n,r,i,o,s,a,c,u,l){let d=n+xe,h;return t.firstCreatePass?(h=Wa(t,d,4,s||null,a||null),$l()&&Sm(t,e,h,Un(t.consts,u),lm),Tg(t,h)):h=t.data[d],XD(h,e,t,n,r,i,o,c),Ki(h)&&Gd(t,e,h),u!=null&&qd(e,h,l),h}function $r(e,t,n,r,i,o,s,a){let c=Q(),u=We(),l=Un(u.consts,o);return eC(c,u,e,t,n,r,i,l,void 0,s,a),$r}var tC=nC;function nC(e,t,n,r){return ba(!0),t[re].createComment("")}var Jd=(()=>{class e{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"platform"})}return e})();function Pm(e){return typeof e=="function"&&e[Me]!==void 0}function Zd(e){return Pm(e)&&typeof e.set=="function"}var Qd=new C("");function cn(e){return!!e&&typeof e.then=="function"}function Xd(e){return!!e&&typeof e.subscribe=="function"}var Fm=new C("");var ef=(()=>{class e{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=v(Fm,{optional:!0})??[];injector=v(dt);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=Ce(this.injector,i);if(cn(o))n.push(o);else if(Xd(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Ja=new C("");function Lm(){ju(()=>{let e="";throw new E(600,e)})}function jm(e){return e.isBoundToModule}var rC=10;var Yn=(()=>{class e{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=v(mt);afterRenderManager=v(rm);zonelessEnabled=v(Qi);rootEffectScheduler=v(id);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ge;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=v(Bt);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(H(n=>!n))}constructor(){v(Kn,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=v(de);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=dt.NULL){return this._injector.get(je).run(()=>{J(z.BootstrapComponentStart);let s=n instanceof Ka;if(!this._injector.get(ef).done){let p="";throw new E(405,p)}let c;s?c=n:c=this._injector.get(so).resolveComponentFactory(n),this.componentTypes.push(c.componentType);let u=jm(c)?void 0:this._injector.get(Gn),l=r||c.selector,d=c.create(i,[],l,u),h=d.location.nativeElement,f=d.injector.get(Qd,null);return f?.registerApplication(h),d.onDestroy(()=>{this.detachView(d.hostView),eo(this.components,d),f?.unregisterApplication(h)}),this._loadComponent(d),J(z.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){J(z.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ud.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw J(z.ChangeDetectionEnd),new E(101,!1);let n=F(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,F(n),this.afterTick.next(),J(z.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(zn,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<rC;){J(z.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{J(z.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!Yi(i))continue;let o=r&&!this.zonelessEnabled?0:1;vm(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>Yi(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;eo(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(Ja,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>eo(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new E(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function eo(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function lo(e,t,n,r){let i=Q(),o=Zi();if(co(i,o,t)){let s=We(),a=wa();jE(a,i,e,t,n,r)}return lo}var GP=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";function Mt(e,t,n){let r=Q(),i=Zi();if(co(r,i,t)){let o=We(),s=wa();um(s,r,e,t,r[re],n)}return Mt}function yg(e,t,n,r,i){Wd(t,e,n,i?"class":"style",r)}function R(e,t,n,r){let i=Q(),o=i[P],s=e+xe,a=o.firstCreatePass?Am(s,i,2,t,lm,$l(),n,r):o.data[s];if(dm(a,i,e,t,Vm),Ki(a)){let c=i[P];Gd(c,i,a),Wg(c,a,i)}return r!=null&&qd(i,a),R}function k(){let e=We(),t=Ue(),n=fm(t);return e.firstCreatePass&&Mm(e,n),Hl(n)&&zl(),Bl(),n.classesWithoutHost!=null&&Cb(n)&&yg(e,n,Q(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&Ib(n)&&yg(e,n,Q(),n.stylesWithoutHost,!1),k}function Rt(e,t,n,r){return R(e,t,n,r),k(),Rt}function Hr(e,t,n,r){let i=Q(),o=i[P],s=e+xe,a=o.firstCreatePass?ED(s,o,2,t,n,r):o.data[s];return dm(a,i,e,t,Vm),r!=null&&qd(i,a),Hr}function zr(){let e=Ue(),t=fm(e);return Hl(t)&&zl(),Bl(),zr}var Vm=(e,t,n,r,i)=>(ba(!0),Yg(t[re],r,$p()));function fo(){return Q()}var ho="en-US";var iC=ho;function Um(e){typeof e=="string"&&(iC=e.toLowerCase().replace(/_/g,"-"))}function Be(e,t,n){let r=Q(),i=We(),o=Ue();return Bm(i,r,r[re],o,e,t,n),Be}function Bm(e,t,n,r,i,o,s){let a=!0,c=null;if((r.type&3||s)&&(c??=cd(r,t,o),DD(r,e,t,s,n,i,o,c)&&(a=!1)),a){let u=r.outputs?.[i],l=r.hostDirectiveOutputs?.[i];if(l&&l.length)for(let d=0;d<l.length;d+=2){let h=l[d],f=l[d+1];c??=cd(r,t,o),hg(r,t,h,f,i,c)}if(u&&u.length)for(let d of u)c??=cd(r,t,o),hg(r,t,d,i,i,c)}}function po(e=1){return Bp(e)}function go(e){let t=Np();return _p(t,xe+e)}function Da(e,t){return e<<17|t<<2}function qn(e){return e>>17&32767}function oC(e){return(e&2)==2}function sC(e,t){return e&131071|t<<17}function Ad(e){return e|2}function Vr(e){return(e&131068)>>2}function dd(e,t){return e&-131069|t<<2}function aC(e){return(e&1)===1}function Md(e){return e|1}function cC(e,t,n,r,i,o){let s=o?t.classBindings:t.styleBindings,a=qn(s),c=Vr(s);e[r]=n;let u=!1,l;if(Array.isArray(n)){let d=n;l=d[1],(l===null||Tr(d,l)>0)&&(u=!0)}else l=n;if(i)if(c!==0){let h=qn(e[a+1]);e[r+1]=Da(h,a),h!==0&&(e[h+1]=dd(e[h+1],r)),e[a+1]=sC(e[a+1],r)}else e[r+1]=Da(a,0),a!==0&&(e[a+1]=dd(e[a+1],r)),a=r;else e[r+1]=Da(c,0),a===0?a=r:e[c+1]=dd(e[c+1],r),c=r;u&&(e[r+1]=Ad(e[r+1])),vg(e,l,r,!0),vg(e,l,r,!1),uC(t,l,e,r,o),s=Da(a,c),o?t.classBindings=s:t.styleBindings=s}function uC(e,t,n,r,i){let o=i?e.residualClasses:e.residualStyles;o!=null&&typeof t=="string"&&Tr(o,t)>=0&&(n[r+1]=Md(n[r+1]))}function vg(e,t,n,r){let i=e[n+1],o=t===null,s=r?qn(i):Vr(i),a=!1;for(;s!==0&&(a===!1||o);){let c=e[s],u=e[s+1];lC(c,t)&&(a=!0,e[s+1]=r?Md(u):Ad(u)),s=r?qn(u):Vr(u)}a&&(e[n+1]=r?Ad(i):Md(i))}function lC(e,t){return e===null||t==null||(Array.isArray(e)?e[1]:e)===t?!0:Array.isArray(e)&&typeof t=="string"?Tr(e,t)>=0:!1}function mo(e,t){return dC(e,t,null,!0),mo}function dC(e,t,n,r){let i=Q(),o=We(),s=Op(2);if(o.firstUpdatePass&&hC(o,e,s,r),t!==an&&co(i,s,t)){let a=o.data[Bn()];vC(o,a,i,i[re],e,i[s+1]=wC(t,n),r,s)}}function fC(e,t){return t>=e.expandoStartIndex}function hC(e,t,n,r){let i=e.data;if(i[n+1]===null){let o=i[Bn()],s=fC(e,n);_C(o,r)&&t===null&&!s&&(t=!1),t=pC(i,o,t,r),cC(i,o,t,n,s,r)}}function pC(e,t,n,r){let i=Lp(e),o=r?t.residualClasses:t.residualStyles;if(i===null)(r?t.classBindings:t.styleBindings)===0&&(n=fd(null,e,t,n,r),n=ro(n,t.attrs,r),o=null);else{let s=t.directiveStylingLast;if(s===-1||e[s]!==i)if(n=fd(i,e,t,n,r),o===null){let c=gC(e,t,r);c!==void 0&&Array.isArray(c)&&(c=fd(null,e,t,c[1],r),c=ro(c,t.attrs,r),mC(e,t,r,c))}else o=yC(e,t,r)}return o!==void 0&&(r?t.residualClasses=o:t.residualStyles=o),n}function gC(e,t,n){let r=n?t.classBindings:t.styleBindings;if(Vr(r)!==0)return e[qn(r)]}function mC(e,t,n,r){let i=n?t.classBindings:t.styleBindings;e[qn(i)]=r}function yC(e,t,n){let r,i=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<i;o++){let s=e[o].hostAttrs;r=ro(r,s,n)}return ro(r,t.attrs,n)}function fd(e,t,n,r,i){let o=null,s=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<s&&(o=t[a],r=ro(r,o.hostAttrs,i),o!==e);)a++;return e!==null&&(n.directiveStylingLast=a),r}function ro(e,t,n){let r=n?1:2,i=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?i=s:i===r&&(Array.isArray(e)||(e=e===void 0?[]:["",e]),dp(e,s,n?!0:t[++o]))}return e===void 0?null:e}function vC(e,t,n,r,i,o,s,a){if(!(t.type&3))return;let c=e.data,u=c[a+1],l=aC(u)?wg(c,t,n,i,Vr(u),s):void 0;if(!ja(l)){ja(o)||oC(u)&&(o=wg(c,null,n,i,a,s));let d=Ll(Bn(),n);AE(r,s,d,i,o)}}function wg(e,t,n,r,i,o){let s=t===null,a;for(;i>0;){let c=e[i],u=Array.isArray(c),l=u?c[1]:c,d=l===null,h=n[i+1];h===an&&(h=d?Ge:void 0);let f=d?la(h,r):l===r?h:void 0;if(u&&!ja(f)&&(f=la(c,r)),ja(f)&&(a=f,s))return a;let p=e[i+1];i=s?qn(p):Vr(p)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=la(c,r))}return a}function ja(e){return e!==void 0}function wC(e,t){return e==null||e===""||(typeof t=="string"?e=e+t:typeof e=="object"&&(e=jt(Kg(e)))),e}function _C(e,t){return(e.flags&(t?8:16))!==0}function G(e,t=""){let n=Q(),r=We(),i=e+xe,o=r.firstCreatePass?Wa(r,i,1,t,null):r.data[i],s=bC(r,n,o,t,e);n[i]=s,_a()&&Hd(r,n,s,o),xr(o,!1)}var bC=(e,t,n,r,i)=>(ba(!0),Wb(t[re],r));function EC(e,t,n,r=""){return co(e,Zi(),n)?t+aa(n)+r:an}function Jn(e,t,n){let r=Q(),i=EC(r,e,t,n);return i!==an&&DC(r,Bn(),i),Jn}function DC(e,t,n){let r=Ll(t,e);Kb(e[re],r,n)}function Oe(e,t,n){Zd(t)&&(t=t());let r=Q(),i=Zi();if(co(r,i,t)){let o=We(),s=wa();um(s,r,e,t,r[re],n)}return Oe}function $e(e,t){let n=Zd(e);return n&&e.set(t),n}function ke(e,t){let n=Q(),r=We(),i=Ue();return Bm(r,n,n[re],i,e,t),ke}function _g(e,t,n){let r=We();r.firstCreatePass&&$m(t,r.data,r.blueprint,St(e),n)}function $m(e,t,n,r,i){if(e=Ee(e),Array.isArray(e))for(let o=0;o<e.length;o++)$m(e[o],t,n,r,i);else{let o=We(),s=Q(),a=Ue(),c=Mn(e)?e:Ee(e.provide),u=Ol(e),l=a.providerIndexes&1048575,d=a.directiveStart,h=a.providerIndexes>>20;if(Mn(e)||!e.multi){let f=new Hn(u,i,Z,null),p=pd(c,t,i?l:l+h,d);p===-1?(md(Ra(a,s),o,c),hd(o,e,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(f),s.push(f)):(n[p]=f,s[p]=f)}else{let f=pd(c,t,l+h,d),p=pd(c,t,l,l+h),m=f>=0&&n[f],y=p>=0&&n[p];if(i&&!y||!i&&!m){md(Ra(a,s),o,c);let g=SC(i?IC:CC,n.length,i,r,u,e);!i&&y&&(n[p].providerFactory=g),hd(o,e,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(g),s.push(g)}else{let g=Hm(n[i?p:f],u,!i&&r);hd(o,e,f>-1?f:p,g)}!i&&r&&y&&n[p].componentProviders++}}}function hd(e,t,n,r){let i=Mn(t),o=gp(t);if(i||o){let c=(o?Ee(t.useClass):t).prototype.ngOnDestroy;if(c){let u=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){let l=u.indexOf(n);l===-1?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function Hm(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function pd(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function CC(e,t,n,r,i){return Rd(this.multi,[])}function IC(e,t,n,r,i){let o=this.multi,s;if(this.providerFactory){let a=this.providerFactory.componentProviders,c=Na(r,r[P],this.providerFactory.index,i);s=c.slice(0,a),Rd(o,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],Rd(o,s);return s}function Rd(e,t){for(let n=0;n<e.length;n++){let r=e[n];t.push(r())}return t}function SC(e,t,n,r,i,o){let s=new Hn(e,n,Z,null);return s.multi=[],s.index=t,s.componentProviders=0,Hm(s,i,r&&!n),s}function un(e,t){return n=>{n.providersResolver=(r,i)=>_g(r,i?i(e):e,!1),t&&(n.viewProvidersResolver=(r,i)=>_g(r,i?i(t):t,!0))}}var Va=class{ngModuleFactory;componentFactories;constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}},tf=(()=>{class e{compileModuleSync(n){return new La(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=Cl(n),o=Qg(i.declarations).reduce((s,a)=>{let c=Zt(a);return c&&s.push(new jr(c)),s},[]);return new Va(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var zm=(()=>{class e{applicationErrorHandler=v(mt);appRef=v(Yn);taskService=v(Bt);ngZone=v(je);zonelessEnabled=v(Qi);tracing=v(Kn,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new _e;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(Li):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(v(rd,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?ed:Xl;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(Li+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,ed(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Gm(){return[{provide:Nn,useExisting:zm},{provide:je,useClass:ji},{provide:Qi,useValue:!0}]}function TC(){return typeof $localize<"u"&&$localize.locale||ho}var Za=new C("",{factory:()=>v(Za,{optional:!0,skipSelf:!0})||TC()});function Gr(e,t){return As(e,t?.equal)}var Km=Symbol("InputSignalNode#UNSET"),zC=$(_({},Ms),{transformFn:void 0,applyValueToInputSignal(e,t){Ti(e,t)}});function Ym(e,t){let n=Object.create(zC);n.value=e,n.transformFn=t?.transform;function r(){if(Ci(n),n.value===Km){let i=null;throw new E(-950,i)}return n.value}return r[Me]=n,r}function qm(e,t){return Ym(e,t)}function GC(e){return Ym(Km,e)}var Jm=(qm.required=GC,qm);var nf=new C(""),qC=new C("");function yo(e){return!e.moduleRef}function WC(e){let t=yo(e)?e.r3Injector:e.moduleRef.injector,n=t.get(je);return n.run(()=>{yo(e)?e.r3Injector.resolveInjectorInitializers():e.moduleRef.resolveInjectorInitializers();let r=t.get(mt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),yo(e)){let o=()=>t.destroy(),s=e.platformInjector.get(nf);s.add(o),t.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>e.moduleRef.destroy(),s=e.platformInjector.get(nf);s.add(o),e.moduleRef.onDestroy(()=>{eo(e.allPlatformModules,e.moduleRef),i.unsubscribe(),s.delete(o)})}return YC(r,n,()=>{let o=t.get(Bt),s=o.add(),a=t.get(ef);return a.runInitializers(),a.donePromise.then(()=>{let c=t.get(Za,ho);if(Um(c||ho),!t.get(qC,!0))return yo(e)?t.get(Yn):(e.allPlatformModules.push(e.moduleRef),e.moduleRef);if(yo(e)){let l=t.get(Yn);return e.rootComponent!==void 0&&l.bootstrap(e.rootComponent),l}else return KC?.(e.moduleRef,e.allPlatformModules),e.moduleRef}).finally(()=>void o.remove(s))})})}var KC;function YC(e,t,n){try{let r=n();return cn(r)?r.catch(i=>{throw t.runOutsideAngular(()=>e(i)),i}):r}catch(r){throw t.runOutsideAngular(()=>e(r)),r}}var Qa=null;function JC(e=[],t){return dt.create({name:t,providers:[{provide:Bi,useValue:"platform"},{provide:nf,useValue:new Set([()=>Qa=null])},...e]})}function ZC(e=[]){if(Qa)return Qa;let t=JC(e);return Qa=t,Lm(),QC(t),t}function QC(e){let t=e.get($a,null);Ce(e,()=>{t?.forEach(n=>n())})}var wo=(()=>{class e{static __NG_ELEMENT_ID__=XC}return e})();function XC(e){return eI(Ue(),Q(),(e&16)===16)}function eI(e,t,n){if(nn(e)&&!n){let r=rt(e.index,t);return new sn(r,r)}else if(e.type&175){let r=t[tt];return new sn(r,t)}return null}function Zm(e){let{rootComponent:t,appProviders:n,platformProviders:r,platformRef:i}=e;J(z.BootstrapApplicationStart);try{let o=i?.injector??ZC(r),s=[Gm(),qp,...n||[]],a=new no({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return WC({r3Injector:a.injector,platformInjector:o,rootComponent:t})}catch(o){return Promise.reject(o)}finally{J(z.BootstrapApplicationEnd)}}function Xa(e){return typeof e=="boolean"?e:e!=null&&e!=="false"}var Qm=null;function ot(){return Qm}function rf(e){Qm??=e}var _o=class{},qr=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(Xm),providedIn:"platform"})}return e})();var Xm=(()=>{class e extends qr{_location;_history;_doc=v(fe);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return ot().getBaseHref(this._doc)}onPopState(n){let r=ot().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=ot().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>new e,providedIn:"platform"})}return e})();function ny(e,t){return e?t?e.endsWith("/")?t.startsWith("/")?e+t.slice(1):e+t:t.startsWith("/")?e+t:`${e}/${t}`:e:t}function ey(e){let t=e.search(/#|\?|$/);return e[t-1]==="/"?e.slice(0,t-1)+e.slice(t):e}function ln(e){return e&&e[0]!=="?"?`?${e}`:e}var ec=(()=>{class e{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(nI),providedIn:"root"})}return e})(),tI=new C(""),nI=(()=>{class e extends ec{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??v(fe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return ny(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+ln(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+ln(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+ln(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||e)(M(qr),M(tI,8))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Wr=(()=>{class e{_subject=new ge;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=oI(ey(ty(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+ln(r))}normalize(n){return e.stripTrailingSlash(iI(this._basePath,ty(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ln(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+ln(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=ln;static joinWithSlash=ny;static stripTrailingSlash=ey;static \u0275fac=function(r){return new(r||e)(M(ec))};static \u0275prov=I({token:e,factory:()=>rI(),providedIn:"root"})}return e})();function rI(){return new Wr(M(ec))}function iI(e,t){if(!e||!t.startsWith(e))return t;let n=t.substring(e.length);return n===""||["/",";","?","#"].includes(n[0])?n:t}function ty(e){return e.replace(/\/index.html$/,"")}function oI(e){if(new RegExp("^(https?:)?//").test(e)){let[,n]=e.split(/\/\/[^\/]+/);return n}return e}var bo=(()=>{class e{_viewContainer;_context=new tc;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){ry(n,!1),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){ry(n,!1),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||e)(Z(Br),Z(qa))};static \u0275dir=ye({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return e})(),tc=class{$implicit=null;ngIf=null};function ry(e,t){if(e&&!e.createEmbeddedView)throw new E(2020,!1)}var Kr=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Ht({type:e});static \u0275inj=Ct({})}return e})();function Eo(e,t){t=encodeURIComponent(t);for(let n of e.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===t)return decodeURIComponent(o)}return null}var Zn=class{};var iy="browser";var Do=class{_doc;constructor(t){this._doc=t}manager},nc=(()=>{class e extends Do{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||e)(M(fe))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),oc=new C(""),cf=(()=>{class e{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof nc));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof nc);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new E(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||e)(M(oc),M(je))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),of="ng-app-id";function sy(e){for(let t of e)t.remove()}function ay(e,t){let n=t.createElement("style");return n.textContent=e,n}function aI(e,t,n,r){let i=e.head?.querySelectorAll(`style[${of}="${t}"],link[${of}="${t}"]`);if(i)for(let o of i)o.removeAttribute(of),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function af(e,t){let n=t.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",e),n}var uf=(()=>{class e{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,aI(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,ay);r?.forEach(i=>this.addUsage(i,this.external,af))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(sy(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])sy(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,ay(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,af(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||e)(M(fe),M(Ba),M(Ha,8),M(oo))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),sf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},lf=/%COMP%/g;var uy="%COMP%",cI=`_nghost-${uy}`,uI=`_ngcontent-${uy}`,lI=!0,dI=new C("",{factory:()=>lI});function fI(e){return uI.replace(lf,e)}function hI(e){return cI.replace(lf,e)}function ly(e,t){return t.map(n=>n.replace(lf,e))}var df=(()=>{class e{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,i,o,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.defaultRenderer=new Co(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof ic?i.applyToHost(n):i instanceof Io&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case wt.Emulated:o=new ic(c,u,r,this.appId,l,s,a,d);break;case wt.ShadowDom:return new rc(c,n,r,s,a,this.nonce,d,u);case wt.ExperimentalIsolatedShadowDom:return new rc(c,n,r,s,a,this.nonce,d);default:o=new Io(c,u,r,l,s,a,d);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||e)(M(cf),M(uf),M(Ba),M(dI),M(fe),M(je),M(Ha),M(Kn,8))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),Co=class{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(t,n,r,i){this.eventManager=t,this.doc=n,this.ngZone=r,this.tracingService=i}destroy(){}destroyNode=null;createElement(t,n){return n?this.doc.createElementNS(sf[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(cy(t)?t.content:t).appendChild(n)}insertBefore(t,n,r){t&&(cy(t)?t.content:t).insertBefore(n,r)}removeChild(t,n){n.remove()}selectRootElement(t,n){let r=typeof t=="string"?this.doc.querySelector(t):t;if(!r)throw new E(-5104,!1);return n||(r.textContent=""),r}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,r,i){if(i){n=i+":"+n;let o=sf[i];o?t.setAttributeNS(o,n,r):t.setAttribute(n,r)}else t.setAttribute(n,r)}removeAttribute(t,n,r){if(r){let i=sf[r];i?t.removeAttributeNS(i,n):t.removeAttribute(`${r}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,r,i){i&(At.DashCase|At.Important)?t.style.setProperty(n,r,i&At.Important?"important":""):t.style[n]=r}removeStyle(t,n,r){r&At.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,r){t!=null&&(t[n]=r)}setValue(t,n){t.nodeValue=n}listen(t,n,r,i){if(typeof t=="string"&&(t=ot().getGlobalEventTarget(this.doc,t),!t))throw new E(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(t,n,o)),this.eventManager.addEventListener(t,n,o,i)}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;t(n)===!1&&n.preventDefault()}}};function cy(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var rc=class extends Co{hostEl;sharedStylesHost;shadowRoot;constructor(t,n,r,i,o,s,a,c){super(t,i,o,a),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=ly(r.id,u);for(let d of u){let h=document.createElement("style");s&&h.setAttribute("nonce",s),h.textContent=d,this.shadowRoot.appendChild(h)}let l=r.getExternalStyles?.();if(l)for(let d of l){let h=af(d,i);s&&h.setAttribute("nonce",s),this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,r){return super.insertBefore(this.nodeOrShadowRoot(t),n,r)}removeChild(t,n){return super.removeChild(null,n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},Io=class extends Co{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(t,n,r,i,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let u=r.styles;this.styles=c?ly(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&Lr.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ic=class extends Io{contentAttr;hostAttr;constructor(t,n,r,i,o,s,a,c){let u=i+"-"+r.id;super(t,n,r,o,s,a,c,u),this.contentAttr=fI(u),this.hostAttr=hI(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let r=super.createElement(t,n);return super.setAttribute(r,this.contentAttr,""),r}};var sc=class e extends _o{supportsDOMEvents=!0;static makeCurrent(){rf(new e)}onAndCancel(t,n,r,i){return t.addEventListener(n,r,i),()=>{t.removeEventListener(n,r,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.remove()}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=pI();return n==null?null:gI(n)}resetBaseElement(){So=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Eo(document.cookie,t)}},So=null;function pI(){return So=So||document.head.querySelector("base"),So?So.getAttribute("href"):null}function gI(e){return new URL(e,document.baseURI).pathname}var mI=(()=>{class e{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})(),dy=["alt","control","meta","shift"],yI={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},vI={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},fy=(()=>{class e extends Do{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ot().onAndCancel(n,s.domEventName,a,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=e._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),dy.forEach(u=>{let l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=o,r.length!=0||o.length===0)return null;let c={};return c.domEventName=i,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let i=yI[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),dy.forEach(s=>{if(s!==i){let a=vI[s];a(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{e.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||e)(M(fe))};static \u0275prov=I({token:e,factory:e.\u0275fac})}return e})();function ff(e,t,n){let r=_({rootComponent:e,platformRef:n?.platformRef},wI(t));return Zm(r)}function wI(e){return{appProviders:[...CI,...e?.providers??[]],platformProviders:DI}}function _I(){sc.makeCurrent()}function bI(){return new Vt}function EI(){return Od(document),document}var DI=[{provide:oo,useValue:iy},{provide:$a,useValue:_I,multi:!0},{provide:fe,useFactory:EI}];var CI=[{provide:Bi,useValue:"root"},{provide:Vt,useFactory:bI},{provide:oc,useClass:nc,multi:!0},{provide:oc,useClass:fy,multi:!0},df,uf,cf,{provide:zn,useExisting:df},{provide:Zn,useClass:mI},[]];var Qn=class e{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(t){t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof e?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){let n=new e;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof e?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){let n=t.name.toLowerCase();switch(t.op){case"a":case"s":let r=t.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(t.name,n);let i=(t.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=t.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(t,n){let r=t.toLowerCase();this.maybeSetNormalizedName(t,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(t,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=t.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}};var cc=class{map=new Map;set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}},uc=class{encodeKey(t){return hy(t)}encodeValue(t){return hy(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function II(e,t){let n=new Map;return e.length>0&&e.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,a]=o==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,o)),t.decodeValue(i.slice(o+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}var SI=/%(\d[a-f0-9])/gi,TI={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function hy(e){return encodeURIComponent(e).replace(SI,(t,n)=>TI[n]??t)}function ac(e){return`${e}`}var dn=class e{map;encoder;updates=null;cloneFrom=null;constructor(t={}){if(this.encoder=t.encoder||new uc,t.fromString){if(t.fromObject)throw new E(2805,!1);this.map=II(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{let r=t.fromObject[n],i=Array.isArray(r)?r.map(ac):[ac(r)];this.map.set(n,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){let n=[];return Object.keys(t).forEach(r=>{let i=t[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let n=this.encoder.encodeKey(t);return this.map.get(t).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let n=new e({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let n=(t.op==="a"?this.map.get(t.param):void 0)||[];n.push(ac(t.value)),this.map.set(t.param,n);break;case"d":if(t.value!==void 0){let r=this.map.get(t.param)||[],i=r.indexOf(ac(t.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(t.param,r):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};function AI(e){switch(e){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function py(e){return typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer}function gy(e){return typeof Blob<"u"&&e instanceof Blob}function my(e){return typeof FormData<"u"&&e instanceof FormData}function MI(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}var yy="Content-Type",vy="Accept",wy="text/plain",_y="application/json",RI=`${_y}, ${wy}, */*`,To=class e{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(t,n,r,i){this.url=n,this.method=t.toUpperCase();let o;if(AI(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new E(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new Qn,this.context??=new cc,!this.params)this.params=new dn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),c=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||py(this.body)||gy(this.body)||my(this.body)||MI(this.body)?this.body:this.body instanceof dn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||my(this.body)?null:gy(this.body)?this.body.type||null:py(this.body)?null:typeof this.body=="string"?wy:this.body instanceof dn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?_y:null}clone(t={}){let n=t.method||this.method,r=t.url||this.url,i=t.responseType||this.responseType,o=t.keepalive??this.keepalive,s=t.priority||this.priority,a=t.cache||this.cache,c=t.mode||this.mode,u=t.redirect||this.redirect,l=t.credentials||this.credentials,d=t.referrer||this.referrer,h=t.integrity||this.integrity,f=t.referrerPolicy||this.referrerPolicy,p=t.transferCache??this.transferCache,m=t.timeout??this.timeout,y=t.body!==void 0?t.body:this.body,g=t.withCredentials??this.withCredentials,A=t.reportProgress??this.reportProgress,b=t.headers||this.headers,w=t.params||this.params,L=t.context??this.context;return t.setHeaders!==void 0&&(b=Object.keys(t.setHeaders).reduce((Se,B)=>Se.set(B,t.setHeaders[B]),b)),t.setParams&&(w=Object.keys(t.setParams).reduce((Se,B)=>Se.set(B,t.setParams[B]),w)),new e(n,r,y,{params:w,headers:b,context:L,reportProgress:A,responseType:i,withCredentials:g,transferCache:p,keepalive:o,cache:a,priority:s,timeout:m,mode:c,redirect:u,credentials:l,referrer:d,integrity:h,referrerPolicy:f})}},Yr=(function(e){return e[e.Sent=0]="Sent",e[e.UploadProgress=1]="UploadProgress",e[e.ResponseHeader=2]="ResponseHeader",e[e.DownloadProgress=3]="DownloadProgress",e[e.Response=4]="Response",e[e.User=5]="User",e})(Yr||{}),Jr=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(t,n=200,r="OK"){this.headers=t.headers||new Qn,this.status=t.status!==void 0?t.status:n,this.statusText=t.statusText||r,this.url=t.url||null,this.redirected=t.redirected,this.responseType=t.responseType,this.ok=this.status>=200&&this.status<300}},lc=class e extends Jr{constructor(t={}){super(t)}type=Yr.ResponseHeader;clone(t={}){return new e({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},dc=class e extends Jr{body;constructor(t={}){super(t),this.body=t.body!==void 0?t.body:null}type=Yr.Response;clone(t={}){return new e({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0,redirected:t.redirected??this.redirected,responseType:t.responseType??this.responseType})}},Ao=class extends Jr{name="HttpErrorResponse";message;error;ok=!1;constructor(t){super(t,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},NI=200,xI=204;var OI=new C("");var kI=/^\)\]\}',?\n/;var pf=(()=>{class e{xhrFactory;tracingService=v(Kn,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new E(-2800,!1);let r=this.xhrFactory;return j(null).pipe(Qe(()=>new U(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((y,g)=>s.setRequestHeader(y,g.join(","))),n.headers.has(vy)||s.setRequestHeader(vy,RI),!n.headers.has(yy)){let y=n.detectContentTypeHeader();y!==null&&s.setRequestHeader(yy,y)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let y=n.responseType.toLowerCase();s.responseType=y!=="json"?y:"text"}let a=n.serializeBody(),c=null,u=()=>{if(c!==null)return c;let y=s.statusText||"OK",g=new Qn(s.getAllResponseHeaders()),A=s.responseURL||n.url;return c=new lc({headers:g,status:s.status,statusText:y,url:A}),c},l=this.maybePropagateTrace(()=>{let{headers:y,status:g,statusText:A,url:b}=u(),w=null;g!==xI&&(w=typeof s.response>"u"?s.responseText:s.response),g===0&&(g=w?NI:0);let L=g>=200&&g<300;if(n.responseType==="json"&&typeof w=="string"){let Se=w;w=w.replace(kI,"");try{w=w!==""?JSON.parse(w):null}catch(B){w=Se,L&&(L=!1,w={error:B,text:w})}}L?(o.next(new dc({body:w,headers:y,status:g,statusText:A,url:b||void 0})),o.complete()):o.error(new Ao({error:w,headers:y,status:g,statusText:A,url:b||void 0}))}),d=this.maybePropagateTrace(y=>{let{url:g}=u(),A=new Ao({error:y,status:s.status||0,statusText:s.statusText||"Unknown Error",url:g||void 0});o.error(A)}),h=d;n.timeout&&(h=this.maybePropagateTrace(y=>{let{url:g}=u(),A=new Ao({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:g||void 0});o.error(A)}));let f=!1,p=this.maybePropagateTrace(y=>{f||(o.next(u()),f=!0);let g={type:Yr.DownloadProgress,loaded:y.loaded};y.lengthComputable&&(g.total=y.total),n.responseType==="text"&&s.responseText&&(g.partialText=s.responseText),o.next(g)}),m=this.maybePropagateTrace(y=>{let g={type:Yr.UploadProgress,loaded:y.loaded};y.lengthComputable&&(g.total=y.total),o.next(g)});return s.addEventListener("load",l),s.addEventListener("error",d),s.addEventListener("timeout",h),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),a!==null&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),o.next({type:Yr.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",l),s.removeEventListener("timeout",h),n.reportProgress&&(s.removeEventListener("progress",p),a!==null&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||e)(M(Zn))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function PI(e,t){return t(e)}function FI(e,t,n){return(r,i)=>Ce(n,()=>t(r,o=>e(o,i)))}var by=new C("",{factory:()=>[]}),LI=new C(""),Ey=new C("",{factory:()=>!0});var gf=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=M(pf),i},providedIn:"root"})}return e})();var fc=(()=>{class e{backend;injector;chain=null;pendingTasks=v(Ea);contributeToStability=v(Ey);constructor(n,r){this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(by),...this.injector.get(LI,[])]));this.chain=r.reduceRight((i,o)=>FI(i,o,this.injector),PI)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(xi(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||e)(M(gf),M(de))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),mf=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=M(fc),i},providedIn:"root"})}return e})();function hf(e,t){return{body:t,headers:e.headers,context:e.context,observe:e.observe,params:e.params,reportProgress:e.reportProgress,responseType:e.responseType,withCredentials:e.withCredentials,credentials:e.credentials,transferCache:e.transferCache,timeout:e.timeout,keepalive:e.keepalive,priority:e.priority,cache:e.cache,mode:e.mode,redirect:e.redirect,integrity:e.integrity,referrer:e.referrer,referrerPolicy:e.referrerPolicy}}var jI=(()=>{class e{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof To)o=n;else{let c;i.headers instanceof Qn?c=i.headers:c=new Qn(i.headers);let u;i.params&&(i.params instanceof dn?u=i.params:u=new dn({fromObject:i.params})),o=new To(n,r,i.body!==void 0?i.body:null,{headers:c,context:i.context,params:u,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let s=j(o).pipe(Cr(c=>this.handler.handle(c)));if(n instanceof To||i.observe==="events")return s;let a=s.pipe(Ze(c=>c instanceof dc));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(H(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new E(2806,!1);return c.body}));case"blob":return a.pipe(H(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new E(2807,!1);return c.body}));case"text":return a.pipe(H(c=>{if(c.body!==null&&typeof c.body!="string")throw new E(2808,!1);return c.body}));case"json":default:return a.pipe(H(c=>c.body))}case"response":return a;default:throw new E(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new dn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,hf(i,r))}post(n,r,i={}){return this.request("POST",n,hf(i,r))}put(n,r,i={}){return this.request("PUT",n,hf(i,r))}static \u0275fac=function(r){return new(r||e)(M(mf))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var VI=new C("",{factory:()=>!0}),UI="XSRF-TOKEN",BI=new C("",{factory:()=>UI}),$I="X-XSRF-TOKEN",HI=new C("",{providedIn:"root",factory:()=>$I}),zI=(()=>{class e{cookieName=v(BI);doc=v(fe);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Eo(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Dy=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:function(r){let i=null;return r?i=new(r||e):i=M(zI),i},providedIn:"root"})}return e})();function GI(e,t){if(!v(VI)||e.method==="GET"||e.method==="HEAD")return t(e);try{let i=v(qr).href,{origin:o}=new URL(i),{origin:s}=new URL(e.url,o);if(o!==s)return t(e)}catch{return t(e)}let n=v(Dy).getToken(),r=v(HI);return n!=null&&!e.headers.has(r)&&(e=e.clone({headers:e.headers.set(r,n)})),t(e)}function yf(...e){let t=[jI,fc,{provide:mf,useExisting:fc},{provide:gf,useFactory:()=>v(OI,{optional:!0})??v(pf)},{provide:by,useValue:GI,multi:!0}];for(let n of e)t.push(...n.\u0275providers);return kn(t)}var Cy=(()=>{class e{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||e)(M(fe))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var N="primary",Bo=Symbol("RouteTitle"),Ef=class{params;constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function nr(e){return new Ef(e)}function Oy(e,t,n){let r=n.path.split("/");if(r.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||r.length<e.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],a=e[o];if(s[0]===":")i[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function vc(e){return new Promise((t,n)=>{e.pipe(Ft()).subscribe({next:r=>t(r),error:r=>n(r)})})}function WI(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Nt(e[n],t[n]))return!1;return!0}function Nt(e,t){let n=e?Df(e):void 0,r=t?Df(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!ky(e[i],t[i]))return!1;return!0}function Df(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function ky(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),r=[...t].sort();return n.every((i,o)=>r[o]===i)}else return e===t}function Py(e){return e.length>0?e[e.length-1]:null}function ir(e){return Ys(e)?e:cn(e)?ue(Promise.resolve(e)):j(e)}function Fy(e){return Ys(e)?vc(e):Promise.resolve(e)}var KI={exact:jy,subset:Vy},Ly={exact:YI,subset:JI,ignored:()=>!0};function Iy(e,t,n){return KI[n.paths](e.root,t.root,n.matrixParams)&&Ly[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function YI(e,t){return Nt(e,t)}function jy(e,t,n){if(!er(e.segments,t.segments)||!gc(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let r in t.children)if(!e.children[r]||!jy(e.children[r],t.children[r],n))return!1;return!0}function JI(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>ky(e[n],t[n]))}function Vy(e,t,n){return Uy(e,t,t.segments,n)}function Uy(e,t,n,r){if(e.segments.length>n.length){let i=e.segments.slice(0,n.length);return!(!er(i,n)||t.hasChildren()||!gc(i,n,r))}else if(e.segments.length===n.length){if(!er(e.segments,n)||!gc(e.segments,n,r))return!1;for(let i in t.children)if(!e.children[i]||!Vy(e.children[i],t.children[i],r))return!1;return!0}else{let i=n.slice(0,e.segments.length),o=n.slice(e.segments.length);return!er(e.segments,i)||!gc(e.segments,i,r)||!e.children[N]?!1:Uy(e.children[N],t,o,r)}}function gc(e,t,n){return t.every((r,i)=>Ly[n](e[i].parameters,r.parameters))}var bt=class{root;queryParams;fragment;_queryParamMap;constructor(t=new q([],{}),n={},r=null){this.root=t,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=nr(this.queryParams),this._queryParamMap}toString(){return XI.serialize(this)}},q=class{segments;children;parent=null;constructor(t,n){this.segments=t,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return mc(this)}},fn=class{path;parameters;_parameterMap;constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=nr(this.parameters),this._parameterMap}toString(){return $y(this)}};function ZI(e,t){return er(e,t)&&e.every((n,r)=>Nt(n.parameters,t[r].parameters))}function er(e,t){return e.length!==t.length?!1:e.every((n,r)=>n.path===t[r].path)}function QI(e,t){let n=[];return Object.entries(e.children).forEach(([r,i])=>{r===N&&(n=n.concat(t(i,r)))}),Object.entries(e.children).forEach(([r,i])=>{r!==N&&(n=n.concat(t(i,r)))}),n}var $o=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>new hn,providedIn:"root"})}return e})(),hn=class{parse(t){let n=new If(t);return new bt(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Mo(t.root,!0)}`,r=nS(t.queryParams),i=typeof t.fragment=="string"?`#${eS(t.fragment)}`:"";return`${n}${r}${i}`}},XI=new hn;function mc(e){return e.segments.map(t=>$y(t)).join("/")}function Mo(e,t){if(!e.hasChildren())return mc(e);if(t){let n=e.children[N]?Mo(e.children[N],!1):"",r=[];return Object.entries(e.children).forEach(([i,o])=>{i!==N&&r.push(`${i}:${Mo(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=QI(e,(r,i)=>i===N?[Mo(e.children[N],!1)]:[`${i}:${Mo(r,!1)}`]);return Object.keys(e.children).length===1&&e.children[N]!=null?`${mc(e)}/${n[0]}`:`${mc(e)}/(${n.join("//")})`}}function By(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hc(e){return By(e).replace(/%3B/gi,";")}function eS(e){return encodeURI(e)}function Cf(e){return By(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yc(e){return decodeURIComponent(e)}function Sy(e){return yc(e.replace(/\+/g,"%20"))}function $y(e){return`${Cf(e.path)}${tS(e.parameters)}`}function tS(e){return Object.entries(e).map(([t,n])=>`;${Cf(t)}=${Cf(n)}`).join("")}function nS(e){let t=Object.entries(e).map(([n,r])=>Array.isArray(r)?r.map(i=>`${hc(n)}=${hc(i)}`).join("&"):`${hc(n)}=${hc(r)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var rS=/^[^\/()?;#]+/;function vf(e){let t=e.match(rS);return t?t[0]:""}var iS=/^[^\/()?;=#]+/;function oS(e){let t=e.match(iS);return t?t[0]:""}var sS=/^[^=?&#]+/;function aS(e){let t=e.match(sS);return t?t[0]:""}var cS=/^[^&#]+/;function uS(e){let t=e.match(cS);return t?t[0]:""}var If=class{url;remaining;constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new q([],{}):new q([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(r[N]=new q(t,n)),r}parseSegment(){let t=vf(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new E(4009,!1);return this.capture(t),new fn(yc(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=oS(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=vf(this.remaining);i&&(r=i,this.capture(r))}t[yc(n)]=yc(r)}parseQueryParam(t){let n=aS(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=uS(this.remaining);s&&(r=s,this.capture(r))}let i=Sy(n),o=Sy(r);if(t.hasOwnProperty(i)){let s=t[i];Array.isArray(s)||(s=[s],t[i]=s),s.push(o)}else t[i]=o}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=vf(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new E(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=N);let s=this.parseChildren();n[o??N]=Object.keys(s).length===1&&s[N]?s[N]:new q([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new E(4011,!1)}};function Hy(e){return e.segments.length>0?new q([],{[N]:e}):e}function zy(e){let t={};for(let[r,i]of Object.entries(e.children)){let o=zy(i);if(r===N&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[r]=o)}let n=new q(e.segments,t);return lS(n)}function lS(e){if(e.numberOfChildren===1&&e.children[N]){let t=e.children[N];return new q(e.segments.concat(t.segments),t.children)}return e}function ei(e){return e instanceof bt}function Gy(e,t,n=null,r=null,i=new hn){let o=qy(e);return Wy(o,t,n,r,i)}function qy(e){let t;function n(o){let s={};for(let c of o.children){let u=n(c);s[c.outlet]=u}let a=new q(o.url,s);return o===e&&(t=a),a}let r=n(e.root),i=Hy(r);return t??i}function Wy(e,t,n,r,i){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return wf(o,o,o,n,r,i);let s=dS(t);if(s.toRoot())return wf(o,o,new q([],{}),n,r,i);let a=fS(s,o,e),c=a.processChildren?No(a.segmentGroup,a.index,s.commands):Yy(a.segmentGroup,a.index,s.commands);return wf(o,a.segmentGroup,c,n,r,i)}function wc(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ko(e){return typeof e=="object"&&e!=null&&e.outlets}function Ty(e,t,n){e||="\u0275";let r=new bt;return r.queryParams={[e]:t},n.parse(n.serialize(r)).queryParams[e]}function wf(e,t,n,r,i,o){let s={};for(let[u,l]of Object.entries(r??{}))s[u]=Array.isArray(l)?l.map(d=>Ty(u,d,o)):Ty(u,l,o);let a;e===t?a=n:a=Ky(e,t,n);let c=Hy(zy(a));return new bt(c,s,i)}function Ky(e,t,n){let r={};return Object.entries(e.children).forEach(([i,o])=>{o===t?r[i]=n:r[i]=Ky(o,t,n)}),new q(e.segments,r)}var _c=class{isAbsolute;numberOfDoubleDots;commands;constructor(t,n,r){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&wc(r[0]))throw new E(4003,!1);let i=r.find(ko);if(i&&i!==Py(r))throw new E(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function dS(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new _c(!0,0,e);let t=0,n=!1,r=e.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...i,{outlets:a}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,o]},[]);return new _c(n,t,r)}var Qr=class{segmentGroup;processChildren;index;constructor(t,n,r){this.segmentGroup=t,this.processChildren=n,this.index=r}};function fS(e,t,n){if(e.isAbsolute)return new Qr(t,!0,0);if(!n)return new Qr(t,!1,NaN);if(n.parent===null)return new Qr(n,!0,0);let r=wc(e.commands[0])?0:1,i=n.segments.length-1+r;return hS(n,i,e.numberOfDoubleDots)}function hS(e,t,n){let r=e,i=t,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new E(4005,!1);i=r.segments.length}return new Qr(r,!1,i-o)}function pS(e){return ko(e[0])?e[0].outlets:{[N]:e}}function Yy(e,t,n){if(e??=new q([],{}),e.segments.length===0&&e.hasChildren())return No(e,t,n);let r=gS(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){let o=new q(e.segments.slice(0,r.pathIndex),{});return o.children[N]=new q(e.segments.slice(r.pathIndex),e.children),No(o,0,i)}else return r.match&&i.length===0?new q(e.segments,{}):r.match&&!e.hasChildren()?Sf(e,t,n):r.match?No(e,0,i):Sf(e,t,n)}function No(e,t,n){if(n.length===0)return new q(e.segments,{});{let r=pS(n),i={};if(Object.keys(r).some(o=>o!==N)&&e.children[N]&&e.numberOfChildren===1&&e.children[N].segments.length===0){let o=No(e.children[N],t,n);return new q(e.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Yy(e.children[o],t,s))}),Object.entries(e.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new q(e.segments,i)}}function gS(e,t,n){let r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return o;let s=e.segments[i],a=n[r];if(ko(a))break;let c=`${a}`,u=r<n.length-1?n[r+1]:null;if(i>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!My(c,u,s))return o;r+=2}else{if(!My(c,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Sf(e,t,n){let r=e.segments.slice(0,t),i=0;for(;i<n.length;){let o=n[i];if(ko(o)){let c=mS(o.outlets);return new q(r,c)}if(i===0&&wc(n[0])){let c=e.segments[t];r.push(new fn(c.path,Ay(n[0]))),i++;continue}let s=ko(o)?o.outlets[N]:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&wc(a)?(r.push(new fn(s,Ay(a))),i+=2):(r.push(new fn(s,{})),i++)}return new q(r,{})}function mS(e){let t={};return Object.entries(e).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(t[n]=Sf(new q([],{}),0,r))}),t}function Ay(e){let t={};return Object.entries(e).forEach(([n,r])=>t[n]=`${r}`),t}function My(e,t,n){return e==n.path&&Nt(t,n.parameters)}var xo="imperative",ve=(function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e})(ve||{}),Je=class{id;url;constructor(t,n){this.id=t,this.url=n}},rr=class extends Je{type=ve.NavigationStart;navigationTrigger;restoredState;constructor(t,n,r="imperative",i=null){super(t,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},zt=class extends Je{urlAfterRedirects;type=ve.NavigationEnd;constructor(t,n,r){super(t,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Pe=(function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e[e.Aborted=4]="Aborted",e})(Pe||{}),Po=(function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e})(Po||{}),xt=class extends Je{reason;code;type=ve.NavigationCancel;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Gt=class extends Je{reason;code;type=ve.NavigationSkipped;constructor(t,n,r,i){super(t,n),this.reason=r,this.code=i}},ti=class extends Je{error;target;type=ve.NavigationError;constructor(t,n,r,i){super(t,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Fo=class extends Je{urlAfterRedirects;state;type=ve.RoutesRecognized;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},bc=class extends Je{urlAfterRedirects;state;type=ve.GuardsCheckStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ec=class extends Je{urlAfterRedirects;state;shouldActivate;type=ve.GuardsCheckEnd;constructor(t,n,r,i,o){super(t,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Dc=class extends Je{urlAfterRedirects;state;type=ve.ResolveStart;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Cc=class extends Je{urlAfterRedirects;state;type=ve.ResolveEnd;constructor(t,n,r,i){super(t,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ic=class{route;type=ve.RouteConfigLoadStart;constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Sc=class{route;type=ve.RouteConfigLoadEnd;constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Tc=class{snapshot;type=ve.ChildActivationStart;constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ac=class{snapshot;type=ve.ChildActivationEnd;constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Mc=class{snapshot;type=ve.ActivationStart;constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Rc=class{snapshot;type=ve.ActivationEnd;constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Lo=class{},ni=class{url;navigationBehaviorOptions;constructor(t,n){this.url=t,this.navigationBehaviorOptions=n}};function yS(e){return!(e instanceof Lo)&&!(e instanceof ni)}function vS(e,t){return e.providers&&!e._injector&&(e._injector=uo(e.providers,t,`Route: ${e.path}`)),e._injector??t}function _t(e){return e.outlet||N}function wS(e,t){let n=e.filter(r=>_t(r)===t);return n.push(...e.filter(r=>_t(r)!==t)),n}function oi(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Nc=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return oi(this.route?.snapshot)??this.rootInjector}constructor(t){this.rootInjector=t,this.children=new si(this.rootInjector)}},si=(()=>{class e{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Nc(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||e)(M(de))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),xc=class{_root;constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Tf(t,this._root);return n?n.children.map(r=>r.value):[]}firstChild(t){let n=Tf(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Af(t,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return Af(t,this._root).map(n=>n.value)}};function Tf(e,t){if(e===t.value)return t;for(let n of t.children){let r=Tf(e,n);if(r)return r}return null}function Af(e,t){if(e===t.value)return[t];for(let n of t.children){let r=Af(e,n);if(r.length)return r.unshift(t),r}return[]}var Ye=class{value;children;constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Zr(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var jo=class extends xc{snapshot;constructor(t,n){super(t),this.snapshot=n,kf(this,t)}toString(){return this.snapshot.toString()}};function Jy(e){let t=_S(e),n=new be([new fn("",{})]),r=new be({}),i=new be({}),o=new be({}),s=new be(""),a=new pn(n,r,o,s,i,N,e,t.root);return a.snapshot=t.root,new jo(new Ye(a,[]),t)}function _S(e){let t={},n={},r={},o=new tr([],t,r,"",n,N,e,null,{});return new Vo("",new Ye(o,[]))}var pn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(t,n,r,i,o,s,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(H(u=>u[Bo]))??j(void 0),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(H(t=>nr(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(H(t=>nr(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Oc(e,t,n="emptyOnly"){let r,{routeConfig:i}=e;return t!==null&&(n==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?r={params:_(_({},t.params),e.params),data:_(_({},t.data),e.data),resolve:_(_(_(_({},e.data),t.data),i?.data),e._resolvedData)}:r={params:_({},e.params),data:_({},e.data),resolve:_(_({},e.data),e._resolvedData??{})},i&&Qy(i)&&(r.resolve[Bo]=i.title),r}var tr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Bo]}constructor(t,n,r,i,o,s,a,c,u){this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=nr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=nr(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Vo=class extends xc{url;constructor(t,n){super(n),this.url=t,kf(this,n)}toString(){return Zy(this._root)}};function kf(e,t){t.value._routerState=e,t.children.forEach(n=>kf(e,n))}function Zy(e){let t=e.children.length>0?` { ${e.children.map(Zy).join(", ")} } `:"";return`${e.value}${t}`}function _f(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Nt(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Nt(t.params,n.params)||e.paramsSubject.next(n.params),WI(t.url,n.url)||e.urlSubject.next(n.url),Nt(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Mf(e,t){let n=Nt(e.params,t.params)&&ZI(e.url,t.url),r=!e.parent!=!t.parent;return n&&!r&&(!e.parent||Mf(e.parent,t.parent))}function Qy(e){return typeof e.title=="string"||e.title===null}var Xy=new C(""),Ho=(()=>{class e{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=N;activateEvents=new le;deactivateEvents=new le;attachEvents=new le;detachEvents=new le;routerOutletData=Jm();parentContexts=v(si);location=v(Br);changeDetector=v(wo);inputBinder=v(Lc,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new E(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Rf(n,a,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||e)};static \u0275dir=ye({type:e,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Wn]})}return e})(),Rf=class{route;childContexts;parent;outletData;constructor(t,n,r,i){this.route=t,this.childContexts=n,this.parent=r,this.outletData=i}get(t,n){return t===pn?this.route:t===si?this.childContexts:t===Xy?this.outletData:this.parent.get(t,n)}},Lc=new C("");var Pf=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275cmp=Ke({type:e,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Rt(0,"router-outlet")},dependencies:[Ho],encapsulation:2})}return e})();function Ff(e){let t=e.children&&e.children.map(Ff),n=t?$(_({},e),{children:t}):_({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==N&&(n.component=Pf),n}function bS(e,t,n){let r=Uo(e,t._root,n?n._root:void 0);return new jo(r,t)}function Uo(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=t.value;let i=ES(e,t,n);return new Ye(r,i)}else{if(e.shouldAttach(t.value)){let o=e.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Uo(e,a)),s}}let r=DS(t.value),i=t.children.map(o=>Uo(e,o));return new Ye(r,i)}}function ES(e,t,n){return t.children.map(r=>{for(let i of n.children)if(e.shouldReuseRoute(r.value,i.value.snapshot))return Uo(e,r,i);return Uo(e,r)})}function DS(e){return new pn(new be(e.url),new be(e.params),new be(e.queryParams),new be(e.fragment),new be(e.data),e.outlet,e.component,e)}var ri=class{redirectTo;navigationBehaviorOptions;constructor(t,n){this.redirectTo=t,this.navigationBehaviorOptions=n}},ev="ngNavigationCancelingError";function kc(e,t){let{redirectTo:n,navigationBehaviorOptions:r}=ei(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=tv(!1,Pe.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function tv(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[ev]=!0,n.cancellationCode=t,n}function CS(e){return nv(e)&&ei(e.url)}function nv(e){return!!e&&e[ev]}var IS=(e,t,n,r)=>H(i=>(new Nf(t,i.targetRouterState,i.currentRouterState,n,r).activate(e),i)),Nf=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(t,n,r,i,o){this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(t){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,t),_f(this.futureState.root),this.activateChildRoutes(n,r,t)}deactivateChildRoutes(t,n,r){let i=Zr(n);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Zr(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let r=n.getContext(t.value.outlet),i=r&&t.value.component?r.children:n,o=Zr(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(t,n,r){let i=Zr(n);t.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Rc(o.value.snapshot))}),t.children.length&&this.forwardEvent(new Ac(t.value.snapshot))}activateRoutes(t,n,r){let i=t.value,o=n?n.value:null;if(_f(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),_f(a.route.value),this.activateChildRoutes(t,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(t,null,s.children)}else this.activateChildRoutes(t,null,r)}},Pc=class{path;route;constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Xr=class{component;route;constructor(t,n){this.component=t,this.route=n}};function SS(e,t,n){let r=e._root,i=t?t._root:null;return Ro(r,i,n,[r.value])}function TS(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function ai(e,t){let n=Symbol(),r=t.get(e,n);return r===n?typeof e=="function"&&!vl(e)?e:t.get(e):r}function Ro(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Zr(t);return e.children.forEach(s=>{AS(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Oo(a,n.getContext(s),i)),i}function AS(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=MS(s,o,o.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Pc(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ro(e,t,a?a.children:null,r,i):Ro(e,t,n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xr(a.outlet.component,s))}else s&&Oo(t,a,i),i.canActivateChecks.push(new Pc(r)),o.component?Ro(e,null,a?a.children:null,r,i):Ro(e,null,n,r,i);return i}function MS(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!er(e.url,t.url);case"pathParamsOrQueryParamsChange":return!er(e.url,t.url)||!Nt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mf(e,t)||!Nt(e.queryParams,t.queryParams);case"paramsChange":default:return!Mf(e,t)}}function Oo(e,t,n){let r=Zr(e),i=e.value;Object.entries(r).forEach(([o,s])=>{i.component?t?Oo(s,t.children.getContext(o),n):Oo(s,null,n):Oo(s,t,n)}),i.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Xr(t.outlet.component,i)):n.canDeactivateChecks.push(new Xr(null,i)):n.canDeactivateChecks.push(new Xr(null,i))}function zo(e){return typeof e=="function"}function RS(e){return typeof e=="boolean"}function NS(e){return e&&zo(e.canLoad)}function xS(e){return e&&zo(e.canActivate)}function OS(e){return e&&zo(e.canActivateChild)}function kS(e){return e&&zo(e.canDeactivate)}function PS(e){return e&&zo(e.canMatch)}function rv(e){return e instanceof In||e?.name==="EmptyError"}var pc=Symbol("INITIAL_VALUE");function ii(){return Qe(e=>Ju(e.map(t=>t.pipe(Pt(1),Xu(pc)))).pipe(H(t=>{for(let n of t)if(n!==!0){if(n===pc)return pc;if(n===!1||FS(n))return n}return!0}),Ze(t=>t!==pc),Pt(1)))}function FS(e){return ei(e)||e instanceof ri}function iv(e){return e.aborted?j(void 0).pipe(Pt(1)):new U(t=>{let n=()=>{t.next(),t.complete()};return e.addEventListener("abort",n),()=>e.removeEventListener("abort",n)})}function ov(e){return Oi(iv(e))}function LS(e,t){return Re(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?j($(_({},n),{guardsResult:!0})):jS(s,r,i,e).pipe(Re(a=>a&&RS(a)?VS(r,o,e,t):j(a)),H(a=>$(_({},n),{guardsResult:a})))})}function jS(e,t,n,r){return ue(e).pipe(Re(i=>zS(i.component,i.route,n,t,r)),Ft(i=>i!==!0,!0))}function VS(e,t,n,r){return ue(t).pipe(Cr(i=>Dr(BS(i.route.parent,r),US(i.route,r),HS(e,i.path,n),$S(e,i.route,n))),Ft(i=>i!==!0,!0))}function US(e,t){return e!==null&&t&&t(new Mc(e)),j(!0)}function BS(e,t){return e!==null&&t&&t(new Tc(e)),j(!0)}function $S(e,t,n){let r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||r.length===0)return j(!0);let i=r.map(o=>Ri(()=>{let s=oi(t)??n,a=ai(o,s),c=xS(a)?a.canActivate(t,e):Ce(s,()=>a(t,e));return ir(c).pipe(Ft())}));return j(i).pipe(ii())}function HS(e,t,n){let r=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>TS(s)).filter(s=>s!==null).map(s=>Ri(()=>{let a=s.guards.map(c=>{let u=oi(s.node)??n,l=ai(c,u),d=OS(l)?l.canActivateChild(r,e):Ce(u,()=>l(r,e));return ir(d).pipe(Ft())});return j(a).pipe(ii())}));return j(o).pipe(ii())}function zS(e,t,n,r,i){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return j(!0);let s=o.map(a=>{let c=oi(t)??i,u=ai(a,c),l=kS(u)?u.canDeactivate(e,t,n,r):Ce(c,()=>u(e,t,n,r));return ir(l).pipe(Ft())});return j(s).pipe(ii())}function GS(e,t,n,r,i){let o=t.canLoad;if(o===void 0||o.length===0)return j(!0);let s=o.map(a=>{let c=ai(a,e),u=NS(c)?c.canLoad(t,n):Ce(e,()=>c(t,n)),l=ir(u);return i?l.pipe(ov(i)):l});return j(s).pipe(ii(),sv(r))}function sv(e){return qu(Ne(t=>{if(typeof t!="boolean")throw kc(e,t)}),H(t=>t===!0))}function qS(e,t,n,r,i){let o=t.canMatch;if(!o||o.length===0)return j(!0);let s=o.map(a=>{let c=ai(a,e),u=PS(c)?c.canMatch(t,n):Ce(e,()=>c(t,n)),l=ir(u);return i?l.pipe(ov(i)):l});return j(s).pipe(ii(),sv(r))}var Xn=class av extends Error{segmentGroup;constructor(t){super(),this.segmentGroup=t||null,Object.setPrototypeOf(this,av.prototype)}},xf=class cv extends Error{urlTree;constructor(t){super(),this.urlTree=t,Object.setPrototypeOf(this,cv.prototype)}};function WS(e){throw new E(4e3,!1)}function KS(e){throw tv(!1,Pe.GuardRejected)}var YS=class{urlSerializer;urlTree;constructor(t,n){this.urlSerializer=t,this.urlTree=n}async lineralizeSegments(t,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[N])throw WS(`${t.redirectTo}`);i=i.children[N]}}async applyRedirectCommands(t,n,r,i,o){let s=await JS(n,i,o);if(s instanceof bt)throw new xf(s);let a=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),t,r);if(s[0]==="/")throw new xf(a);return a}applyRedirectCreateUrlTree(t,n,r,i){let o=this.createSegmentGroup(t,n.root,r,i);return new bt(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let r={};return Object.entries(t).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(t,n,r,i){let o=this.createSegments(t,n.segments,r,i),s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,r,i)}),new q(o,s)}createSegments(t,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(t,o,i):this.findOrReturn(o,r))}findPosParam(t,n,r){let i=r[n.path.substring(1)];if(!i)throw new E(4001,!1);return i}findOrReturn(t,n){let r=0;for(let i of n){if(i.path===t.path)return n.splice(r),i;r++}return t}};function JS(e,t,n){if(typeof e=="string")return Promise.resolve(e);let r=e,{queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,params:u,data:l,title:d}=t;return vc(ir(Ce(n,()=>r({params:u,data:l,queryParams:i,fragment:o,routeConfig:s,url:a,outlet:c,title:d}))))}var Of={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ZS(e,t,n,r,i,o){let s=uv(e,t,n);return s.matched?(r=vS(t,r),qS(r,t,n,i,o).pipe(H(a=>a===!0?s:_({},Of)))):j(s)}function uv(e,t,n){if(t.path==="**")return QS(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?_({},Of):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Oy)(n,e,t);if(!i)return _({},Of);let o={};Object.entries(i.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=i.consumed.length>0?_(_({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function QS(e){return{matched:!0,parameters:e.length>0?Py(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function Ry(e,t,n,r){return n.length>0&&t0(e,n,r)?{segmentGroup:new q(t,e0(r,new q(n,e.children))),slicedSegments:[]}:n.length===0&&n0(e,n,r)?{segmentGroup:new q(e.segments,XS(e,n,r,e.children)),slicedSegments:n}:{segmentGroup:new q(e.segments,e.children),slicedSegments:n}}function XS(e,t,n,r){let i={};for(let o of n)if(jc(e,t,o)&&!r[_t(o)]){let s=new q([],{});i[_t(o)]=s}return _(_({},r),i)}function e0(e,t){let n={};n[N]=t;for(let r of e)if(r.path===""&&_t(r)!==N){let i=new q([],{});n[_t(r)]=i}return n}function t0(e,t,n){return n.some(r=>jc(e,t,r)&&_t(r)!==N)}function n0(e,t,n){return n.some(r=>jc(e,t,r))}function jc(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function r0(e,t,n){return t.length===0&&!e.children[n]}var i0=class{};async function o0(e,t,n,r,i,o,s="emptyOnly",a){return new a0(e,t,n,r,i,s,o,a).recognize()}var s0=31,a0=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(t,n,r,i,o,s,a,c){this.injector=t,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new YS(this.urlSerializer,this.urlTree)}noMatchError(t){return new E(4002,`'${t.segmentGroup}'`)}async recognize(){let t=Ry(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(t),i=new Ye(r,n),o=new Vo("",i),s=Gy(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(t){let n=new tr([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),N,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,t,N,n),rootSnapshot:n}}catch(r){if(r instanceof xf)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Xn?this.noMatchError(r):r}}async processSegmentGroup(t,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(t,n,r,o);let s=await this.processSegment(t,n,r,r.segments,i,!0,o);return s instanceof Ye?[s]:[]}async processChildren(t,n,r,i){let o=[];for(let c of Object.keys(r.children))c==="primary"?o.unshift(c):o.push(c);let s=[];for(let c of o){let u=r.children[c],l=wS(n,c),d=await this.processSegmentGroup(t,l,u,c,i);s.push(...d)}let a=lv(s);return c0(a),a}async processSegment(t,n,r,i,o,s,a){for(let c of n)try{return await this.processSegmentAgainstRoute(c._injector??t,n,c,r,i,o,s,a)}catch(u){if(u instanceof Xn||rv(u))continue;throw u}if(r0(r,i,o))return new i0;throw new Xn(r)}async processSegmentAgainstRoute(t,n,r,i,o,s,a,c){if(_t(r)!==s&&(s===N||!jc(i,o,r)))throw new Xn(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(t,i,r,o,s,c);if(this.allowRedirects&&a)return this.expandSegmentAgainstRouteUsingRedirect(t,i,n,r,o,s,c);throw new Xn(i)}async expandSegmentAgainstRouteUsingRedirect(t,n,r,i,o,s,a){let{matched:c,parameters:u,consumedSegments:l,positionalParamSegments:d,remainingSegments:h}=uv(n,i,o);if(!c)throw new Xn(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>s0&&(this.allowRedirects=!1));let f=new tr(o,u,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Ny(i),_t(i),i.component??i._loadedComponent??null,i,xy(i)),p=Oc(f,a,this.paramsInheritanceStrategy);if(f.params=Object.freeze(p.params),f.data=Object.freeze(p.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let m=await this.applyRedirects.applyRedirectCommands(l,i.redirectTo,d,f,t),y=await this.applyRedirects.lineralizeSegments(i,m);return this.processSegment(t,r,n,y.concat(h),s,!1,a)}async matchSegmentAgainstRoute(t,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let a=await vc(ZS(n,r,i,t,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!a?.matched)throw new Xn(n);t=r._injector??t;let{routes:c}=await this.getChildConfig(t,r,i),u=r._loadedInjector??t,{parameters:l,consumedSegments:d,remainingSegments:h}=a,f=new tr(d,l,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Ny(r),_t(r),r.component??r._loadedComponent??null,r,xy(r)),p=Oc(f,s,this.paramsInheritanceStrategy);f.params=Object.freeze(p.params),f.data=Object.freeze(p.data);let{segmentGroup:m,slicedSegments:y}=Ry(n,d,h,c);if(y.length===0&&m.hasChildren()){let b=await this.processChildren(u,c,m,f);return new Ye(f,b)}if(c.length===0&&y.length===0)return new Ye(f,[]);let g=_t(r)===o,A=await this.processSegment(u,c,m,y,g?N:o,!0,f);return new Ye(f,A instanceof Ye?[A]:[])}async getChildConfig(t,n,r){if(n.children)return{routes:n.children,injector:t};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await vc(GS(t,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(t,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw KS(n)}return{routes:[],injector:t}}};function c0(e){e.sort((t,n)=>t.value.outlet===N?-1:n.value.outlet===N?1:t.value.outlet.localeCompare(n.value.outlet))}function u0(e){let t=e.value.routeConfig;return t&&t.path===""}function lv(e){let t=[],n=new Set;for(let r of e){if(!u0(r)){t.push(r);continue}let i=t.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):t.push(r)}for(let r of n){let i=lv(r.children);t.push(new Ye(r.value,i))}return t.filter(r=>!n.has(r))}function Ny(e){return e.data||{}}function xy(e){return e.resolve||{}}var l0=new C("",{factory:()=>o0});function d0(e,t,n,r,i,o,s){let a=e.get(l0);return Re(c=>j(c).pipe(Qe(u=>a(e,t,n,r,u.extractedUrl,i,o,s)),H(({state:u,tree:l})=>$(_({},c),{targetSnapshot:u,urlAfterRedirects:l}))))}function f0(e,t){return Re(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return j(n);let o=new Set(i.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let u of dv(c))s.add(u);let a=0;return ue(s).pipe(Cr(c=>o.has(c)?h0(c,r,e,t):(c.data=Oc(c,c.parent,e).resolve,j(void 0))),Ne(()=>a++),Xs(1),Re(c=>a===s.size?j(n):Fe))})}function dv(e){let t=e.children.map(n=>dv(n)).flat();return[e,...t]}function h0(e,t,n,r){let i=e.routeConfig,o=e._resolve;return i?.title!==void 0&&!Qy(i)&&(o[Bo]=i.title),Ri(()=>(e.data=Oc(e,e.parent,n).resolve,p0(o,e,t,r).pipe(H(s=>(e._resolvedData=s,e.data=_(_({},e.data),s),null)))))}function p0(e,t,n,r){let i=Df(e);if(i.length===0)return j({});let o={};return ue(i).pipe(Re(s=>g0(e[s],t,n,r).pipe(Ft(),Ne(a=>{if(a instanceof ri)throw kc(new hn,a);o[s]=a}))),Xs(1),H(()=>o),Ni(s=>rv(s)?Fe:Yu(s)))}function g0(e,t,n,r){let i=oi(t)??r,o=ai(e,i),s=o.resolve?o.resolve(t,n):Ce(i,()=>o(t,n));return ir(s)}function bf(e){return Qe(t=>{let n=e(t);return n?ue(n).pipe(H(()=>t)):j(t)})}var Lf=(()=>{class e{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===N);return r}getResolvedTitleForRoute(n){return n.data[Bo]}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(fv),providedIn:"root"})}return e})(),fv=(()=>{class e extends Lf{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||e)(M(Cy))};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Go=new C("",{factory:()=>({})}),qo=new C(""),hv=(()=>{class e{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=v(tf);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await Fy(Ce(n,()=>r.loadComponent())),s=await mv(gv(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await pv(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();async function pv(e,t,n,r){let i=await Fy(Ce(n,()=>e.loadChildren())),o=await mv(gv(i)),s;o instanceof Ya||Array.isArray(o)?s=o:s=await t.compileModuleAsync(o),r&&r(e);let a,c,u=!1;return Array.isArray(s)?(c=s,u=!0):(a=s.create(n).injector,c=a.get(qo,[],{optional:!0,self:!0}).flat()),{routes:c.map(Ff),injector:a}}function m0(e){return e&&typeof e=="object"&&"default"in e}function gv(e){return m0(e)?e.default:e}async function mv(e){return e}var Vc=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(y0),providedIn:"root"})}return e})(),y0=(()=>{class e{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),yv=new C("");var v0=()=>{},vv=new C(""),wv=(()=>{class e{currentNavigation=yt(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=yt(null);events=new ge;transitionAbortWithErrorSubject=new ge;configLoader=v(hv);environmentInjector=v(de);destroyRef=v(on);urlSerializer=v($o);rootContexts=v(si);location=v(Wr);inputBindingEnabled=v(Lc,{optional:!0})!==null;titleStrategy=v(Lf);options=v(Go,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=v(Vc);createViewTransition=v(yv,{optional:!0});navigationErrorHandler=v(vv,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>j(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new Ic(i)),r=i=>this.events.next(new Sc(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;me(()=>{this.transitions?.next($(_({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new be(null),this.transitions.pipe(Ze(r=>r!==null),Qe(r=>{let i=!1,o=new AbortController;return j(r).pipe(Qe(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Pe.SupersededByNewNavigation),Fe;this.currentTransition=r;let a=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:a?$(_({},a),{previousNavigation:null}):null,abort:()=>o.abort()});let c=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!c&&u!=="reload")return this.events.next(new Gt(s.id,this.urlSerializer.serialize(s.rawUrl),"",Po.IgnoredSameUrlNavigation)),s.resolve(!1),Fe;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return j(s).pipe(Qe(l=>(this.events.next(new rr(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Fe:Promise.resolve(l))),d0(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Ne(l=>{r.targetSnapshot=l.targetSnapshot,r.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=l.urlAfterRedirects,h));let d=new Fo(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:l,extractedUrl:d,source:h,restoredState:f,extras:p}=s,m=new rr(l,this.urlSerializer.serialize(d),h,f);this.events.next(m);let y=Jy(this.rootComponentType).snapshot;return this.currentTransition=r=$(_({},s),{targetSnapshot:y,urlAfterRedirects:d,extras:$(_({},p),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(g=>(g.finalUrl=d,g)),j(r)}else return this.events.next(new Gt(s.id,this.urlSerializer.serialize(s.extractedUrl),"",Po.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Fe}),Ne(s=>{let a=new bc(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(a)}),H(s=>(this.currentTransition=r=$(_({},s),{guards:SS(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),LS(this.environmentInjector,s=>this.events.next(s)),Ne(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw kc(this.urlSerializer,s.guardsResult);let a=new Ec(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(a)}),Ze(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Pe.GuardRejected),!1)),bf(s=>{if(s.guards.canActivateChecks.length!==0)return j(s).pipe(Ne(a=>{let c=new Dc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}),Qe(a=>{let c=!1;return j(a).pipe(f0(this.paramsInheritanceStrategy,this.environmentInjector),Ne({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(a,"",Pe.NoDataFromResolver)}}))}),Ne(a=>{let c=new Cc(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(c)}))}),bf(s=>{let a=u=>{let l=[];if(u.routeConfig?._loadedComponent)u.component=u.routeConfig?._loadedComponent;else if(u.routeConfig?.loadComponent){let d=oi(u)??this.environmentInjector;l.push(this.configLoader.loadComponent(d,u.routeConfig).then(h=>{u.component=h}))}for(let d of u.children)l.push(...a(d));return l},c=a(s.targetSnapshot.root);return c.length===0?j(s):ue(Promise.all(c).then(()=>s))}),bf(()=>this.afterPreactivation()),Qe(()=>{let{currentSnapshot:s,targetSnapshot:a}=r,c=this.createViewTransition?.(this.environmentInjector,s.root,a.root);return c?ue(c).pipe(H(()=>r)):j(r)}),H(s=>{let a=bS(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=$(_({},s),{targetRouterState:a}),this.currentNavigation.update(c=>(c.targetRouterState=a,c)),r}),Ne(()=>{this.events.next(new Lo)}),IS(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Pt(1),Oi(iv(o.signal).pipe(Ze(()=>!i&&!r.targetRouterState),Ne(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Pe.Aborted)}))),Ne({next:s=>{i=!0,this.currentNavigation.update(a=>(a.abort=v0,a)),this.lastSuccessfulNavigation.set(me(this.currentNavigation)),this.events.next(new zt(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Oi(this.transitionAbortWithErrorSubject.pipe(Ne(s=>{throw s}))),xi(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Pe.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Ni(s=>{if(this.destroyed)return r.resolve(!1),Fe;if(i=!0,nv(s))this.events.next(new xt(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),CS(s)?this.events.next(new ni(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let a=new ti(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let c=Ce(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(c instanceof ri){let{message:u,cancellationCode:l}=kc(this.urlSerializer,c);this.events.next(new xt(r.id,this.urlSerializer.serialize(r.extractedUrl),u,l)),this.events.next(new ni(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(a),s}catch(c){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(c)}}return Fe}))}))}cancelNavigationTransition(n,r,i){let o=new xt(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=me(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function w0(e){return e!==xo}var _v=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(_0),providedIn:"root"})}return e})(),Fc=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},_0=(()=>{class e extends Fc{static \u0275fac=(()=>{let n;return function(i){return(n||(n=$t(e)))(i||e)}})();static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),jf=(()=>{class e{urlSerializer=v($o);options=v(Go,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=v(Wr);urlHandlingStrategy=v(Vc);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new bt;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof bt?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=Jy(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:()=>v(bv),providedIn:"root"})}return e})(),bv=(()=>{class e extends jf{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof rr?this.updateStateMemento():n instanceof Gt?this.commitTransition(r):n instanceof Fo?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Lo?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof xt&&n.code!==Pe.SupersededByNewNavigation&&n.code!==Pe.Redirect?this.restoreHistory(r):n instanceof ti?this.restoreHistory(r,!0):n instanceof zt&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let a=this.browserPageId,c=_(_({},s),this.generateNgRouterState(i,a));this.location.replaceState(n,"",c)}else{let a=_(_({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",a)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=$t(e)))(i||e)}})();static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function Vf(e,t){e.events.pipe(Ze(n=>n instanceof zt||n instanceof xt||n instanceof ti||n instanceof Gt),H(n=>n instanceof zt||n instanceof Gt?0:(n instanceof xt?n.code===Pe.Redirect||n.code===Pe.SupersededByNewNavigation:!1)?2:1),Ze(n=>n!==2),Pt(1)).subscribe(()=>{t()})}var b0={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},E0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},gn=(()=>{class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=v(Jd);stateManager=v(jf);options=v(Go,{optional:!0})||{};pendingTasks=v(Bt);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=v(wv);urlSerializer=v($o);location=v(Wr);urlHandlingStrategy=v(Vc);injector=v(de);_events=new ge;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=v(_v);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=v(qo,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!v(Lc,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new _e;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=me(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof xt&&r.code!==Pe.Redirect&&r.code!==Pe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof zt)this.navigated=!0;else if(r instanceof ni){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),c=_({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||w0(i.source)},s);this.scheduleNavigation(a,xo,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}yS(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xo,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let c=_({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(n);this.scheduleNavigation(a,r,s,o).catch(c=>{this.disposed||this.injector.get(mt)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return me(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Ff),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=o||null}l!==null&&(l=this.removeEmptyProps(l));let d;try{let h=i?i.snapshot:this.routerState.snapshot.root;d=qy(h)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),d=this.currentUrlTree.root}return Wy(d,n,l,u??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=ei(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,xo,null,r)}navigate(n,r={skipLocationChange:!1}){return D0(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(xn(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=_({},b0):r===!1?i=_({},E0):i=r,ei(n))return Iy(this.currentUrlTree,n,i);let o=this.parseUrl(n);return Iy(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,h)=>{a=d,c=h});let l=this.pendingTasks.add();return Vf(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||e)};static \u0275prov=I({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();function D0(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new E(4008,!1)}var I0=new C("");function Uf(e,...t){return kn([{provide:qo,multi:!0,useValue:e},[],{provide:pn,useFactory:S0},{provide:Ja,multi:!0,useFactory:T0},t.map(n=>n.\u0275providers)])}function S0(){return v(gn).routerState.root}function T0(){let e=v(dt);return t=>{let n=e.get(Yn);if(t!==n.components[0])return;let r=e.get(gn),i=e.get(A0);e.get(M0)===1&&r.initialNavigation(),e.get(R0,null,{optional:!0})?.setUpPreloading(),e.get(I0,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var A0=new C("",{factory:()=>new ge}),M0=new C("",{factory:()=>1});var R0=new C("");var Uc=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ke({type:e,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"content"]],template:function(n,r){n&1&&(R(0,"main")(1,"section",0),Rt(2,"router-outlet"),k()())},dependencies:[Ho],encapsulation:2})};var Nv=(()=>{class e{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||e)(Z(ao),Z(Ur))};static \u0275dir=ye({type:e})}return e})(),xv=(()=>{class e extends Nv{static \u0275fac=(()=>{let n;return function(i){return(n||(n=$t(e)))(i||e)}})();static \u0275dir=ye({type:e,features:[it]})}return e})(),Hf=new C("");var x0={provide:Hf,useExisting:ft(()=>di),multi:!0};function O0(){let e=ot()?ot().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var k0=new C(""),di=(()=>{class e extends Nv{_compositionMode;_composing=!1;constructor(n,r,i){super(n,r),this._compositionMode=i,this._compositionMode==null&&(this._compositionMode=!O0())}writeValue(n){let r=n??"";this.setProperty("value",r)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||e)(Z(ao),Z(Ur),Z(k0,8))};static \u0275dir=ye({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,i){r&1&&Be("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},standalone:!1,features:[un([x0]),it]})}return e})();function P0(e){return e==null||Ov(e)===0}function Ov(e){return e==null?null:Array.isArray(e)||typeof e=="string"?e.length:e instanceof Set?e.size:null}var Yc=new C(""),kv=new C("");function F0(e){return P0(e.value)?{required:!0}:null}function L0(e){return t=>{let n=t.value?.length??Ov(t.value);return n!==null&&n>e?{maxlength:{requiredLength:e,actualLength:n}}:null}}function Dv(e){return null}function Pv(e){return e!=null}function Fv(e){return cn(e)?ue(e):e}function Lv(e){let t={};return e.forEach(n=>{t=n!=null?_(_({},t),n):t}),Object.keys(t).length===0?null:t}function jv(e,t){return t.map(n=>n(e))}function j0(e){return!e.validate}function Vv(e){return e.map(t=>j0(t)?t:n=>t.validate(n))}function V0(e){if(!e)return null;let t=e.filter(Pv);return t.length==0?null:function(n){return Lv(jv(n,t))}}function zf(e){return e!=null?V0(Vv(e)):null}function U0(e){if(!e)return null;let t=e.filter(Pv);return t.length==0?null:function(n){let r=jv(n,t).map(Fv);return Zu(r).pipe(H(Lv))}}function Gf(e){return e!=null?U0(Vv(e)):null}function Cv(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function B0(e){return e._rawValidators}function $0(e){return e._rawAsyncValidators}function Bf(e){return e?Array.isArray(e)?e:[e]:[]}function $c(e,t){return Array.isArray(e)?e.includes(t):e===t}function Iv(e,t){let n=Bf(t);return Bf(e).forEach(i=>{$c(n,i)||n.push(i)}),n}function Sv(e,t){return Bf(t).filter(n=>!$c(e,n))}var Hc=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=zf(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Gf(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},li=class extends Hc{name;get formDirective(){return null}get path(){return null}},Qo=class extends Hc{_parent=null;name=null;valueAccessor=null},zc=class{_cd;constructor(t){this._cd=t}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}};var Jc=(()=>{class e extends zc{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Z(Qo,2))};static \u0275dir=ye({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,i){r&2&&mo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},standalone:!1,features:[it]})}return e})(),Zc=(()=>{class e extends zc{constructor(n){super(n)}static \u0275fac=function(r){return new(r||e)(Z(li,10))};static \u0275dir=ye({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,i){r&2&&mo("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},standalone:!1,features:[it]})}return e})();var Wo="VALID",Bc="INVALID",ci="PENDING",Ko="DISABLED",mn=class{},Gc=class extends mn{value;source;constructor(t,n){super(),this.value=t,this.source=n}},Jo=class extends mn{pristine;source;constructor(t,n){super(),this.pristine=t,this.source=n}},Zo=class extends mn{touched;source;constructor(t,n){super(),this.touched=t,this.source=n}},ui=class extends mn{status;source;constructor(t,n){super(),this.status=t,this.source=n}},$f=class extends mn{source;constructor(t){super(),this.source=t}},qc=class extends mn{source;constructor(t){super(),this.source=t}};function Uv(e){return(Qc(e)?e.validators:e)||null}function H0(e){return Array.isArray(e)?zf(e):e||null}function Bv(e,t){return(Qc(t)?t.asyncValidators:e)||null}function z0(e){return Array.isArray(e)?Gf(e):e||null}function Qc(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function G0(e,t,n){let r=e.controls;if(!(t?Object.keys(r):r).length)throw new E(1e3,"");if(!r[n])throw new E(1001,"")}function q0(e,t,n){e._forEachChild((r,i)=>{if(n[i]===void 0)throw new E(1002,"")})}var Wc=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(t,n){this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get status(){return me(this.statusReactive)}set status(t){me(()=>this.statusReactive.set(t))}_status=Gr(()=>this.statusReactive());statusReactive=yt(void 0);get valid(){return this.status===Wo}get invalid(){return this.status===Bc}get pending(){return this.status==ci}get disabled(){return this.status===Ko}get enabled(){return this.status!==Ko}errors;get pristine(){return me(this.pristineReactive)}set pristine(t){me(()=>this.pristineReactive.set(t))}_pristine=Gr(()=>this.pristineReactive());pristineReactive=yt(!0);get dirty(){return!this.pristine}get touched(){return me(this.touchedReactive)}set touched(t){me(()=>this.touchedReactive.set(t))}_touched=Gr(()=>this.touchedReactive());touchedReactive=yt(!1);get untouched(){return!this.touched}_events=new ge;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Iv(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Iv(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Sv(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Sv(t,this._rawAsyncValidators))}hasValidator(t){return $c(this._rawValidators,t)}hasAsyncValidator(t){return $c(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){let n=this.touched===!1;this.touched=!0;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsTouched($(_({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Zo(!0,r))}markAllAsDirty(t={}){this.markAsDirty({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(t))}markAllAsTouched(t={}){this.markAsTouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(t))}markAsUntouched(t={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:t.emitEvent,sourceControl:r})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,r),n&&t.emitEvent!==!1&&this._events.next(new Zo(!1,r))}markAsDirty(t={}){let n=this.pristine===!0;this.pristine=!1;let r=t.sourceControl??this;this._parent&&!t.onlySelf&&this._parent.markAsDirty($(_({},t),{sourceControl:r})),n&&t.emitEvent!==!1&&this._events.next(new Jo(!1,r))}markAsPristine(t={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=t.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:t.emitEvent})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t,r),n&&t.emitEvent!==!1&&this._events.next(new Jo(!0,r))}markAsPending(t={}){this.status=ci;let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new ui(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.markAsPending($(_({},t),{sourceControl:n}))}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ko,this.errors=null,this._forEachChild(i=>{i.disable($(_({},t),{onlySelf:!0}))}),this._updateValue();let r=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Gc(this.value,r)),this._events.next(new ui(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors($(_({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Wo,this._forEachChild(r=>{r.enable($(_({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors($(_({},t),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(t,n){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Wo||this.status===ci)&&this._runAsyncValidator(r,t.emitEvent)}let n=t.sourceControl??this;t.emitEvent!==!1&&(this._events.next(new Gc(this.value,n)),this._events.next(new ui(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity($(_({},t),{sourceControl:n}))}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ko:Wo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t,n){if(this.asyncValidator){this.status=ci,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1,shouldHaveEmitted:t!==!1};let r=Fv(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:n,shouldHaveEmitted:t})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let t=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,t}return!1}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(t,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t,n,r){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),(t||r)&&this._events.next(new ui(this.status,n)),this._parent&&this._parent._updateControlsErrors(t,n,r)}_initObservables(){this.valueChanges=new le,this.statusChanges=new le}_calculateStatus(){return this._allControlsDisabled()?Ko:this.errors?Bc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ci)?ci:this._anyControlsHaveStatus(Bc)?Bc:Wo}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t,n){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!t.onlySelf&&this._parent._updatePristine(t,n),i&&this._events.next(new Jo(this.pristine,n))}_updateTouched(t={},n){this.touched=this._anyControlsTouched(),this._events.next(new Zo(this.touched,n)),this._parent&&!t.onlySelf&&this._parent._updateTouched(t,n)}_onDisabledChange=[];_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Qc(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=H0(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=z0(this._rawAsyncValidators)}},Kc=class extends Wc{constructor(t,n,r){super(Uv(n),Bv(r,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,r={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,r={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){q0(this,!0,t),Object.keys(t).forEach(r=>{G0(this,!0,r),this.controls[r].setValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(r=>{let i=this.controls[r];i&&i.patchValue(t[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((r,i)=>{r.reset(t?t[i]:null,$(_({},n),{onlySelf:!0}))}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),n?.emitEvent!==!1&&this._events.next(new qc(this))}getRawValue(){return this._reduceChildren({},(t,n,r)=>(t[r]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&t(r,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&t(r))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(t,n){let r=t;return this._forEachChild((i,o)=>{r=n(r,i,o)}),r}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var qf=new C("",{factory:()=>Wf}),Wf="always";function W0(e,t){return[...t.path,e]}function $v(e,t,n=Wf){Hv(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),Y0(e,t),Z0(e,t),J0(e,t),K0(e,t)}function Tv(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function K0(e,t){if(t.valueAccessor.setDisabledState){let n=r=>{t.valueAccessor.setDisabledState(r)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function Hv(e,t){let n=B0(e);t.validator!==null?e.setValidators(Cv(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let r=$0(e);t.asyncValidator!==null?e.setAsyncValidators(Cv(r,t.asyncValidator)):typeof r=="function"&&e.setAsyncValidators([r]);let i=()=>e.updateValueAndValidity();Tv(t._rawValidators,i),Tv(t._rawAsyncValidators,i)}function Y0(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&zv(e,t)})}function J0(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&zv(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function zv(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Z0(e,t){let n=(r,i)=>{t.valueAccessor.writeValue(r),i&&t.viewToModelUpdate(r)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function Q0(e,t){e==null,Hv(e,t)}function X0(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function eT(e){return Object.getPrototypeOf(e.constructor)===xv}function tT(e,t){e._syncPendingControls(),t.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function nT(e,t){if(!t)return null;Array.isArray(t);let n,r,i;return t.forEach(o=>{o.constructor===di?n=o:eT(o)?r=o:i=o}),i||r||n||null}var rT={provide:li,useExisting:ft(()=>Xo)},Yo=Promise.resolve(),Xo=(()=>{class e extends li{callSetDisabledState;get submitted(){return me(this.submittedReactive)}_submitted=Gr(()=>this.submittedReactive());submittedReactive=yt(!1);_directives=new Set;form;ngSubmit=new le;options;constructor(n,r,i){super(),this.callSetDisabledState=i,this.form=new Kc({},zf(n),Gf(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Yo.then(()=>{let r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),$v(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Yo.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Yo.then(()=>{let r=this._findContainer(n.path),i=new Kc({});Q0(i,n),r.registerControl(n.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Yo.then(()=>{let r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){Yo.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),tT(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new $f(this.control)),n?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||e)(Z(Yc,10),Z(kv,10),Z(qf,8))};static \u0275dir=ye({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,i){r&1&&Be("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[un([rT]),it]})}return e})();function Av(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Mv(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var iT=class extends Wc{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(t=null,n,r){super(Uv(n),Bv(r,n)),this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Mv(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,n?.emitEvent!==!1&&this._events.next(new qc(this))}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Av(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Av(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Mv(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var oT={provide:Qo,useExisting:ft(()=>es)},Rv=Promise.resolve(),es=(()=>{class e extends Qo{_changeDetectorRef;callSetDisabledState;control=new iT;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new le;constructor(n,r,i,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=nT(this,o)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),X0(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){$v(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){Rv.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let r=n.isDisabled.currentValue,i=r!==0&&Xa(r);Rv.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?W0(n,this._parent):[n]}static \u0275fac=function(r){return new(r||e)(Z(li,9),Z(Yc,10),Z(kv,10),Z(Hf,10),Z(wo,8),Z(qf,8))};static \u0275dir=ye({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[un([oT]),it,Wn]})}return e})();var Xc=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275dir=ye({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return e})(),sT={provide:Hf,useExisting:ft(()=>Kf),multi:!0},Kf=(()=>{class e extends xv{writeValue(n){let r=n??"";this.setProperty("value",r)}registerOnChange(n){this.onChange=r=>{n(r==""?null:parseFloat(r))}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=$t(e)))(i||e)}})();static \u0275dir=ye({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,i){r&1&&Be("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},standalone:!1,features:[un([sT]),it]})}return e})();function aT(e){return typeof e=="number"?e:parseInt(e,10)}var Gv=(()=>{class e{_validator=Dv;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){let r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Dv,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return n!=null}static \u0275fac=function(r){return new(r||e)};static \u0275dir=ye({type:e,features:[Wn]})}return e})();var cT={provide:Yc,useExisting:ft(()=>ts),multi:!0};var ts=(()=>{class e extends Gv{required;inputName="required";normalizeInput=Xa;createValidator=n=>F0;enabled(n){return n}static \u0275fac=(()=>{let n;return function(i){return(n||(n=$t(e)))(i||e)}})();static \u0275dir=ye({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,i){r&2&&lo("required",i._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[un([cT]),it]})}return e})();var uT={provide:Yc,useExisting:ft(()=>Yf),multi:!0},Yf=(()=>{class e extends Gv{maxlength;inputName="maxlength";normalizeInput=n=>aT(n);createValidator=n=>L0(n);static \u0275fac=(()=>{let n;return function(i){return(n||(n=$t(e)))(i||e)}})();static \u0275dir=ye({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(r,i){r&2&&lo("maxlength",i._enabled?i.maxlength:null)},inputs:{maxlength:"maxlength"},standalone:!1,features:[un([uT]),it]})}return e})();var lT=(()=>{class e{static \u0275fac=function(r){return new(r||e)};static \u0275mod=Ht({type:e});static \u0275inj=Ct({})}return e})();var eu=(()=>{class e{static withConfig(n){return{ngModule:e,providers:[{provide:qf,useValue:n.callSetDisabledState??Wf}]}}static \u0275fac=function(r){return new(r||e)};static \u0275mod=Ht({type:e});static \u0275inj=Ct({imports:[lT]})}return e})();var Wv=e=>e?(...t)=>e(...t):(...t)=>fetch(...t);var fi=class extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}},ns=class extends fi{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},hi=class extends fi{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},pi=class extends fi{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},tu=(function(e){return e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2",e})(tu||{});var rs=class{constructor(t,{headers:n={},customFetch:r,region:i=tu.Any}={}){this.url=t,this.headers=n,this.region=i,this.fetch=Wv(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Fs(this,arguments,void 0,function*(n,r={}){var i;let o,s;try{let{headers:a,method:c,body:u,signal:l,timeout:d}=r,h={},{region:f}=r;f||(f=this.region);let p=new URL(`${this.url}/${n}`);f&&f!=="any"&&(h["x-region"]=f,p.searchParams.set("forceFunctionRegion",f));let m;u&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&u instanceof Blob||u instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",m=u):typeof u=="string"?(h["Content-Type"]="text/plain",m=u):typeof FormData<"u"&&u instanceof FormData?m=u:(h["Content-Type"]="application/json",m=JSON.stringify(u)):u&&typeof u!="string"&&!(typeof Blob<"u"&&u instanceof Blob)&&!(u instanceof ArrayBuffer)&&!(typeof FormData<"u"&&u instanceof FormData)?m=JSON.stringify(u):m=u;let y=l;d&&(s=new AbortController,o=setTimeout(()=>s.abort(),d),l?(y=s.signal,l.addEventListener("abort",()=>s.abort())):y=s.signal);let g=yield this.fetch(p.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),a),body:m,signal:y}).catch(L=>{throw new ns(L)}),A=g.headers.get("x-relay-error");if(A&&A==="true")throw new hi(g);if(!g.ok)throw new pi(g);let b=((i=g.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),w;return b==="application/json"?w=yield g.json():b==="application/octet-stream"||b==="application/pdf"?w=yield g.blob():b==="text/event-stream"?w=g:b==="multipart/form-data"?w=yield g.formData():w=yield g.text(),{data:w,error:null,response:g}}catch(a){return{data:null,error:a,response:a instanceof pi||a instanceof hi?a.context:void 0}}finally{o&&clearTimeout(o)}})}};var Yv=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}},dT=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=(t=e.shouldThrowOnError)!==null&&t!==void 0?t:!1,this.signal=e.signal,this.isMaybeSingle=(n=e.isMaybeSingle)!==null&&n!==void 0?n:!1,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){var n=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let r=this.fetch,i=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async o=>{let s=null,a=null,c=null,u=o.status,l=o.statusText;if(o.ok){var d,h;if(n.method!=="HEAD"){var f;let g=await o.text();g===""||(n.headers.get("Accept")==="text/csv"||n.headers.get("Accept")&&(!((f=n.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?a=g:a=JSON.parse(g))}let m=(d=n.headers.get("Prefer"))===null||d===void 0?void 0:d.match(/count=(exact|planned|estimated)/),y=(h=o.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");m&&y&&y.length>1&&(c=parseInt(y[1])),n.isMaybeSingle&&n.method==="GET"&&Array.isArray(a)&&(a.length>1?(s={code:"PGRST116",details:`Results contain ${a.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},a=null,c=null,u=406,l="Not Acceptable"):a.length===1?a=a[0]:a=null)}else{var p;let m=await o.text();try{s=JSON.parse(m),Array.isArray(s)&&o.status===404&&(a=[],s=null,u=200,l="OK")}catch{o.status===404&&m===""?(u=204,l="No Content"):s={message:m}}if(s&&n.isMaybeSingle&&(!(s==null||(p=s.details)===null||p===void 0)&&p.includes("0 rows"))&&(s=null,u=200,l="OK"),s&&n.shouldThrowOnError)throw new Yv(s)}return{error:s,data:a,count:c,status:u,statusText:l}});return this.shouldThrowOnError||(i=i.catch(o=>{var s;let a="",c=o?.cause;if(c){var u,l,d,h;let p=(u=c?.message)!==null&&u!==void 0?u:"",m=(l=c?.code)!==null&&l!==void 0?l:"";a=`${(d=o?.name)!==null&&d!==void 0?d:"FetchError"}: ${o?.message}`,a+=`

Caused by: ${(h=c?.name)!==null&&h!==void 0?h:"Error"}: ${p}`,m&&(a+=` (${m})`),c?.stack&&(a+=`
${c.stack}`)}else{var f;a=(f=o?.stack)!==null&&f!==void 0?f:""}return{error:{message:`${(s=o?.name)!==null&&s!==void 0?s:"FetchError"}: ${o?.message}`,details:a,hint:"",code:""},data:null,count:null,status:0,statusText:""}})),i.then(e,t)}returns(){return this}overrideTypes(){return this}},fT=class extends dT{select(e){let t=!1,n=(e??"*").split("").map(r=>/\s/.test(r)&&!t?"":(r==='"'&&(t=!t),r)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){let o=i?`${i}.order`:"order",s=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${s?`${s},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){let r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:r=n}={}){let i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var s;let a=[e?"analyze":null,t?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(s=this.headers.get("Accept"))!==null&&s!==void 0?s:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${c}"; options=${a};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}},Kv=new RegExp("[,()]"),gi=class extends fT{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}regexMatch(e,t){return this.url.searchParams.append(e,`match.${t}`),this}regexIMatch(e,t){return this.url.searchParams.append(e,`imatch.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}isDistinct(e,t){return this.url.searchParams.append(e,`isdistinct.${t}`),this}in(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Kv.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}notIn(e,t){let n=Array.from(new Set(t)).map(r=>typeof r=="string"&&Kv.test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`not.in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");let o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){let r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}},hT=class{constructor(e,{headers:t={},schema:n,fetch:r}){this.url=e,this.headers=new Headers(t),this.schema=n,this.fetch=r}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(e,t){let{head:n=!1,count:r}=t??{},i=n?"HEAD":"GET",o=!1,s=(e??"*").split("").map(u=>/\s/.test(u)&&!o?"":(u==='"'&&(o=!o),u)).join(""),{url:a,headers:c}=this.cloneRequestState();return a.searchParams.set("select",s),r&&c.append("Prefer",`count=${r}`),new gi({method:i,url:a,headers:c,schema:this.schema,fetch:this.fetch})}insert(e,{count:t,defaultToNull:n=!0}={}){var r;let i="POST",{url:o,headers:s}=this.cloneRequestState();if(t&&s.append("Prefer",`count=${t}`),n||s.append("Prefer","missing=default"),Array.isArray(e)){let a=e.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(a.length>0){let c=[...new Set(a)].map(u=>`"${u}"`);o.searchParams.set("columns",c.join(","))}}return new gi({method:i,url:o,headers:s,schema:this.schema,body:e,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){var o;let s="POST",{url:a,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),t!==void 0&&a.searchParams.set("on_conflict",t),r&&c.append("Prefer",`count=${r}`),i||c.append("Prefer","missing=default"),Array.isArray(e)){let u=e.reduce((l,d)=>l.concat(Object.keys(d)),[]);if(u.length>0){let l=[...new Set(u)].map(d=>`"${d}"`);a.searchParams.set("columns",l.join(","))}}return new gi({method:s,url:a,headers:c,schema:this.schema,body:e,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(e,{count:t}={}){var n;let r="PATCH",{url:i,headers:o}=this.cloneRequestState();return t&&o.append("Prefer",`count=${t}`),new gi({method:r,url:i,headers:o,schema:this.schema,body:e,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:e}={}){var t;let n="DELETE",{url:r,headers:i}=this.cloneRequestState();return e&&i.append("Prefer",`count=${e}`),new gi({method:n,url:r,headers:i,schema:this.schema,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch})}},Jv=class Zv{constructor(t,{headers:n={},schema:r,fetch:i}={}){this.url=t,this.headers=new Headers(n),this.schemaName=r,this.fetch=i}from(t){if(!t||typeof t!="string"||t.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new hT(new URL(`${this.url}/${t}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Zv(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:i=!1,count:o}={}){var s;let a,c=new URL(`${this.url}/rpc/${t}`),u,l=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(l)),d=r&&Object.values(n).some(l);d?(a="POST",u=n):r||i?(a=r?"HEAD":"GET",Object.entries(n).filter(([f,p])=>p!==void 0).map(([f,p])=>[f,Array.isArray(p)?`{${p.join(",")}}`:`${p}`]).forEach(([f,p])=>{c.searchParams.append(f,p)})):(a="POST",u=n);let h=new Headers(this.headers);return d?h.set("Prefer",o?`count=${o},return=minimal`:"return=minimal"):o&&h.set("Prefer",`count=${o}`),new gi({method:a,url:c,headers:h,schema:this.schemaName,body:u,fetch:(s=this.fetch)!==null&&s!==void 0?s:fetch})}};var Jf=class{constructor(){}static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let n=globalThis.process;if(n){let r=n.versions;if(r&&r.node){let i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let t=this.detectEnvironment();if(t.constructor)return t.constructor;let n=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(n+=`

Suggested solution: ${t.workaround}`),new Error(n)}static createWebSocket(t,n){let r=this.getWebSocketConstructor();return new r(t,n)}static isWebSocketSupported(){try{let t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}},Zf=Jf;var Qv="2.93.2";var Xv=`realtime-js/${Qv}`,ew="1.0.0",Qf="2.0.0",Xf=Qf;var is=1e4,tw=1e3,nw=100,yn=(function(e){return e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed",e})(yn||{}),he=(function(e){return e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving",e})(he||{}),st=(function(e){return e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token",e})(st||{}),eh=(function(e){return e.websocket="websocket",e})(eh||{}),or=(function(e){return e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed",e})(or||{});var nu=class{constructor(t){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=t??[]}encode(t,n){if(t.event===this.BROADCAST_EVENT&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return n(this._binaryEncodeUserBroadcastPush(t));let r=[t.join_ref,t.ref,t.topic,t.event,t.payload];return n(JSON.stringify(r))}_binaryEncodeUserBroadcastPush(t){var n;return this._isArrayBuffer((n=t.payload)===null||n===void 0?void 0:n.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var n,r;let i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:new ArrayBuffer(0);return this._encodeUserBroadcastPush(t,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(t){var n,r;let i=(r=(n=t.payload)===null||n===void 0?void 0:n.payload)!==null&&r!==void 0?r:{},s=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(t,this.JSON_ENCODING,s)}_encodeUserBroadcastPush(t,n,r){var i,o;let s=t.topic,a=(i=t.ref)!==null&&i!==void 0?i:"",c=(o=t.join_ref)!==null&&o!==void 0?o:"",u=t.payload.event,l=this.allowedMetadataKeys?this._pick(t.payload,this.allowedMetadataKeys):{},d=Object.keys(l).length===0?"":JSON.stringify(l);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(a.length>255)throw new Error(`ref length ${a.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`topic length ${s.length} exceeds maximum of 255`);if(u.length>255)throw new Error(`userEvent length ${u.length} exceeds maximum of 255`);if(d.length>255)throw new Error(`metadata length ${d.length} exceeds maximum of 255`);let h=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+a.length+s.length+u.length+d.length,f=new ArrayBuffer(this.HEADER_LENGTH+h),p=new DataView(f),m=0;p.setUint8(m++,this.KINDS.userBroadcastPush),p.setUint8(m++,c.length),p.setUint8(m++,a.length),p.setUint8(m++,s.length),p.setUint8(m++,u.length),p.setUint8(m++,d.length),p.setUint8(m++,n),Array.from(c,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(a,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(s,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(u,g=>p.setUint8(m++,g.charCodeAt(0))),Array.from(d,g=>p.setUint8(m++,g.charCodeAt(0)));var y=new Uint8Array(f.byteLength+r.byteLength);return y.set(new Uint8Array(f),0),y.set(new Uint8Array(r),f.byteLength),y.buffer}decode(t,n){if(this._isArrayBuffer(t)){let r=this._binaryDecode(t);return n(r)}if(typeof t=="string"){let r=JSON.parse(t),[i,o,s,a,c]=r;return n({join_ref:i,ref:o,topic:s,event:a,payload:c})}return n({})}_binaryDecode(t){let n=new DataView(t),r=n.getUint8(0),i=new TextDecoder;switch(r){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,n,i)}}_decodeUserBroadcast(t,n,r){let i=n.getUint8(1),o=n.getUint8(2),s=n.getUint8(3),a=n.getUint8(4),c=this.HEADER_LENGTH+4,u=r.decode(t.slice(c,c+i));c=c+i;let l=r.decode(t.slice(c,c+o));c=c+o;let d=r.decode(t.slice(c,c+s));c=c+s;let h=t.slice(c,t.byteLength),f=a===this.JSON_ENCODING?JSON.parse(r.decode(h)):h,p={type:this.BROADCAST_EVENT,event:l,payload:f};return s>0&&(p.meta=JSON.parse(d)),{join_ref:null,ref:null,topic:u,event:this.BROADCAST_EVENT,payload:p}}_isArrayBuffer(t){var n;return t instanceof ArrayBuffer||((n=t?.constructor)===null||n===void 0?void 0:n.name)==="ArrayBuffer"}_pick(t,n){return!t||typeof t!="object"?{}:Object.fromEntries(Object.entries(t).filter(([r])=>n.includes(r)))}};var mi=class{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var X=(function(e){return e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange",e})(X||{}),nh=(e,t,n={})=>{var r;let i=(r=n.skipTypes)!==null&&r!==void 0?r:[];return t?Object.keys(t).reduce((o,s)=>(o[s]=pT(s,e,t,i),o),{}):{}},pT=(e,t,n,r)=>{let i=t.find(a=>a.name===e),o=i?.type,s=n[e];return o&&!r.includes(o)?rw(o,s):th(s)},rw=(e,t)=>{if(e.charAt(0)==="_"){let n=e.slice(1,e.length);return vT(t,n)}switch(e){case X.bool:return gT(t);case X.float4:case X.float8:case X.int2:case X.int4:case X.int8:case X.numeric:case X.oid:return mT(t);case X.json:case X.jsonb:return yT(t);case X.timestamp:return wT(t);case X.abstime:case X.date:case X.daterange:case X.int4range:case X.int8range:case X.money:case X.reltime:case X.text:case X.time:case X.timestamptz:case X.timetz:case X.tsrange:case X.tstzrange:return th(t);default:return th(t)}},th=e=>e,gT=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},mT=e=>{if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return t}return e},yT=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e},vT=(e,t)=>{if(typeof e!="string")return e;let n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let o,s=e.slice(1,n);try{o=JSON.parse("["+s+"]")}catch{o=s?s.split(","):[]}return o.map(a=>rw(t,a))}return e},wT=e=>typeof e=="string"?e.replace(" ","T"):e,ru=e=>{let t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};var yi=class{constructor(t,n,r={},i=is){this.channel=t,this.event=n,this.payload=r,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var os=class e{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let r=n?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,i,o,s),this.pendingDiffs.forEach(c=>{this.state=e.syncDiff(this.state,c,o,s)}),this.pendingDiffs=[],a()}),this.channel._on(r.diff,{},i=>{let{onJoin:o,onLeave:s,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=e.syncDiff(this.state,i,o,s),a())}),this.onJoin((i,o,s)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:o,newPresences:s})}),this.onLeave((i,o,s)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:o,leftPresences:s})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,i){let o=this.cloneDeep(t),s=this.transformState(n),a={},c={};return this.map(o,(u,l)=>{s[u]||(c[u]=l)}),this.map(s,(u,l)=>{let d=o[u];if(d){let h=l.map(y=>y.presence_ref),f=d.map(y=>y.presence_ref),p=l.filter(y=>f.indexOf(y.presence_ref)<0),m=d.filter(y=>h.indexOf(y.presence_ref)<0);p.length>0&&(a[u]=p),m.length>0&&(c[u]=m)}else a[u]=l}),this.syncDiff(o,{joins:a,leaves:c},r,i)}static syncDiff(t,n,r,i){let{joins:o,leaves:s}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),i||(i=()=>{}),this.map(o,(a,c)=>{var u;let l=(u=t[a])!==null&&u!==void 0?u:[];if(t[a]=this.cloneDeep(c),l.length>0){let d=t[a].map(f=>f.presence_ref),h=l.filter(f=>d.indexOf(f.presence_ref)<0);t[a].unshift(...h)}r(a,l,c)}),this.map(s,(a,c)=>{let u=t[a];if(!u)return;let l=c.map(d=>d.presence_ref);u=u.filter(d=>l.indexOf(d.presence_ref)<0),t[a]=u,i(a,u,c),u.length===0&&delete t[a]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{let i=t[r];return"metas"in i?n[r]=i.metas.map(o=>(o.presence_ref=o.phx_ref,delete o.phx_ref,delete o.phx_ref_prev,o)):n[r]=i,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var ss=(function(e){return e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system",e})(ss||{}),qt=(function(e){return e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR",e})(qt||{});var as=class e{constructor(t,n={config:{}},r){var i,o;if(this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=he.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new yi(this,st.join,this.params,this.timeout),this.rejoinTimer=new mi(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=he.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=he.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=he.errored,this.rejoinTimer.scheduleTimeout())}),this._on(st.reply,{},(s,a)=>{this._trigger(this._replyEventName(a),s)}),this.presence=new os(this),this.broadcastEndpointURL=ru(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((o=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||o===void 0)&&o.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,n=this.timeout){var r,i,o;if(this.socket.isConnected()||this.socket.connect(),this.state==he.closed){let{config:{broadcast:s,presence:a,private:c}}=this.params,u=(i=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(f=>f.filter))!==null&&i!==void 0?i:[],l=!!this.bindings[ss.PRESENCE]&&this.bindings[ss.PRESENCE].length>0||((o=this.params.config.presence)===null||o===void 0?void 0:o.enabled)===!0,d={},h={broadcast:s,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:u,private:c};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(f=>t?.(qt.CHANNEL_ERROR,f)),this._onClose(()=>t?.(qt.CLOSED)),this.updateJoinPayload(Object.assign({config:h},d)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:f})=>{var p;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){t?.(qt.SUBSCRIBED);return}else{let m=this.bindings.postgres_changes,y=(p=m?.length)!==null&&p!==void 0?p:0,g=[];for(let A=0;A<y;A++){let b=m[A],{filter:{event:w,schema:L,table:Se,filter:B}}=b,ee=f&&f[A];if(ee&&ee.event===w&&e.isFilterValueEqual(ee.schema,L)&&e.isFilterValueEqual(ee.table,Se)&&e.isFilterValueEqual(ee.filter,B))g.push(Object.assign(Object.assign({},b),{id:ee.id}));else{this.unsubscribe(),this.state=he.errored,t?.(qt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(qt.SUBSCRIBED);return}}).receive("error",f=>{this.state=he.errored,t?.(qt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{t?.(qt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this.state===he.joined&&t===ss.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(t,n,r)}async httpSend(t,n,r={}){var i;if(n==null)return Promise.reject("Payload is required for httpSend()");let o={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(o.Authorization=`Bearer ${this.socket.accessTokenValue}`);let s={method:"POST",headers:o,body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:n,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,s,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{let u=await a.json();c=u.error||u.message||c}catch{}return Promise.reject(new Error(c))}async send(t,n={}){var r,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:o,payload:s}=t,a={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(a.Authorization=`Bearer ${this.socket.accessTokenValue}`);let c={method:"POST",headers:a,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,a,c;let u=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(a=(s=this.params)===null||s===void 0?void 0:s.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=he.leaving;let n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(st.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(i=>{r=new yi(this,st.leave,{},t),r.receive("ok",()=>{n(),i("ok")}).receive("timeout",()=>{n(),i("timed out")}).receive("error",()=>{i("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=he.closed,this.bindings={}}async _fetchWithTimeout(t,n,r){let i=new AbortController,o=setTimeout(()=>i.abort(),r),s=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:i.signal}));return clearTimeout(o),s}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new yi(this,t,n,r);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>nw){let n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var i,o;let s=t.toLocaleLowerCase(),{close:a,error:c,leave:u,join:l}=st;if(r&&[a,c,u,l].indexOf(s)>=0&&r!==this._joinRef())return;let h=this._onMessage(s,n,r);if(n&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var p,m,y;return((p=f.filter)===null||p===void 0?void 0:p.event)==="*"||((y=(m=f.filter)===null||m===void 0?void 0:m.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===s}).map(f=>f.callback(h,r)):(o=this.bindings[s])===null||o===void 0||o.filter(f=>{var p,m,y,g,A,b;if(["broadcast","presence","postgres_changes"].includes(s))if("id"in f){let w=f.id,L=(p=f.filter)===null||p===void 0?void 0:p.event;return w&&((m=n.ids)===null||m===void 0?void 0:m.includes(w))&&(L==="*"||L?.toLocaleLowerCase()===((y=n.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{let w=(A=(g=f?.filter)===null||g===void 0?void 0:g.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return w==="*"||w===((b=n?.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===s}).map(f=>{if(typeof h=="object"&&"ids"in h){let p=h.data,{schema:m,table:y,commit_timestamp:g,type:A,errors:b}=p;h=Object.assign(Object.assign({},{schema:m,table:y,commit_timestamp:g,eventType:A,new:{},old:{},errors:b}),this._getPayloadRecords(p))}f.callback(h,r)})}_isClosed(){return this.state===he.closed}_isJoined(){return this.state===he.joined}_isJoining(){return this.state===he.joining}_isLeaving(){return this.state===he.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){let i=t.toLocaleLowerCase(),o={type:i,filter:n,callback:r};return this.bindings[i]?this.bindings[i].push(o):this.bindings[i]=[o],this}_off(t,n){let r=t.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(i=>{var o;return!(((o=i.type)===null||o===void 0?void 0:o.toLocaleLowerCase())===r&&e.isEqual(i.filter,n))})),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(let r in t)if(t[r]!==n[r])return!1;return!0}static isFilterValueEqual(t,n){return(t??void 0)===(n??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(st.close,{},t)}_onError(t){this._on(st.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=he.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=nh(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=nh(t.columns,t.old_record)),n}};var rh=()=>{},iu={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bT=[1e3,2e3,5e3,1e4],ET=1e4,DT=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,cs=class{constructor(t,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=is,this.transport=null,this.heartbeatIntervalMs=iu.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=rh,this.ref=0,this.reconnectTimer=null,this.vsn=Xf,this.logger=rh,this.conn=null,this.sendBuffer=[],this.serializer=new nu,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...o)=>i(...o):(...o)=>fetch(...o),!(!((r=n?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${t}/${eh.websocket}`,this.httpEndpoint=ru(t),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Zf.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");let n=t.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,n??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){let n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){let t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case yn.connecting:return or.Connecting;case yn.open:return or.Open;case yn.closing:return or.Closing;default:return or.Closed}}isConnected(){return this.connectionState()===or.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,n={config:{}}){let r=`realtime:${t}`,i=this.getChannels().find(o=>o.topic===r);if(i)return i;{let o=new as(`realtime:${t}`,n,this);return this.channels.push(o),o}}push(t){let{topic:n,event:r,payload:i,ref:o}=t,s=()=>{this.encode(t,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${n} ${r} (${o})`,i),this.isConnected()?s():this.sendBuffer.push(s)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(tw,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},iu.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply"&&n.ref&&n.ref===this.pendingHeartbeatRef){let u=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error",u)}catch(l){this.log("error","error in heartbeat callback",l)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:r,event:i,payload:o,ref:s}=n,a=s?`(${s})`:"",c=o.status||"";this.log("receive",`${c} ${r} ${i} ${a}`.trim(),o),this.channels.filter(u=>u._isMember(r)).forEach(u=>u._trigger(i,o,s)),this._triggerStateCallbacks("message",n)})}_clearTimer(t){var n;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t),this.conn.readyState===yn.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===yn.open||this.conn.readyState===yn.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(n=>{this.log("error","error waiting for auth on connect",n),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this._terminateWorker()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(t){var n;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t);try{this.heartbeatCallback("error")}catch(n){this.log("error","error in heartbeat callback",n)}}_triggerChanError(){this.channels.forEach(t=>t._trigger(st.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;let r=t.match(/\?/)?"&":"?",i=new URLSearchParams(n);return`${t}${r}${i}`}_workerObjectUrl(t){let n;if(t)n=t;else{let r=new Blob([DT],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(t,n=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(t=null){let n,r=!1;if(t)n=t,r=!0;else if(this.accessToken)try{n=await this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),n=this.accessTokenValue}else n=this.accessTokenValue;r?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{let o={access_token:n,version:Xv};n&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(st.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this._isManualToken()||this.setAuth().catch(n=>{this.log("error",`Error setting auth in ${t}`,n)})}_triggerStateCallbacks(t,n){try{this.stateChangeCallbacks[t].forEach(r=>{try{r(n)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(r){this.log("error",`error triggering ${t} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new mi(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},iu.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var n,r,i,o,s,a,c,u,l,d,h,f;switch(this.transport=(n=t?.transport)!==null&&n!==void 0?n:null,this.timeout=(r=t?.timeout)!==null&&r!==void 0?r:is,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:iu.HEARTBEAT_INTERVAL,this.worker=(o=t?.worker)!==null&&o!==void 0?o:!1,this.accessToken=(s=t?.accessToken)!==null&&s!==void 0?s:null,this.heartbeatCallback=(a=t?.heartbeatCallback)!==null&&a!==void 0?a:rh,this.vsn=(c=t?.vsn)!==null&&c!==void 0?c:Xf,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t?.reconnectAfterMs)!==null&&u!==void 0?u:p=>bT[p-1]||ET,this.vsn){case ew:this.encode=(l=t?.encode)!==null&&l!==void 0?l:(p,m)=>m(JSON.stringify(p)),this.decode=(d=t?.decode)!==null&&d!==void 0?d:(p,m)=>m(JSON.parse(p));break;case Qf:this.encode=(h=t?.encode)!==null&&h!==void 0?h:this.serializer.encode.bind(this.serializer),this.decode=(f=t?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}};var us=class extends Error{constructor(e,t){super(e),this.name="IcebergError",this.status=t.status,this.icebergType=t.icebergType,this.icebergCode=t.icebergCode,this.details=t.details,this.isCommitStateUnknown=t.icebergType==="CommitStateUnknownException"||[500,502,504].includes(t.status)&&t.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function CT(e,t,n){let r=new URL(t,e);if(n)for(let[i,o]of Object.entries(n))o!==void 0&&r.searchParams.set(i,o);return r.toString()}async function IT(e){return!e||e.type==="none"?{}:e.type==="bearer"?{Authorization:`Bearer ${e.token}`}:e.type==="header"?{[e.name]:e.value}:e.type==="custom"?await e.getHeaders():{}}function ST(e){let t=e.fetchImpl??globalThis.fetch;return{async request({method:n,path:r,query:i,body:o,headers:s}){let a=CT(e.baseUrl,r,i),c=await IT(e.auth),u=await t(a,{method:n,headers:_(_(_({},o?{"Content-Type":"application/json"}:{}),c),s),body:o?JSON.stringify(o):void 0}),l=await u.text(),d=(u.headers.get("content-type")||"").includes("application/json"),h=d&&l?JSON.parse(l):l;if(!u.ok){let f=d?h:void 0,p=f?.error;throw new us(p?.message??`Request failed with status ${u.status}`,{status:u.status,icebergType:p?.type,icebergCode:p?.code,details:f})}return{status:u.status,headers:u.headers,data:h}}}}function ou(e){return e.join("")}var TT=class{constructor(e,t=""){this.client=e,this.prefix=t}async listNamespaces(e){let t=e?{parent:ou(e.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:t})).data.namespaces.map(r=>({namespace:r}))}async createNamespace(e,t){let n={namespace:e.namespace,properties:t?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:n})).data}async dropNamespace(e){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ou(e.namespace)}`})}async loadNamespaceMetadata(e){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ou(e.namespace)}`})).data.properties}}async namespaceExists(e){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ou(e.namespace)}`}),!0}catch(t){if(t instanceof us&&t.status===404)return!1;throw t}}async createNamespaceIfNotExists(e,t){try{return await this.createNamespace(e,t)}catch(n){if(n instanceof us&&n.status===409)return;throw n}}};function vi(e){return e.join("")}var AT=class{constructor(e,t="",n){this.client=e,this.prefix=t,this.accessDelegation=n}async listTables(e){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vi(e.namespace)}/tables`})).data.identifiers}async createTable(e,t){let n={};return this.accessDelegation&&(n["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vi(e.namespace)}/tables`,body:t,headers:n})).data.metadata}async updateTable(e,t){let n=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${vi(e.namespace)}/tables/${e.name}`,body:t});return{"metadata-location":n.data["metadata-location"],metadata:n.data.metadata}}async dropTable(e,t){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${vi(e.namespace)}/tables/${e.name}`,query:{purgeRequested:String(t?.purge??!1)}})}async loadTable(e){let t={};return this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${vi(e.namespace)}/tables/${e.name}`,headers:t})).data.metadata}async tableExists(e){let t={};this.accessDelegation&&(t["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${vi(e.namespace)}/tables/${e.name}`,headers:t}),!0}catch(n){if(n instanceof us&&n.status===404)return!1;throw n}}async createTableIfNotExists(e,t){try{return await this.createTable(e,t)}catch(n){if(n instanceof us&&n.status===409)return await this.loadTable({namespace:e.namespace,name:t.name});throw n}}},iw=class{constructor(e){let t="v1";e.catalogName&&(t+=`/${e.catalogName}`);let n=e.baseUrl.endsWith("/")?e.baseUrl:`${e.baseUrl}/`;this.client=ST({baseUrl:n,auth:e.auth,fetchImpl:e.fetch}),this.accessDelegation=e.accessDelegation?.join(","),this.namespaceOps=new TT(this.client,t),this.tableOps=new AT(this.client,t,this.accessDelegation)}async listNamespaces(e){return this.namespaceOps.listNamespaces(e)}async createNamespace(e,t){return this.namespaceOps.createNamespace(e,t)}async dropNamespace(e){await this.namespaceOps.dropNamespace(e)}async loadNamespaceMetadata(e){return this.namespaceOps.loadNamespaceMetadata(e)}async listTables(e){return this.tableOps.listTables(e)}async createTable(e,t){return this.tableOps.createTable(e,t)}async updateTable(e,t){return this.tableOps.updateTable(e,t)}async dropTable(e,t){await this.tableOps.dropTable(e,t)}async loadTable(e){return this.tableOps.loadTable(e)}async namespaceExists(e){return this.namespaceOps.namespaceExists(e)}async tableExists(e){return this.tableOps.tableExists(e)}async createNamespaceIfNotExists(e,t){return this.namespaceOps.createNamespaceIfNotExists(e,t)}async createTableIfNotExists(e,t){return this.tableOps.createTableIfNotExists(e,t)}};var au=class extends Error{constructor(e,t="storage",n,r){super(e),this.__isStorageError=!0,this.namespace=t,this.name=t==="vectors"?"StorageVectorsError":"StorageError",this.status=n,this.statusCode=r}};function cu(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}var su=class extends au{constructor(e,t,n,r="storage"){super(e,r,t,n),this.name=r==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},cw=class extends au{constructor(e,t,n="storage"){super(e,n),this.name=n==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=t}};var MT=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),RT=e=>{if(typeof e!="object"||e===null)return!1;let t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},ih=e=>{if(Array.isArray(e))return e.map(n=>ih(n));if(typeof e=="function"||e!==Object(e))return e;let t={};return Object.entries(e).forEach(([n,r])=>{let i=n.replace(/([-_][a-z])/gi,o=>o.toUpperCase().replace(/[-_]/g,""));t[i]=ih(r)}),t},NT=e=>!e||typeof e!="string"||e.length===0||e.length>100||e.trim()!==e||e.includes("/")||e.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(e);function ds(e){"@babel/helpers - typeof";return ds=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ds(e)}function xT(e,t){if(ds(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(ds(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function OT(e){var t=xT(e,"string");return ds(t)=="symbol"?t:t+""}function kT(e,t,n){return(t=OT(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ow(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ow(Object(n),!0).forEach(function(r){kT(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ow(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var sw=e=>{var t;return e.msg||e.message||e.error_description||(typeof e.error=="string"?e.error:(t=e.error)===null||t===void 0?void 0:t.message)||JSON.stringify(e)},PT=async(e,t,n,r)=>{if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!n?.noResolveJson){let i=e,o=i.status||500;if(typeof i.json=="function")i.json().then(s=>{let a=s?.statusCode||s?.code||o+"";t(new su(sw(s),o,a,r))}).catch(()=>{if(r==="vectors"){let s=o+"";t(new su(i.statusText||`HTTP ${o} error`,o,s,r))}else{let s=o+"";t(new su(i.statusText||`HTTP ${o} error`,o,s,r))}});else{let s=o+"";t(new su(i.statusText||`HTTP ${o} error`,o,s,r))}}else t(new cw(sw(e),e,r))},FT=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e==="GET"||e==="HEAD"||!r?T(T({},i),n):(RT(r)?(i.headers=T({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(r)):i.body=r,t?.duplex&&(i.duplex=t.duplex),T(T({},i),n))};async function ls(e,t,n,r,i,o,s){return new Promise((a,c)=>{e(n,FT(t,r,i,o)).then(u=>{if(!u.ok)throw u;if(r?.noResolveJson)return u;if(s==="vectors"){let l=u.headers.get("content-type");if(!l||!l.includes("application/json"))return{}}return u.json()}).then(u=>a(u)).catch(u=>PT(u,c,r,s))})}function LT(e="storage"){return{get:async(t,n,r,i)=>ls(t,"GET",n,r,i,void 0,e),post:async(t,n,r,i,o)=>ls(t,"POST",n,i,o,r,e),put:async(t,n,r,i,o)=>ls(t,"PUT",n,i,o,r,e),head:async(t,n,r,i)=>ls(t,"HEAD",n,T(T({},r),{},{noResolveJson:!0}),i,void 0,e),remove:async(t,n,r,i,o)=>ls(t,"DELETE",n,i,o,r,e)}}var jT=LT("storage"),{get:fs,post:te,put:oh,head:VT,remove:sh}=jT,wi=class{constructor(e,t={},n,r="storage"){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.fetch=MT(n),this.namespace=r}throwOnError(){return this.shouldThrowOnError=!0,this}async handleOperation(e){var t=this;try{return{data:await e(),error:null}}catch(n){if(t.shouldThrowOnError)throw n;if(cu(n))return{data:null,error:n};throw n}}},UT=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}async execute(){var e=this;try{return{data:(await e.downloadFn()).body,error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(cu(t))return{data:null,error:t};throw t}}},uw;uw=Symbol.toStringTag;var BT=class{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[uw]="BlobDownloadBuilder",this.promise=null}asStream(){return new UT(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var e=this;try{return{data:await(await e.downloadFn()).blob(),error:null}}catch(t){if(e.shouldThrowOnError)throw t;if(cu(t))return{data:null,error:t};throw t}}},$T={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},aw={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},HT=class extends wi{constructor(e,t={},n,r){super(e,t,r,"storage"),this.bucketId=n}async uploadOrUpdate(e,t,n,r){var i=this;return i.handleOperation(async()=>{let o,s=T(T({},aw),r),a=T(T({},i.headers),e==="POST"&&{"x-upsert":String(s.upsert)}),c=s.metadata;typeof Blob<"u"&&n instanceof Blob?(o=new FormData,o.append("cacheControl",s.cacheControl),c&&o.append("metadata",i.encodeMetadata(c)),o.append("",n)):typeof FormData<"u"&&n instanceof FormData?(o=n,o.has("cacheControl")||o.append("cacheControl",s.cacheControl),c&&!o.has("metadata")&&o.append("metadata",i.encodeMetadata(c))):(o=n,a["cache-control"]=`max-age=${s.cacheControl}`,a["content-type"]=s.contentType,c&&(a["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&o instanceof ReadableStream||o&&typeof o=="object"&&"pipe"in o&&typeof o.pipe=="function")&&!s.duplex&&(s.duplex="half")),r?.headers&&(a=T(T({},a),r.headers));let u=i._removeEmptyFolders(t),l=i._getFinalPath(u),d=await(e=="PUT"?oh:te)(i.fetch,`${i.url}/object/${l}`,o,T({headers:a},s?.duplex?{duplex:s.duplex}:{}));return{path:u,id:d.Id,fullPath:d.Key}})}async upload(e,t,n){return this.uploadOrUpdate("POST",e,t,n)}async uploadToSignedUrl(e,t,n,r){var i=this;let o=i._removeEmptyFolders(e),s=i._getFinalPath(o),a=new URL(i.url+`/object/upload/sign/${s}`);return a.searchParams.set("token",t),i.handleOperation(async()=>{let c,u=T({upsert:aw.upsert},r),l=T(T({},i.headers),{"x-upsert":String(u.upsert)});return typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,l["cache-control"]=`max-age=${u.cacheControl}`,l["content-type"]=u.contentType),{path:o,fullPath:(await oh(i.fetch,a.toString(),c,{headers:l})).Key}})}async createSignedUploadUrl(e,t){var n=this;return n.handleOperation(async()=>{let r=n._getFinalPath(e),i=T({},n.headers);t?.upsert&&(i["x-upsert"]="true");let o=await te(n.fetch,`${n.url}/object/upload/sign/${r}`,{},{headers:i}),s=new URL(n.url+o.url),a=s.searchParams.get("token");if(!a)throw new au("No token returned by API");return{signedUrl:s.toString(),path:e,token:a}})}async update(e,t,n){return this.uploadOrUpdate("PUT",e,t,n)}async move(e,t,n){var r=this;return r.handleOperation(async()=>await te(r.fetch,`${r.url}/object/move`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers}))}async copy(e,t,n){var r=this;return r.handleOperation(async()=>({path:(await te(r.fetch,`${r.url}/object/copy`,{bucketId:r.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:r.headers})).Key}))}async createSignedUrl(e,t,n){var r=this;return r.handleOperation(async()=>{let i=r._getFinalPath(e),o=await te(r.fetch,`${r.url}/object/sign/${i}`,T({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:r.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{signedUrl:encodeURI(`${r.url}${o.signedURL}${s}`)}})}async createSignedUrls(e,t,n){var r=this;return r.handleOperation(async()=>{let i=await te(r.fetch,`${r.url}/object/sign/${r.bucketId}`,{expiresIn:t,paths:e},{headers:r.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i.map(s=>T(T({},s),{},{signedUrl:s.signedURL?encodeURI(`${r.url}${s.signedURL}${o}`):null}))})}download(e,t){let n=typeof t?.transform<"u"?"render/image/authenticated":"object",r=this.transformOptsToQueryString(t?.transform||{}),i=r?`?${r}`:"",o=this._getFinalPath(e),s=()=>fs(this.fetch,`${this.url}/${n}/${o}${i}`,{headers:this.headers,noResolveJson:!0});return new BT(s,this.shouldThrowOnError)}async info(e){var t=this;let n=t._getFinalPath(e);return t.handleOperation(async()=>ih(await fs(t.fetch,`${t.url}/object/info/${n}`,{headers:t.headers})))}async exists(e){var t=this;let n=t._getFinalPath(e);try{return await VT(t.fetch,`${t.url}/object/${n}`,{headers:t.headers}),{data:!0,error:null}}catch(r){if(t.shouldThrowOnError)throw r;if(cu(r)&&r instanceof cw){let i=r.originalError;if([400,404].includes(i?.status))return{data:!1,error:r}}throw r}}getPublicUrl(e,t){let n=this._getFinalPath(e),r=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&r.push(i);let o=typeof t?.transform<"u"?"render/image":"object",s=this.transformOptsToQueryString(t?.transform||{});s!==""&&r.push(s);let a=r.join("&");return a!==""&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${o}/public/${n}${a}`)}}}async remove(e){var t=this;return t.handleOperation(async()=>await sh(t.fetch,`${t.url}/object/${t.bucketId}`,{prefixes:e},{headers:t.headers}))}async list(e,t,n){var r=this;return r.handleOperation(async()=>{let i=T(T(T({},$T),t),{},{prefix:e||""});return await te(r.fetch,`${r.url}/object/list/${r.bucketId}`,i,{headers:r.headers},n)})}async listV2(e,t){var n=this;return n.handleOperation(async()=>{let r=T({},e);return await te(n.fetch,`${n.url}/object/list-v2/${n.bucketId}`,r,{headers:n.headers},t)})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){let t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}},zT="2.93.2",hs={"X-Client-Info":`storage-js/${zT}`},GT=class extends wi{constructor(e,t={},n,r){let i=new URL(e);r?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));let o=i.href.replace(/\/$/,""),s=T(T({},hs),t);super(o,s,n,"storage")}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let n=t.listBucketOptionsToQueryString(e);return await fs(t.fetch,`${t.url}/bucket${n}`,{headers:t.headers})})}async getBucket(e){var t=this;return t.handleOperation(async()=>await fs(t.fetch,`${t.url}/bucket/${e}`,{headers:t.headers}))}async createBucket(e,t={public:!1}){var n=this;return n.handleOperation(async()=>await te(n.fetch,`${n.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async updateBucket(e,t){var n=this;return n.handleOperation(async()=>await oh(n.fetch,`${n.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:n.headers}))}async emptyBucket(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/bucket/${e}/empty`,{},{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await sh(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}listBucketOptionsToQueryString(e){let t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}},qT=class extends wi{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=T(T({},hs),t);super(r,i,n,"storage")}async createBucket(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/bucket`,{name:e},{headers:t.headers}))}async listBuckets(e){var t=this;return t.handleOperation(async()=>{let n=new URLSearchParams;e?.limit!==void 0&&n.set("limit",e.limit.toString()),e?.offset!==void 0&&n.set("offset",e.offset.toString()),e?.sortColumn&&n.set("sortColumn",e.sortColumn),e?.sortOrder&&n.set("sortOrder",e.sortOrder),e?.search&&n.set("search",e.search);let r=n.toString(),i=r?`${t.url}/bucket?${r}`:`${t.url}/bucket`;return await fs(t.fetch,i,{headers:t.headers})})}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await sh(t.fetch,`${t.url}/bucket/${e}`,{},{headers:t.headers}))}from(e){var t=this;if(!NT(e))throw new au("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let n=new iw({baseUrl:this.url,catalogName:e,auth:{type:"custom",getHeaders:async()=>t.headers},fetch:this.fetch}),r=this.shouldThrowOnError;return new Proxy(n,{get(i,o){let s=i[o];return typeof s!="function"?s:async(...a)=>{try{return{data:await s.apply(i,a),error:null}}catch(c){if(r)throw c;return{data:null,error:c}}}}})}},WT=class extends wi{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=T(T({},hs),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createIndex(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/CreateIndex`,e,{headers:t.headers})||{})}async getIndex(e,t){var n=this;return n.handleOperation(async()=>await te(n.fetch,`${n.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers}))}async listIndexes(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/ListIndexes`,e,{headers:t.headers}))}async deleteIndex(e,t){var n=this;return n.handleOperation(async()=>await te(n.fetch,`${n.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:n.headers})||{})}},KT=class extends wi{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=T(T({},hs),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async putVectors(e){var t=this;if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return t.handleOperation(async()=>await te(t.fetch,`${t.url}/PutVectors`,e,{headers:t.headers})||{})}async getVectors(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/GetVectors`,e,{headers:t.headers}))}async listVectors(e){var t=this;if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return t.handleOperation(async()=>await te(t.fetch,`${t.url}/ListVectors`,e,{headers:t.headers}))}async queryVectors(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/QueryVectors`,e,{headers:t.headers}))}async deleteVectors(e){var t=this;if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return t.handleOperation(async()=>await te(t.fetch,`${t.url}/DeleteVectors`,e,{headers:t.headers})||{})}},YT=class extends wi{constructor(e,t={},n){let r=e.replace(/\/$/,""),i=T(T({},hs),{},{"Content-Type":"application/json"},t);super(r,i,n,"vectors")}async createBucket(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}async getBucket(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/GetVectorBucket`,{vectorBucketName:e},{headers:t.headers}))}async listBuckets(e={}){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/ListVectorBuckets`,e,{headers:t.headers}))}async deleteBucket(e){var t=this;return t.handleOperation(async()=>await te(t.fetch,`${t.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:t.headers})||{})}},JT=class extends YT{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new ZT(this.url,this.headers,e,this.fetch)}async createBucket(e){var t=()=>super.createBucket,n=this;return t().call(n,e)}async getBucket(e){var t=()=>super.getBucket,n=this;return t().call(n,e)}async listBuckets(e={}){var t=()=>super.listBuckets,n=this;return t().call(n,e)}async deleteBucket(e){var t=()=>super.deleteBucket,n=this;return t().call(n,e)}},ZT=class extends WT{constructor(e,t,n,r){super(e,t,r),this.vectorBucketName=n}async createIndex(e){var t=()=>super.createIndex,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName}))}async listIndexes(e={}){var t=()=>super.listIndexes,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName}))}async getIndex(e){var t=()=>super.getIndex,n=this;return t().call(n,n.vectorBucketName,e)}async deleteIndex(e){var t=()=>super.deleteIndex,n=this;return t().call(n,n.vectorBucketName,e)}index(e){return new QT(this.url,this.headers,this.vectorBucketName,e,this.fetch)}},QT=class extends KT{constructor(e,t,n,r,i){super(e,t,i),this.vectorBucketName=n,this.indexName=r}async putVectors(e){var t=()=>super.putVectors,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async getVectors(e){var t=()=>super.getVectors,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async listVectors(e={}){var t=()=>super.listVectors,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async queryVectors(e){var t=()=>super.queryVectors,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}async deleteVectors(e){var t=()=>super.deleteVectors,n=this;return t().call(n,T(T({},e),{},{vectorBucketName:n.vectorBucketName,indexName:n.indexName}))}},lw=class extends GT{constructor(e,t={},n,r){super(e,t,n,r)}from(e){return new HT(this.url,this.headers,e,this.fetch)}get vectors(){return new JT(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qT(this.url+"/iceberg",this.headers,this.fetch)}};var uu="2.93.2";var sr=30*1e3,lu=3,du=lu*sr,dw="http://localhost:9999",fw="supabase.auth.token";var hw={"X-Client-Info":`gotrue-js/${uu}`};var ps="X-Supabase-Api-Version",ah={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},pw=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,gw=600*1e3;var vn=class extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}};function D(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}var fu=class extends vn{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}};function mw(e){return D(e)&&e.name==="AuthApiError"}var at=class extends vn{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}},Et=class extends vn{constructor(t,n,r,i){super(t,r,i),this.name=n,this.status=r}},Ie=class extends Et{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function pu(e){return D(e)&&e.name==="AuthSessionMissingError"}var Wt=class extends Et{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},ar=class extends Et{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},cr=class extends Et{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function yw(e){return D(e)&&e.name==="AuthImplicitGrantRedirectError"}var gs=class extends Et{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},hu=class extends Et{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var _i=class extends Et{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}};function gu(e){return D(e)&&e.name==="AuthRetryableFetchError"}var ms=class extends Et{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}};var ur=class extends Et{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}};var mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),vw=` 	
\r=`.split(""),XT=(()=>{let e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<vw.length;t+=1)e[vw[t].charCodeAt(0)]=-2;for(let t=0;t<mu.length;t+=1)e[mu[t].charCodeAt(0)]=t;return e})();function ww(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(mu[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){let r=t.queue>>t.queuedBits-6&63;n(mu[r]),t.queuedBits-=6}}function _w(e,t,n){let r=XT[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function ch(e){let t=[],n=s=>{t.push(String.fromCodePoint(s))},r={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},o=s=>{nA(s,r,n)};for(let s=0;s<e.length;s+=1)_w(e.charCodeAt(s),i,o);return t.join("")}function eA(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function tA(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){let i=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|i)+65536,n+=1}eA(r,t)}}function nA(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if((e>>7-r&1)===0){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function wn(e){let t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)_w(e.charCodeAt(i),n,r);return new Uint8Array(t)}function bw(e){let t=[];return tA(e,n=>t.push(n)),new Uint8Array(t)}function Kt(e){let t=[],n={queue:0,queuedBits:0},r=i=>{t.push(i)};return e.forEach(i=>ww(i,n,r)),ww(null,n,r),t.join("")}function Ew(e){return Math.round(Date.now()/1e3)+e}function Dw(){return Symbol("auth-callback")}var pe=()=>typeof window<"u"&&typeof document<"u",lr={tested:!1,writable:!1},yu=()=>{if(!pe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(lr.tested)return lr.writable;let e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),lr.tested=!0,lr.writable=!0}catch{lr.tested=!0,lr.writable=!1}return lr.writable};function Cw(e){let t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((i,o)=>{t[o]=i})}catch{}return n.searchParams.forEach((r,i)=>{t[i]=r}),t}var vu=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),Iw=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",dr=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},_n=async(e,t)=>{let n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},we=async(e,t)=>{await e.removeItem(t)},ys=class e{constructor(){this.promise=new e.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}};ys.promiseConstructor=Promise;function vs(e){let t=e.split(".");if(t.length!==3)throw new ur("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!pw.test(t[r]))throw new ur("JWT not in base64url format");return{header:JSON.parse(ch(t[0])),payload:JSON.parse(ch(t[1])),signature:wn(t[2]),raw:{header:t[0],payload:t[1]}}}async function Sw(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Tw(e,t){return new Promise((r,i)=>{(async()=>{for(let o=0;o<1/0;o++)try{let s=await e(o);if(!t(o,null,s)){r(s);return}}catch(s){if(!t(o,s)){i(s);return}}})()})}function rA(e){return("0"+e.toString(16)).substr(-2)}function iA(){let t=new Uint32Array(56);if(typeof crypto>"u"){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length,i="";for(let o=0;o<56;o++)i+=n.charAt(Math.floor(Math.random()*r));return i}return crypto.getRandomValues(t),Array.from(t,rA).join("")}async function oA(e){let n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),i=new Uint8Array(r);return Array.from(i).map(o=>String.fromCharCode(o)).join("")}async function sA(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;let n=await oA(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function fr(e,t,n=!1){let r=iA(),i=r;n&&(i+="/PASSWORD_RECOVERY"),await dr(e,`${t}-code-verifier`,i);let o=await sA(r);return[o,r===o?"plain":"s256"]}var aA=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Aw(e){let t=e.headers.get(ps);if(!t||!t.match(aA))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Mw(e){if(!e)throw new Error("Missing exp claim");let t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Rw(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var cA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hr(e){if(!cA.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function wu(){let e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){let r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Nw(e,t){return new Proxy(e,{get:(n,r,i)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){let o=r.toString();if(o==="Symbol(Symbol.toPrimitive)"||o==="Symbol(Symbol.toStringTag)"||o==="Symbol(util.inspect.custom)"||o==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,i)}return!t.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(n,r,i)}})}function uh(e){return JSON.parse(JSON.stringify(e))}var pr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),uA=[502,503,504];async function xw(e){var t;if(!Iw(e))throw new _i(pr(e),0);if(uA.includes(e.status))throw new _i(pr(e),e.status);let n;try{n=await e.json()}catch(o){throw new at(pr(o),o)}let r,i=Aw(e);if(i&&i.getTime()>=ah["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new ms(pr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ie}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((o,s)=>o&&typeof s=="string",!0))throw new ms(pr(n),e.status,n.weak_password.reasons);throw new fu(pr(n),e.status||500,r)}var lA=(e,t,n,r)=>{let i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(r),Object.assign(Object.assign({},i),n))};async function S(e,t,n,r){var i;let o=Object.assign({},r?.headers);o[ps]||(o[ps]=ah["2024-01-01"].name),r?.jwt&&(o.Authorization=`Bearer ${r.jwt}`);let s=(i=r?.query)!==null&&i!==void 0?i:{};r?.redirectTo&&(s.redirect_to=r.redirectTo);let a=Object.keys(s).length?"?"+new URLSearchParams(s).toString():"",c=await dA(e,t,n+a,{headers:o,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function dA(e,t,n,r,i,o){let s=lA(t,r,i,o),a;try{a=await e(n,Object.assign({},s))}catch(c){throw console.error(c),new _i(pr(c),0)}if(a.ok||await xw(a),r?.noResolveJson)return a;try{return await a.json()}catch(c){await xw(c)}}function ct(e){var t;let n=null;fA(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=Ew(e.expires_in)));let r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function lh(e){let t=ct(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ot(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Ow(e){return{data:e,error:null}}function kw(e){let{action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o}=e,s=Cn(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:n,hashed_token:r,redirect_to:i,verification_type:o},c=Object.assign({},s);return{data:{properties:a,user:c},error:null}}function dh(e){return e}function fA(e){return e.access_token&&e.refresh_token&&e.expires_in}var _u=["global","local","others"];var bi=class{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=vu(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,n=_u[0]){if(_u.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_u.join(", ")}`);try{return await S(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(D(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await S(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ot})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{let{options:n}=t,r=Cn(t,["options"]),i=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(i.new_email=r?.newEmail,delete i.newEmail),await S(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:kw,redirectTo:n?.redirectTo})}catch(n){if(D(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await S(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ot})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,i,o,s,a,c;try{let u={nextPage:null,lastPage:0,total:0},l=await S(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:dh});if(l.error)throw l.error;let d=await l.json(),h=(s=l.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);u[`${y}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(D(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){hr(t);try{return await S(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ot})}catch(n){if(D(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){hr(t);try{return await S(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ot})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){hr(t);try{return await S(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ot})}catch(r){if(D(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){hr(t.userId);try{let{data:n,error:r}=await S(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:n,error:r}}catch(n){if(D(n))return{data:null,error:n};throw n}}async _deleteFactor(t){hr(t.userId),hr(t.id);try{return{data:await S(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}async _listOAuthClients(t){var n,r,i,o,s,a,c;try{let u={nextPage:null,lastPage:0,total:0},l=await S(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t?.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(o=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&o!==void 0?o:""},xform:dh});if(l.error)throw l.error;let d=await l.json(),h=(s=l.headers.get("x-total-count"))!==null&&s!==void 0?s:0,f=(c=(a=l.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(p=>{let m=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(p.split(";")[1].split("=")[1]);u[`${y}Page`]=m}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},d),u),error:null}}catch(u){if(D(u))return{data:{clients:[]},error:u};throw u}}async _createOAuthClient(t){try{return await S(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(D(n))return{data:null,error:n};throw n}}async _getOAuthClient(t){try{return await S(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(D(n))return{data:null,error:n};throw n}}async _updateOAuthClient(t,n){try{return await S(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(D(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await S(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(t){try{return await S(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(D(n))return{data:null,error:n};throw n}}};function fh(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}var gr={debug:!!(globalThis&&yu()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},ws=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},bu=class extends ws{};async function hh(e,t,n){gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);let r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),gr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async i=>{if(i){gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await n()}finally{gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw gr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new bu(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(gr.debug)try{let o=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(o,null,"  "))}catch(o){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",o)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function Pw(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ph(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function Fw(e){return parseInt(e,16)}function Lw(e){let t=new TextEncoder().encode(e);return"0x"+Array.from(t,r=>r.toString(16).padStart(2,"0")).join("")}function jw(e){var t;let{chainId:n,domain:r,expirationTime:i,issuedAt:o=new Date,nonce:s,notBefore:a,requestId:c,resources:u,scheme:l,uri:d,version:h}=e;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(s&&s.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${s}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(h!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}let f=ph(e.address),p=l?`${l}://${r}`:r,m=e.statement?`${e.statement}
`:"",y=`${p} wants you to sign in with your Ethereum account:
${f}

${m}`,g=`URI: ${d}
Version: ${h}
Chain ID: ${n}${s?`
Nonce: ${s}`:""}
Issued At: ${o.toISOString()}`;if(i&&(g+=`
Expiration Time: ${i.toISOString()}`),a&&(g+=`
Not Before: ${a.toISOString()}`),c&&(g+=`
Request ID: ${c}`),u){let A=`
Resources:`;for(let b of u){if(!b||typeof b!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${b}`);A+=`
- ${b}`}g+=A}return`${y}
${g}`}var ne=class extends Error{constructor({message:t,code:n,cause:r,name:i}){var o;super(t,{cause:r}),this.__isWebAuthnError=!0,this.name=(o=i??(r instanceof Error?r.name:void 0))!==null&&o!==void 0?o:"Unknown Error",this.code=n}},mr=class extends ne{constructor(t,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:t}),this.name="WebAuthnUnknownError",this.originalError=n}};function Vw({error:e,options:t}){var n,r,i;let{publicKey:o}=t;if(!o)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ne({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((n=o.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new ne({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((r=o.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new ne({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=o.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ne({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new ne({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new ne({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return o.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ne({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ne({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){let s=window.location.hostname;if(gh(s)){if(o.rp.id!==s)return new ne({message:`The RP ID "${o.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(o.user.id.byteLength<1||o.user.id.byteLength>64)return new ne({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new ne({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Uw({error:e,options:t}){let{publicKey:n}=t;if(!n)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new ne({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new ne({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){let r=window.location.hostname;if(gh(r)){if(n.rpId!==r)return new ne({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new ne({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}var mh=class{createNewAbortSignal(){if(this.controller){let n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}let t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){let t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}},hA=new mh;function $w(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);let{challenge:t,user:n,excludeCredentials:r}=e,i=Cn(e,["challenge","user","excludeCredentials"]),o=wn(t).buffer,s=Object.assign(Object.assign({},n),{id:wn(n.id).buffer}),a=Object.assign(Object.assign({},i),{challenge:o,user:s});if(r&&r.length>0){a.excludeCredentials=new Array(r.length);for(let c=0;c<r.length;c++){let u=r[c];a.excludeCredentials[c]=Object.assign(Object.assign({},u),{id:wn(u.id).buffer,type:u.type||"public-key",transports:u.transports})}}return a}function Hw(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);let{challenge:t,allowCredentials:n}=e,r=Cn(e,["challenge","allowCredentials"]),i=wn(t).buffer,o=Object.assign(Object.assign({},r),{challenge:i});if(n&&n.length>0){o.allowCredentials=new Array(n.length);for(let s=0;s<n.length;s++){let a=n[s];o.allowCredentials[s]=Object.assign(Object.assign({},a),{id:wn(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return o}function zw(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e;return{id:e.id,rawId:e.id,response:{attestationObject:Kt(new Uint8Array(e.response.attestationObject)),clientDataJSON:Kt(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Gw(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();let n=e,r=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Kt(new Uint8Array(i.authenticatorData)),clientDataJSON:Kt(new Uint8Array(i.clientDataJSON)),signature:Kt(new Uint8Array(i.signature)),userHandle:i.userHandle?Kt(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(t=n.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function gh(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Bw(){var e,t;return!!(pe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function pA(e){try{let t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new mr("Browser returned unexpected credential type",t)}:{data:null,error:new mr("Empty credential response",t)}}catch(t){return{data:null,error:Vw({error:t,options:e})}}}async function gA(e){try{let t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new mr("Browser returned unexpected credential type",t)}:{data:null,error:new mr("Empty credential response",t)}}catch(t){return{data:null,error:Uw({error:t,options:e})}}}var mA={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},yA={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Eu(...e){let t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),n=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),r={};for(let i of e)if(i)for(let o in i){let s=i[o];if(s!==void 0)if(Array.isArray(s))r[o]=s;else if(n(s))r[o]=s;else if(t(s)){let a=r[o];t(a)?r[o]=Eu(a,s):r[o]=Eu(s)}else r[o]=s}return r}function vA(e,t){return Eu(mA,e,t||{})}function wA(e,t){return Eu(yA,e,t||{})}var Du=class{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:n,friendlyName:r,signal:i},o){try{let{data:s,error:a}=await this.client.mfa.challenge({factorId:t,webauthn:n});if(!s)return{data:null,error:a};let c=i??hA.createNewAbortSignal();if(s.webauthn.type==="create"){let{user:u}=s.webauthn.credential_options.publicKey;u.name||(u.name=`${u.id}:${r}`),u.displayName||(u.displayName=u.name)}switch(s.webauthn.type){case"create":{let u=vA(s.webauthn.credential_options.publicKey,o?.create),{data:l,error:d}=await pA({publicKey:u,signal:c});return l?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:l}},error:null}:{data:null,error:d}}case"request":{let u=wA(s.webauthn.credential_options.publicKey,o?.request),{data:l,error:d}=await gA(Object.assign(Object.assign({},s.webauthn.credential_options),{publicKey:u,signal:c}));return l?{data:{factorId:t,challengeId:s.id,webauthn:{type:s.webauthn.type,credential_response:l}},error:null}:{data:null,error:d}}}}catch(s){return D(s)?{data:null,error:s}:{data:null,error:new at("Unexpected error in challenge",s)}}}async _verify({challengeId:t,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:t,webauthn:r})}async _authenticate({factorId:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new vn("rpId is required for WebAuthn authentication")};try{if(!Bw())return{data:null,error:new at("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this.challenge({factorId:t,webauthn:{rpId:n,rpOrigins:r},signal:i},{request:o});if(!s)return{data:null,error:a};let{webauthn:c}=s;return this._verify({factorId:t,challengeId:s.challengeId,webauthn:{type:c.type,rpId:n,rpOrigins:r,credential_response:c.credential_response}})}catch(s){return D(s)?{data:null,error:s}:{data:null,error:new at("Unexpected error in authenticate",s)}}}async _register({friendlyName:t,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},o){if(!n)return{data:null,error:new vn("rpId is required for WebAuthn registration")};try{if(!Bw())return{data:null,error:new at("Browser does not support WebAuthn",null)};let{data:s,error:a}=await this._enroll({friendlyName:t});if(!s)return await this.client.mfa.listFactors().then(l=>{var d;return(d=l.data)===null||d===void 0?void 0:d.all.find(h=>h.factor_type==="webauthn"&&h.friendly_name===t&&h.status!=="unverified")}).then(l=>l?this.client.mfa.unenroll({factorId:l?.id}):void 0),{data:null,error:a};let{data:c,error:u}=await this._challenge({factorId:s.id,friendlyName:s.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:i},{create:o});return c?this._verify({factorId:s.id,challengeId:c.challengeId,webauthn:{rpId:n,rpOrigins:r,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:u}}catch(s){return D(s)?{data:null,error:s}:{data:null,error:new at("Unexpected error in register",s)}}}};Pw();var _A={url:dw,storageKey:fw,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:hw,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4};async function qw(e,t,n){return await n()}var Ei={},bA=(()=>{class e{get jwks(){var n,r;return(r=(n=Ei[this.storageKey])===null||n===void 0?void 0:n.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(n){Ei[this.storageKey]=Object.assign(Object.assign({},Ei[this.storageKey]),{jwks:n})}get jwks_cached_at(){var n,r;return(r=(n=Ei[this.storageKey])===null||n===void 0?void 0:n.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(n){Ei[this.storageKey]=Object.assign(Object.assign({},Ei[this.storageKey]),{cachedAt:n})}constructor(n){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let s=Object.assign(Object.assign({},_A),n);if(this.storageKey=s.storageKey,this.instanceID=(r=e.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,e.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.instanceID>0&&pe()){let a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new bi({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=vu(s.fetch),this.lock=s.lock||qw,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,this.lockAcquireTimeout=s.lockAcquireTimeout,s.lock?this.lock=s.lock:this.persistSession&&pe()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=hh:this.lock=qw,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Du(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:yu()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=fh(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=fh(this.memoryStorage)),pe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a);try{await this._notifyAllSubscribers(a.data.event,a.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}})}this.initialize().catch(a=>{this._debug("#initialize()","error",a)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(n){if(this.throwOnError&&n&&n.error)throw n.error;return n}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${uu}) ${new Date().toISOString()}`}_debug(...n){return this.logDebugMessages&&this.logger(this._logPrefix(),...n),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var n;try{let r={},i="none";if(pe()&&(r=Cw(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),pe()&&this.detectSessionInUrl&&i!=="none"){let{data:o,error:s}=await this._getSessionFromURL(r,i);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),yw(s)){let u=(n=s.details)===null||n===void 0?void 0:n.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:s}}return{error:s}}let{session:a,redirectType:c}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",c),await this._saveSession(a),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return D(r)?this._returnResult({error:r}):this._returnResult({error:new at("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(n){var r,i,o;try{let s=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=n?.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=n?.options)===null||o===void 0?void 0:o.captchaToken}},xform:ct}),{data:a,error:c}=s;if(c||!a)return this._returnResult({data:{user:null,session:null},error:c});let u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(D(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(n){var r,i,o;try{let s;if("email"in n){let{email:d,password:h,options:f}=n,p=null,m=null;this.flowType==="pkce"&&([p,m]=await fr(this.storage,this.storageKey)),s=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:d,password:h,data:(r=f?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:m},xform:ct})}else if("phone"in n){let{phone:d,password:h,options:f}=n;s=await S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:h,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(o=f?.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:ct})}else throw new ar("You must provide either an email or phone number and a password");let{data:a,error:c}=s;if(c||!a)return await we(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});let u=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(s){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(n){try{let r;if("email"in n){let{email:s,password:a,options:c}=n;r=await S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:lh})}else if("phone"in n){let{phone:s,password:a,options:c}=n;r=await S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:s,password:a,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:lh})}else throw new ar("You must provide either an email or phone number and a password");let{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){let s=new Wt;return this._returnResult({data:{user:null,session:null},error:s})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(n){var r,i,o,s;return await this._handleProviderSignIn(n.provider,{redirectTo:(r=n.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=n.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=n.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(s=n.options)===null||s===void 0?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(n){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(n))}async signInWithWeb3(n){let{chain:r}=n;switch(r){case"ethereum":return await this.signInWithEthereum(n);case"solana":return await this.signInWithSolana(n);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(n){var r,i,o,s,a,c,u,l,d,h,f;let p,m;if("message"in n)p=n.message,m=n.signature;else{let{chain:y,wallet:g,statement:A,options:b}=n,w;if(pe())if(typeof g=="object")w=g;else{let kt=window;if("ethereum"in kt&&typeof kt.ethereum=="object"&&"request"in kt.ethereum&&typeof kt.ethereum.request=="function")w=kt.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=g}let L=new URL((r=b?.url)!==null&&r!==void 0?r:window.location.href),Se=await w.request({method:"eth_requestAccounts"}).then(kt=>kt).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Se||Se.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let B=ph(Se[0]),ee=(i=b?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ee){let kt=await w.request({method:"eth_chainId"});ee=Fw(kt)}let Zw={domain:L.host,address:B,statement:A,uri:L.href,version:"1",chainId:ee,nonce:(o=b?.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(s=b?.signInWithEthereum)===null||s===void 0?void 0:s.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(c=b?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(u=b?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(l=b?.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(d=b?.signInWithEthereum)===null||d===void 0?void 0:d.resources};p=jw(Zw),m=await w.request({method:"personal_sign",params:[Lw(p),B]})}try{let{data:y,error:g}=await S(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:m},!((h=n.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=n.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:ct});if(g)throw g;if(!y||!y.session||!y.user){let A=new Wt;return this._returnResult({data:{user:null,session:null},error:A})}return y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),this._returnResult({data:Object.assign({},y),error:g})}catch(y){if(D(y))return this._returnResult({data:{user:null,session:null},error:y});throw y}}async signInWithSolana(n){var r,i,o,s,a,c,u,l,d,h,f,p;let m,y;if("message"in n)m=n.message,y=n.signature;else{let{chain:g,wallet:A,statement:b,options:w}=n,L;if(pe())if(typeof A=="object")L=A;else{let B=window;if("solana"in B&&typeof B.solana=="object"&&("signIn"in B.solana&&typeof B.solana.signIn=="function"||"signMessage"in B.solana&&typeof B.solana.signMessage=="function"))L=B.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof A!="object"||!w?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");L=A}let Se=new URL((r=w?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in L&&L.signIn){let B=await L.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w?.signInWithSolana),{version:"1",domain:Se.host,uri:Se.href}),b?{statement:b}:null)),ee;if(Array.isArray(B)&&B[0]&&typeof B[0]=="object")ee=B[0];else if(B&&typeof B=="object"&&"signedMessage"in B&&"signature"in B)ee=B;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ee&&"signature"in ee&&(typeof ee.signedMessage=="string"||ee.signedMessage instanceof Uint8Array)&&ee.signature instanceof Uint8Array)m=typeof ee.signedMessage=="string"?ee.signedMessage:new TextDecoder().decode(ee.signedMessage),y=ee.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in L)||typeof L.signMessage!="function"||!("publicKey"in L)||typeof L!="object"||!L.publicKey||!("toBase58"in L.publicKey)||typeof L.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${Se.host} wants you to sign in with your Solana account:`,L.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${Se.href}`,`Issued At: ${(o=(i=w?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((s=w?.signInWithSolana)===null||s===void 0)&&s.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((a=w?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((c=w?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((u=w?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((l=w?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((h=(d=w?.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||h===void 0)&&h.length?["Resources",...w.signInWithSolana.resources.map(ee=>`- ${ee}`)]:[]].join(`
`);let B=await L.signMessage(new TextEncoder().encode(m),"utf8");if(!B||!(B instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=B}}try{let{data:g,error:A}=await S(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:Kt(y)},!((f=n.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=n.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:ct});if(A)throw A;if(!g||!g.session||!g.user){let b=new Wt;return this._returnResult({data:{user:null,session:null},error:b})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:A})}catch(g){if(D(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async _exchangeCodeForSession(n){let r=await _n(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{if(!i&&this.flowType==="pkce")throw new hu;let{data:s,error:a}=await S(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:n,code_verifier:i},xform:ct});if(await we(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!s||!s.session||!s.user){let c=new Wt;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return s.session&&(await this._saveSession(s.session),await this._notifyAllSubscribers("SIGNED_IN",s.session)),this._returnResult({data:Object.assign(Object.assign({},s),{redirectType:o??null}),error:a})}catch(s){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(n){try{let{options:r,provider:i,token:o,access_token:s,nonce:a}=n,c=await S(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:ct}),{data:u,error:l}=c;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!u||!u.session||!u.user){let d=new Wt;return this._returnResult({data:{user:null,session:null},error:d})}return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),this._returnResult({data:u,error:l})}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(n){var r,i,o,s,a;try{if("email"in n){let{email:c,options:u}=n,l=null,d=null;this.flowType==="pkce"&&([l,d]=await fr(this.storage,this.storageKey));let{error:h}=await S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(i=u?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:l,code_challenge_method:d},redirectTo:u?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in n){let{phone:c,options:u}=n,{data:l,error:d}=await S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(o=u?.data)!==null&&o!==void 0?o:{},create_user:(s=u?.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(a=u?.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:d})}throw new ar("You must provide either an email or phone number.")}catch(c){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}}async verifyOtp(n){var r,i;try{let o,s;"options"in n&&(o=(r=n.options)===null||r===void 0?void 0:r.redirectTo,s=(i=n.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:c}=await S(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},n),{gotrue_meta_security:{captcha_token:s}}),redirectTo:o,xform:ct});if(c)throw c;if(!a)throw new Error("An error occurred on token verification.");let u=a.session,l=a.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(n.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),this._returnResult({data:{user:l,session:u},error:null})}catch(o){if(D(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(n){var r,i,o,s,a;try{let c=null,u=null;this.flowType==="pkce"&&([c,u]=await fr(this.storage,this.storageKey));let l=await S(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in n?{provider_id:n.providerId}:null),"domain"in n?{domain:n.domain}:null),{redirect_to:(i=(r=n.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=n?.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:n.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:u}),headers:this.headers,xform:Ow});return!((s=l.data)===null||s===void 0)&&s.url&&pe()&&!(!((a=n.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(c){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(c))return this._returnResult({data:null,error:c});throw c}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;if(i)throw i;if(!r)throw new Ie;let{error:o}=await S(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(n){if(D(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async resend(n){try{let r=`${this.url}/resend`;if("email"in n){let{email:i,type:o,options:s}=n,{error:a}=await S(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}},redirectTo:s?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in n){let{phone:i,type:o,options:s}=n,{data:a,error:c}=await S(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:s?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a?.message_id},error:c})}throw new ar("You must provide either an email or phone number and a type")}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async r=>r))}async _acquireLock(n,r){this._debug("#_acquireLock","begin",n);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,n,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){let o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(n){this._debug("#_useSession","begin");try{let r=await this.__loadSession();return await n(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let n=null,r=await _n(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?n=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!n)return{data:{session:null},error:null};let i=n.expires_at?n.expires_at*1e3-Date.now()<du:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",n.expires_at),!i){if(this.userStorage){let a=await _n(this.userStorage,this.storageKey+"-user");a?.user?n.user=a.user:n.user=wu()}if(this.storage.isServer&&n.user&&!n.user.__isUserNotAvailableProxy){let a={value:this.suppressGetSessionWarning};n.user=Nw(n.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:n},error:null}}let{data:o,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(n){if(n)return await this._getUser(n);await this.initializePromise;let r=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return r.data.user&&(this.suppressGetSessionWarning=!0),r}async _getUser(n){try{return n?await S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:n,xform:Ot}):await this._useSession(async r=>{var i,o,s;let{data:a,error:c}=r;if(c)throw c;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ie}:await S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(s=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&s!==void 0?s:void 0,xform:Ot})})}catch(r){if(D(r))return pu(r)&&(await this._removeSession(),await we(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(n,r={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(n,r))}async _updateUser(n,r={}){try{return await this._useSession(async i=>{let{data:o,error:s}=i;if(s)throw s;if(!o.session)throw new Ie;let a=o.session,c=null,u=null;this.flowType==="pkce"&&n.email!=null&&([c,u]=await fr(this.storage,this.storageKey));let{data:l,error:d}=await S(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},n),{code_challenge:c,code_challenge_method:u}),jwt:a.access_token,xform:Ot});if(d)throw d;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(n))}async _setSession(n){try{if(!n.access_token||!n.refresh_token)throw new Ie;let r=Date.now()/1e3,i=r,o=!0,s=null,{payload:a}=vs(n.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){let{data:c,error:u}=await this._callRefreshToken(n.refresh_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});if(!c)return{data:{user:null,session:null},error:null};s=c}else{let{data:c,error:u}=await this._getUser(n.access_token);if(u)return this._returnResult({data:{user:null,session:null},error:u});s={access_token:n.access_token,refresh_token:n.refresh_token,user:c.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(r){if(D(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(n){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(n))}async _refreshSession(n){try{return await this._useSession(async r=>{var i;if(!n){let{data:a,error:c}=r;if(c)throw c;n=(i=a.session)!==null&&i!==void 0?i:void 0}if(!n?.refresh_token)throw new Ie;let{data:o,error:s}=await this._callRefreshToken(n.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(D(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(n,r){try{if(!pe())throw new cr("No browser detected.");if(n.error||n.error_description||n.error_code)throw new cr(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new gs("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new cr("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!n.code)throw new gs("No code detected.");let{data:b,error:w}=await this._exchangeCodeForSession(n.code);if(w)throw w;let L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:b.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:o,access_token:s,refresh_token:a,expires_in:c,expires_at:u,token_type:l}=n;if(!s||!c||!a||!l)throw new cr("No session defined in URL");let d=Math.round(Date.now()/1e3),h=parseInt(c),f=d+h;u&&(f=parseInt(u));let p=f-d;p*1e3<=sr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);let m=f-h;d-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,d):d-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,d);let{data:y,error:g}=await this._getUser(s);if(g)throw g;let A={provider_token:i,provider_refresh_token:o,access_token:s,expires_in:h,expires_at:f,refresh_token:a,token_type:l,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:A,redirectType:n.type},error:null})}catch(i){if(D(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(n){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),n):!!(n.access_token||n.error_description)}async _isPKCECallback(n){let r=await _n(this.storage,`${this.storageKey}-code-verifier`);return!!(n.code&&r)}async signOut(n={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(n))}async _signOut({scope:n}={scope:"global"}){return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s&&!pu(s))return this._returnResult({error:s});let a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:c}=await this.admin.signOut(a,n);if(c&&!(mw(c)&&(c.status===404||c.status===401||c.status===403)||pu(c)))return this._returnResult({error:c})}return n!=="others"&&(await this._removeSession(),await we(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(n){let r=Dw(),i={id:r,callback:n,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(n){return await this._useSession(async r=>{var i,o;try{let{data:{session:s},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(n))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",n,"session",s)}catch(s){await((o=this.stateChangeEmitters.get(n))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",n,"error",s),console.error(s)}})}async resetPasswordForEmail(n,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await fr(this.storage,this.storageKey,!0));try{return await S(this.fetch,"POST",`${this.url}/recover`,{body:{email:n,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(s){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var n;try{let{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(n=r.user.identities)!==null&&n!==void 0?n:[]},error:null})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(n){return"token"in n?this.linkIdentityIdToken(n):this.linkIdentityOAuth(n)}async linkIdentityOAuth(n){var r;try{let{data:i,error:o}=await this._useSession(async s=>{var a,c,u,l,d;let{data:h,error:f}=s;if(f)throw f;let p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,n.provider,{redirectTo:(a=n.options)===null||a===void 0?void 0:a.redirectTo,scopes:(c=n.options)===null||c===void 0?void 0:c.scopes,queryParams:(u=n.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await S(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return pe()&&!(!((r=n.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:n.provider,url:i?.url},error:null})}catch(i){if(D(i))return this._returnResult({data:{provider:n.provider,url:null},error:i});throw i}}async linkIdentityIdToken(n){return await this._useSession(async r=>{var i;try{let{error:o,data:{session:s}}=r;if(o)throw o;let{options:a,provider:c,token:u,access_token:l,nonce:d}=n,h=await S(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=s?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:u,access_token:l,nonce:d,link_identity:!0,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:ct}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Wt}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(o){if(await we(this.storage,`${this.storageKey}-code-verifier`),D(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(n){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)throw a;return await S(this.fetch,"DELETE",`${this.url}/user/identities/${n.identity_id}`,{headers:this.headers,jwt:(o=(i=s.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(n){let r=`#_refreshAccessToken(${n.substring(0,5)}...)`;this._debug(r,"begin");try{let i=Date.now();return await Tw(async o=>(o>0&&await Sw(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await S(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:n},headers:this.headers,xform:ct})),(o,s)=>{let a=200*Math.pow(2,o);return s&&gu(s)&&Date.now()+a-i<sr})}catch(i){if(this._debug(r,"error",i),D(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(n){return typeof n=="object"&&n!==null&&"access_token"in n&&"refresh_token"in n&&"expires_at"in n}async _handleProviderSignIn(n,r){let i=await this._getUrlForProvider(`${this.url}/authorize`,n,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",n,"options",r,"url",i),pe()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:n,url:i},error:null}}async _recoverAndRefresh(){var n,r;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let o=await _n(this.storage,this.storageKey);if(o&&this.userStorage){let a=await _n(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},await dr(this.userStorage,this.storageKey+"-user",a)),o.user=(n=a?.user)!==null&&n!==void 0?n:wu()}else if(o&&!o.user&&!o.user){let a=await _n(this.storage,this.storageKey+"-user");a&&a?.user?(o.user=a.user,await we(this.storage,this.storageKey+"-user"),await dr(this.storage,this.storageKey,o)):o.user=wu()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}let s=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<du;if(this._debug(i,`session has${s?"":" not"} expired with margin of ${du}s`),s){if(this.autoRefreshToken&&o.refresh_token){let{error:a}=await this._callRefreshToken(o.refresh_token);a&&(console.error(a),gu(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{let{data:a,error:c}=await this._getUser(o.access_token);!c&&a?.user?(o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(n){var r,i;if(!n)throw new Ie;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let o=`#_callRefreshToken(${n.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new ys;let{data:s,error:a}=await this._refreshAccessToken(n);if(a)throw a;if(!s.session)throw new Ie;await this._saveSession(s.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",s.session);let c={data:s.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(s){if(this._debug(o,"error",s),D(s)){let a={data:null,error:s};return gu(s)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(s),s}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(n,r,i=!0){let o=`#_notifyAllSubscribers(${n})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:n,session:r});let s=[],a=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(n,r)}catch(u){s.push(u)}});if(await Promise.all(a),s.length>0){for(let c=0;c<s.length;c+=1)console.error(s[c]);throw s[0]}}finally{this._debug(o,"end")}}async _saveSession(n){this._debug("#_saveSession()",n),this.suppressGetSessionWarning=!0,await we(this.storage,`${this.storageKey}-code-verifier`);let r=Object.assign({},n),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await dr(this.userStorage,this.storageKey+"-user",{user:r.user});let o=Object.assign({},r);delete o.user;let s=uh(o);await dr(this.storage,this.storageKey,s)}else{let o=uh(r);await dr(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await we(this.storage,this.storageKey),await we(this.storage,this.storageKey+"-code-verifier"),await we(this.storage,this.storageKey+"-user"),this.userStorage&&await we(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let n=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{n&&pe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",n)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let n=setInterval(()=>this._autoRefreshTokenTick(),sr);this.autoRefreshTicker=n,n&&typeof n=="object"&&typeof n.unref=="function"?n.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(n);let r=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");let n=this.autoRefreshTicker;this.autoRefreshTicker=null,n&&clearInterval(n);let r=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,r&&clearTimeout(r)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{let n=Date.now();try{return await this._useSession(async r=>{let{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let o=Math.floor((i.expires_at*1e3-n)/sr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${sr}ms, refresh threshold is ${lu} ticks`),o<=lu&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(n){if(n.isAcquireTimeout||n instanceof ws)this._debug("auto refresh token tick lock not available");else throw n}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(n){this._debug("#visibilityChangedCallback","error",n)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(n){console.error("_handleVisibilityChange",n)}}async _onVisibilityChanged(n){let r=`#_onVisibilityChanged(${n})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),n||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(n,r,i){let o=[`provider=${encodeURIComponent(r)}`];if(i?.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[s,a]=await fr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(s)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(c.toString())}if(i?.queryParams){let s=new URLSearchParams(i.queryParams);o.push(s.toString())}return i?.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${n}?${o.join("&")}`}async _unenroll(n){try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;return s?this._returnResult({data:null,error:s}):await S(this.fetch,"DELETE",`${this.url}/factors/${n.factorId}`,{headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(n){try{return await this._useSession(async r=>{var i,o;let{data:s,error:a}=r;if(a)return this._returnResult({data:null,error:a});let c=Object.assign({friendly_name:n.friendlyName,factor_type:n.factorType},n.factorType==="phone"?{phone:n.phone}:n.factorType==="totp"?{issuer:n.issuer}:{}),{data:u,error:l}=await S(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(n.factorType==="totp"&&u.type==="totp"&&(!((o=u?.totp)===null||o===void 0)&&o.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),this._returnResult({data:u,error:null}))})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _verify(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=Object.assign({challenge_id:n.challengeId},"webauthn"in n?{webauthn:Object.assign(Object.assign({},n.webauthn),{credential_response:n.webauthn.type==="create"?zw(n.webauthn.credential_response):Gw(n.webauthn.credential_response)})}:{code:n.code}),{data:c,error:u}=await S(this.fetch,"POST",`${this.url}/factors/${n.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return u?this._returnResult({data:null,error:u}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:u}))})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(n){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async r=>{var i;let{data:o,error:s}=r;if(s)return this._returnResult({data:null,error:s});let a=await S(this.fetch,"POST",`${this.url}/factors/${n.factorId}/challenge`,{body:n,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;let{data:c}=a;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:$w(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:Hw(c.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(n){let{data:r,error:i}=await this._challenge({factorId:n.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:n.factorId,challengeId:r.id,code:n.code})}async _listFactors(){var n;let{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};let o={all:[],phone:[],totp:[],webauthn:[]};for(let s of(n=r?.factors)!==null&&n!==void 0?n:[])o.all.push(s),s.status==="verified"&&o[s.factor_type].push(s);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(n){var r,i,o,s;if(n)try{let{payload:p}=vs(n),m=null;p.aal&&(m=p.aal);let y=m,{data:{user:g},error:A}=await this.getUser(n);if(A)return this._returnResult({data:null,error:A});((i=(r=g?.factors)===null||r===void 0?void 0:r.filter(L=>L.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(y="aal2");let w=p.amr||[];return{data:{currentLevel:m,nextLevel:y,currentAuthenticationMethods:w},error:null}}catch(p){if(D(p))return this._returnResult({data:null,error:p});throw p}let{data:{session:a},error:c}=await this.getSession();if(c)return this._returnResult({data:null,error:c});if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:u}=vs(a.access_token),l=null;u.aal&&(l=u.aal);let d=l;((s=(o=a.user.factors)===null||o===void 0?void 0:o.filter(p=>p.status==="verified"))!==null&&s!==void 0?s:[]).length>0&&(d="aal2");let f=u.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:f},error:null}}async _getAuthorizationDetails(n){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await S(this.fetch,"GET",`${this.url}/oauth/authorizations/${n}`,{headers:this.headers,jwt:i.access_token,xform:s=>({data:s,error:null})}):this._returnResult({data:null,error:new Ie})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new Ie});let a=await S(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&pe()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(D(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(n,r){try{return await this._useSession(async i=>{let{data:{session:o},error:s}=i;if(s)return this._returnResult({data:null,error:s});if(!o)return this._returnResult({data:null,error:new Ie});let a=await S(this.fetch,"POST",`${this.url}/oauth/authorizations/${n}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return a.data&&a.data.redirect_url&&pe()&&!r?.skipBrowserRedirect&&window.location.assign(a.data.redirect_url),a})}catch(i){if(D(i))return this._returnResult({data:null,error:i});throw i}}async _listOAuthGrants(){try{return await this._useSession(async n=>{let{data:{session:r},error:i}=n;return i?this._returnResult({data:null,error:i}):r?await S(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:r.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Ie})})}catch(n){if(D(n))return this._returnResult({data:null,error:n});throw n}}async _revokeOAuthGrant(n){try{return await this._useSession(async r=>{let{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?(await S(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:n.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Ie})})}catch(r){if(D(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(n,r={keys:[]}){let i=r.keys.find(c=>c.kid===n);if(i)return i;let o=Date.now();if(i=this.jwks.keys.find(c=>c.kid===n),i&&this.jwks_cached_at+gw>o)return i;let{data:s,error:a}=await S(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,i=s.keys.find(c=>c.kid===n),!i)?null:i}async getClaims(n,r={}){try{let i=n;if(!i){let{data:p,error:m}=await this.getSession();if(m||!p.session)return this._returnResult({data:null,error:m});i=p.session.access_token}let{header:o,payload:s,signature:a,raw:{header:c,payload:u}}=vs(i);r?.allowExpired||Mw(s.exp);let l=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!l){let{error:p}=await this.getUser(i);if(p)throw p;return{data:{claims:s,header:o,signature:a},error:null}}let d=Rw(o.alg),h=await crypto.subtle.importKey("jwk",l,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,a,bw(`${c}.${u}`)))throw new ur("Invalid JWT signature");return{data:{claims:s,header:o,signature:a},error:null}}catch(i){if(D(i))return this._returnResult({data:null,error:i});throw i}}}return e.nextInstanceID={},e})(),yh=bA;var EA=yh,vh=EA;var DA="2.93.2",_s="";typeof Deno<"u"?_s="deno":typeof document<"u"?_s="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_s="react-native":_s="node";var CA={"X-Client-Info":`supabase-js-${_s}/${DA}`},IA={headers:CA},SA={schema:"public"},TA={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},AA={};function bs(e){"@babel/helpers - typeof";return bs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bs(e)}function MA(e,t){if(bs(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(bs(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RA(e){var t=MA(e,"string");return bs(t)=="symbol"?t:t+""}function NA(e,t,n){return(t=RA(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ww(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ww(Object(n),!0).forEach(function(r){NA(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ww(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var xA=e=>e?(...t)=>e(...t):(...t)=>fetch(...t),OA=()=>Headers,kA=(e,t,n)=>{let r=xA(n),i=OA();return async(o,s)=>{var a;let c=(a=await t())!==null&&a!==void 0?a:e,u=new i(s?.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),r(o,ie(ie({},s),{},{headers:u}))}};function PA(e){return e.endsWith("/")?e:e+"/"}function FA(e,t){var n,r;let{db:i,auth:o,realtime:s,global:a}=e,{db:c,auth:u,realtime:l,global:d}=t,h={db:ie(ie({},c),i),auth:ie(ie({},u),o),realtime:ie(ie({},l),s),storage:{},global:ie(ie(ie({},d),a),{},{headers:ie(ie({},(n=d?.headers)!==null&&n!==void 0?n:{}),(r=a?.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function LA(e){let t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(PA(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var jA=class extends vh{constructor(e){super(e)}},VA=class{constructor(e,t,n){var r,i;this.supabaseUrl=e,this.supabaseKey=t;let o=LA(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",o),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",o),this.storageUrl=new URL("storage/v1",o),this.functionsUrl=new URL("functions/v1",o);let s=`sb-${o.hostname.split(".")[0]}-auth-token`,a={db:SA,realtime:AA,auth:ie(ie({},TA),{},{storageKey:s}),global:IA},c=FA(n??{},a);if(this.storageKey=(r=c.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(l,d)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(d)} is not possible`)}});else{var u;this.auth=this._initSupabaseAuthClient((u=c.auth)!==null&&u!==void 0?u:{},this.headers,c.global.fetch)}this.fetch=kA(t,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(ie({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(l=>this.realtime.setAuth(l)).catch(l=>console.warn("Failed to set initial Realtime auth token:",l)),this.rest=new Jv(new URL("rest/v1",o).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch}),this.storage=new lw(this.storageUrl.href,this.headers,this.fetch,n?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new rs(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e=this,t,n;if(e.accessToken)return await e.accessToken();let{data:r}=await e.auth.getSession();return(t=(n=r.session)===null||n===void 0?void 0:n.access_token)!==null&&t!==void 0?t:e.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,storageKey:o,flowType:s,lock:a,debug:c,throwOnError:u},l,d){let h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jA({url:this.authUrl.href,headers:ie(ie({},h),l),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:r,userStorage:i,flowType:s,lock:a,debug:c,throwOnError:u,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new cs(this.realtimeUrl.href,ie(ie({},e),{},{params:ie(ie({},{apikey:this.supabaseKey}),e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",t?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},Kw=(e,t,n)=>new VA(e,t,n);function UA(){if(typeof window<"u")return!1;let e=globalThis.process;if(!e)return!1;let t=e.version;if(t==null)return!1;let n=t.match(/^v(\d+)\./);return n?parseInt(n[1],10)<=18:!1}UA()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var Es=Kw("https://kmbhzpfwhzxpobhjbyvt.supabase.co","sb_publishable_hu-YJAvolnoKaMh2dvPC1w_Ou_W19Av");function BA(e,t){if(e&1&&(R(0,"div",20),G(1),k()),e&2){let n=po();ae(),Jn(" ",n.errorMessage," ")}}var Cu=class e{constructor(t){this.router=t}username="";password="";errorMessage="";loading=!1;showPassword=!1;async login(){if(this.errorMessage="",this.loading=!0,(await Es.from("users").select("*").eq("username",this.username).eq("password",this.password).maybeSingle()).data){this.loading=!1,this.router.navigate(["/user-dashboard"]);return}let n=await Es.from("nutritionists").select("*").eq("username",this.username).eq("password",this.password).maybeSingle();if(this.loading=!1,n.data){this.router.navigate(["/nutri-dashboard"]);return}this.errorMessage="Invalid username or password"}goToSignUp(){this.router.navigate(["/sign-up"])}static \u0275fac=function(n){return new(n||e)(Z(gn))};static \u0275cmp=Ke({type:e,selectors:[["app-home"]],decls:27,vars:6,consts:[["form","ngForm"],[1,"page-bg"],[1,"navbar","navbar-expand-lg","navbar-dark","bg-dark"],[1,"container-fluid"],[1,"navbar-brand"],[1,"container","vh-100","d-flex","align-items-center","justify-content-center"],[1,"row","shadow","rounded","overflow-hidden",2,"max-width","900px","width","100%"],[1,"col-md-6","p-0","d-none","d-md-block"],["src","https://lipsum.app/random/640x880/","alt","CalTrack",1,"img-fluid","h-100","w-100",2,"object-fit","cover"],[1,"col-md-6","bg-white","p-5","d-flex","flex-column","justify-content-center"],[1,"mb-4","text-center"],[3,"ngSubmit"],["type","email","placeholder","Email","name","username","required","",1,"form-control","mb-3",3,"ngModelChange","ngModel"],[1,"input-group","mb-3"],["placeholder","Password","name","password","required","",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-primary","w-100","mb-3",3,"disabled"],["class","text-danger text-center mb-2",4,"ngIf"],[1,"text-center"],["role","button",3,"click"],[1,"text-danger","text-center","mb-2"]],template:function(n,r){if(n&1){let i=fo();R(0,"div",1)(1,"nav",2)(2,"div",3)(3,"a",4),G(4,"CalTrack"),k()()(),R(5,"div",5)(6,"div",6)(7,"div",7),Rt(8,"img",8),k(),R(9,"div",9)(10,"h3",10),G(11,"Sign In"),k(),R(12,"form",11,0),Be("ngSubmit",function(){return oe(i),se(r.login())}),R(14,"input",12),ke("ngModelChange",function(s){return oe(i),$e(r.username,s)||(r.username=s),se(s)}),k(),R(15,"div",13)(16,"input",14),ke("ngModelChange",function(s){return oe(i),$e(r.password,s)||(r.password=s),se(s)}),k(),R(17,"button",15),Be("click",function(){return oe(i),se(r.showPassword=!r.showPassword)}),G(18," \u{1F441} "),k()(),R(19,"button",16),G(20),k()(),$r(21,BA,2,1,"div",17),R(22,"div",18)(23,"small"),G(24," Don\u2019t have an account? "),R(25,"a",19),Be("click",function(){return oe(i),se(r.goToSignUp())}),G(26,"Sign up"),k()()()()()()()}if(n&2){let i=go(13);ae(14),Oe("ngModel",r.username),ae(2),Mt("type",r.showPassword?"text":"password"),Oe("ngModel",r.password),ae(3),Mt("disabled",i.invalid||r.loading),ae(),Jn(" ",r.loading?"Checking...":"Log In"," "),ae(),Mt("ngIf",r.errorMessage)}},dependencies:[Kr,bo,eu,Xc,di,Jc,Zc,ts,es,Xo],styles:[".page-bg[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#498d8d,#e6f6f4,#eefcff)}"]})};var Iu=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ke({type:e,selectors:[["app-user-dashboard"]],decls:2,vars:0,template:function(n,r){n&1&&(Hr(0,"p"),G(1,"user-dashboard works!"),zr())},encapsulation:2})};var Su=class e{static \u0275fac=function(n){return new(n||e)};static \u0275cmp=Ke({type:e,selectors:[["app-nutri-dashboard"]],decls:2,vars:0,template:function(n,r){n&1&&(Hr(0,"p"),G(1,"nutri-dashboard works!"),zr())},encapsulation:2})};function $A(e,t){if(e&1&&(R(0,"div",36),G(1),k()),e&2){let n=po();ae(),Jn(" ",n.errorMessage," ")}}var Tu=class e{constructor(t){this.router=t}showPassword=!1;errorMessage="";user={firstName:"",firstLastName:"",secondLastName:"",height:null,weight:null,age:null,phoneNumber:"",username:"",password:""};navigateToLogin(t){t.preventDefault(),this.router.navigate([""])}async createUser(t){let{error:n}=await Es.from("users").insert([{firstName:t.firstName,firstLastName:t.firstLastName,secondLastName:t.secondLastName,height:t.height,weight:t.weight,age:t.age,phoneNumber:t.phoneNumber,username:t.username,password:t.password}]);n?n.code==="23505"?this.errorMessage="Email already exists":(this.errorMessage="Something went wrong",console.error(n)):this.router.navigate([""])}static \u0275fac=function(n){return new(n||e)(Z(gn))};static \u0275cmp=Ke({type:e,selectors:[["app-sign-up"]],decls:66,vars:12,consts:[["form","ngForm"],[1,"page-bg"],[1,"page-bg","vh-100"],[1,"navbar","navbar-dark","bg-dark"],[1,"container-fluid"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#sidebar","aria-controls","sidebar",1,"btn","btn-outline-light","me-2"],[1,"navbar-brand","mb-0","h1"],["tabindex","-1","id","sidebar","aria-labelledby","sidebarLabel",1,"offcanvas","offcanvas-start"],[1,"offcanvas-header"],["id","sidebarLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","text-reset"],[1,"offcanvas-body","p-0"],[1,"nav","flex-column","p-3"],["data-bs-dismiss","offcanvas",1,"nav-link","active",3,"click"],[1,"container-fluid","pt-4","h-100","d-flex","justify-content-center","align-items-start"],[1,"card","shadow","p-4","w-100",2,"max-width","900px"],[1,"mb-4","text-center"],[3,"ngSubmit"],[1,"row","g-3"],[1,"col-md-4"],[1,"form-label"],["name","firstName","required","","maxlength","20",1,"form-control",3,"ngModelChange","ngModel"],["name","firstLastName","required","","maxlength","20",1,"form-control",3,"ngModelChange","ngModel"],["name","secondLastName","required","","maxlength","20",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.01","name","height","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","step","0.1","name","weight","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","name","age","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-6"],["type","email","name","username","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","phoneNumber","maxlength","20","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-md-12"],[1,"input-group"],["name","password","required","",1,"form-control",3,"ngModelChange","type","ngModel"],["type","button",1,"btn","btn-outline-secondary",3,"click"],["class","text-danger mt-3",4,"ngIf"],[1,"btn","btn-success","w-100","mt-4",3,"disabled"],[1,"text-danger","mt-3"]],template:function(n,r){if(n&1){let i=fo();R(0,"div",1)(1,"div",2)(2,"nav",3)(3,"div",4)(4,"button",5),G(5," \u2630 "),k(),R(6,"span",6),G(7,"CalTrack"),k()()(),R(8,"div",7)(9,"div",8)(10,"h5",9),G(11,"Menu"),k(),Rt(12,"button",10),k(),R(13,"div",11)(14,"nav",12)(15,"a",13),Be("click",function(s){return oe(i),se(r.navigateToLogin(s))}),G(16," \u2190 Back to Login "),k()()()(),R(17,"div",14)(18,"div",15)(19,"h2",16),G(20,"Create Account"),k(),R(21,"form",17,0),Be("ngSubmit",function(){return oe(i),se(r.createUser(r.user))}),R(23,"div",18)(24,"div",19)(25,"label",20),G(26,"Name"),k(),R(27,"input",21),ke("ngModelChange",function(s){return oe(i),$e(r.user.firstName,s)||(r.user.firstName=s),se(s)}),k()(),R(28,"div",19)(29,"label",20),G(30,"First Last Name"),k(),R(31,"input",22),ke("ngModelChange",function(s){return oe(i),$e(r.user.firstLastName,s)||(r.user.firstLastName=s),se(s)}),k()(),R(32,"div",19)(33,"label",20),G(34,"Second Last Name"),k(),R(35,"input",23),ke("ngModelChange",function(s){return oe(i),$e(r.user.secondLastName,s)||(r.user.secondLastName=s),se(s)}),k()(),R(36,"div",19)(37,"label",20),G(38,"Height (m)"),k(),R(39,"input",24),ke("ngModelChange",function(s){return oe(i),$e(r.user.height,s)||(r.user.height=s),se(s)}),k()(),R(40,"div",19)(41,"label",20),G(42,"Weight (kg)"),k(),R(43,"input",25),ke("ngModelChange",function(s){return oe(i),$e(r.user.weight,s)||(r.user.weight=s),se(s)}),k()(),R(44,"div",19)(45,"label",20),G(46,"Age"),k(),R(47,"input",26),ke("ngModelChange",function(s){return oe(i),$e(r.user.age,s)||(r.user.age=s),se(s)}),k()(),R(48,"div",27)(49,"label",20),G(50,"Email"),k(),R(51,"input",28),ke("ngModelChange",function(s){return oe(i),$e(r.user.username,s)||(r.user.username=s),se(s)}),k()(),R(52,"div",27)(53,"label",20),G(54,"Phone Number"),k(),R(55,"input",29),ke("ngModelChange",function(s){return oe(i),$e(r.user.phoneNumber,s)||(r.user.phoneNumber=s),se(s)}),k()(),R(56,"div",30)(57,"label",20),G(58,"Password"),k(),R(59,"div",31)(60,"input",32),ke("ngModelChange",function(s){return oe(i),$e(r.user.password,s)||(r.user.password=s),se(s)}),k(),R(61,"button",33),Be("click",function(){return oe(i),se(r.showPassword=!r.showPassword)}),G(62," \u{1F441} "),k()()()(),$r(63,$A,2,1,"div",34),R(64,"button",35),G(65," Create User "),k()()()()()()}if(n&2){let i=go(22);ae(27),Oe("ngModel",r.user.firstName),ae(4),Oe("ngModel",r.user.firstLastName),ae(4),Oe("ngModel",r.user.secondLastName),ae(4),Oe("ngModel",r.user.height),ae(4),Oe("ngModel",r.user.weight),ae(4),Oe("ngModel",r.user.age),ae(4),Oe("ngModel",r.user.username),ae(4),Oe("ngModel",r.user.phoneNumber),ae(5),Mt("type",r.showPassword?"text":"password"),Oe("ngModel",r.user.password),ae(3),Mt("ngIf",r.errorMessage),ae(),Mt("disabled",i.invalid)}},dependencies:[Kr,bo,eu,Xc,di,Kf,Jc,Zc,ts,Yf,es,Xo],styles:[".page-bg[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#498d8d,#e6f6f4,#eefcff)}"]})};var Yw=[{path:"",component:Cu},{path:"user-dashboard",component:Iu},{path:"nutri-dashboard",component:Su},{path:"sign-up",component:Tu}];var Jw={providers:[Uf(Yw),yf()]};ff(Uc,Jw);
